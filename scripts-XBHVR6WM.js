(function(p,$){typeof exports=="object"&&typeof module<"u"?$(exports):typeof define=="function"&&define.amd?define(["exports"],$):$((p=typeof globalThis<"u"?globalThis:p||self).d3=p.d3||{})})(this,function(p){"use strict";function $(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function un(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function ln(n){let e,t,r;function i(a,o,s=0,c=a.length){if(s<c){if(e(o,o)!==0)return c;do{const u=s+c>>>1;t(a[u],o)<0?s=u+1:c=u}while(s<c)}return s}return n.length!==2?(e=$,t=(a,o)=>$(n(a),o),r=(a,o)=>n(a)-o):(e=n===$||n===un?n:pn,t=n,r=n),{left:i,center:function(a,o,s=0,c=a.length){const u=i(a,o,s,c-1);return u>s&&r(a[u-1],o)>-r(a[u],o)?u-1:u},right:function(a,o,s=0,c=a.length){if(s<c){if(e(o,o)!==0)return c;do{const u=s+c>>>1;t(a[u],o)<=0?s=u+1:c=u}while(s<c)}return s}}}function pn(){return 0}function kn(n){return n===null?NaN:+n}function*Pn(n,e){if(e===void 0)for(let t of n)t!=null&&(t=+t)>=t&&(yield t);else{let t=-1;for(let r of n)(r=e(r,++t,n))!=null&&(r=+r)>=r&&(yield r)}}const Ve=ln($),Mt=Ve.right,We=Ve.left,Re=ln(kn).center;var Ze=Mt;const Vr=Bn(sr),ja=Bn(function(n){const e=sr(n);return(t,r,i,a,o)=>{e(t,r,(i<<=2)+0,(a<<=2)+0,o<<=2),e(t,r,i+1,a+1,o),e(t,r,i+2,a+2,o),e(t,r,i+3,a+3,o)}});function Bn(n){return function(e,t,r=t){if(!((t=+t)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=e;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!t&&!r)return e;const s=t&&n(t),c=r&&n(r),u=i.slice();return s&&c?(Qn(s,u,i,a,o),Qn(s,i,u,a,o),Qn(s,u,i,a,o),De(c,i,u,a,o),De(c,u,i,a,o),De(c,i,u,a,o)):s?(Qn(s,i,u,a,o),Qn(s,u,i,a,o),Qn(s,i,u,a,o)):c&&(De(c,i,u,a,o),De(c,u,i,a,o),De(c,i,u,a,o)),e}}function Qn(n,e,t,r,i){for(let a=0,o=r*i;a<o;)n(e,t,a,a+=r,1)}function De(n,e,t,r,i){for(let a=0,o=r*i;a<r;++a)n(e,t,a,a+o,r)}function sr(n){const e=Math.floor(n);if(e===n)return function(i){const a=2*i+1;return(o,s,c,u,f)=>{if(!((u-=f)>=c))return;let d=i*s[c];const l=f*i;for(let g=c,x=c+l;g<x;g+=f)d+=s[Math.min(u,g)];for(let g=c,x=u;g<=x;g+=f)d+=s[Math.min(u,g+l)],o[g]=d/a,d-=s[Math.max(c,g-l)]}}(n);const t=n-e,r=2*n+1;return(i,a,o,s,c)=>{if(!((s-=c)>=o))return;let u=e*a[o];const f=c*e,d=f+c;for(let l=o,g=o+f;l<g;l+=c)u+=a[Math.min(s,l)];for(let l=o,g=s;l<=g;l+=c)u+=a[Math.min(s,l+f)],i[l]=(u+t*(a[Math.max(o,l-d)]+a[Math.min(s,l+d)]))/r,u-=a[Math.max(o,l-f)]}}function Lt(n,e){let t=0;if(e===void 0)for(let r of n)r!=null&&(r=+r)>=r&&++t;else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(i=+i)>=i&&++t}return t}function uu(n){return 0|n.length}function cu(n){return!(n>0)}function fu(n){return typeof n!="object"||"length"in n?n:Array.from(n)}function wi(n,e){let t,r=0,i=0,a=0;if(e===void 0)for(let o of n)o!=null&&(o=+o)>=o&&(t=o-i,i+=t/++r,a+=t*(o-i));else{let o=-1;for(let s of n)(s=e(s,++o,n))!=null&&(s=+s)>=s&&(t=s-i,i+=t/++r,a+=t*(s-i))}if(r>1)return a/(r-1)}function Rr(n,e){const t=wi(n,e);return t&&Math.sqrt(t)}function Et(n,e){let t,r;if(e===void 0)for(const i of n)i!=null&&(t===void 0?i>=i&&(t=r=i):(t>i&&(t=i),r<i&&(r=i)));else{let i=-1;for(let a of n)(a=e(a,++i,n))!=null&&(t===void 0?a>=a&&(t=r=a):(t>a&&(t=a),r<a&&(r=a)))}return[t,r]}class Hn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=t[i],o=e+a,s=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);s&&(t[r++]=s),e=o}return t[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let t,r,i,a=this._n,o=0;if(a>0){for(o=e[--a];a>0&&(t=o,r=e[--a],o=t+r,i=r-(o-t),!i););a>0&&(i<0&&e[a-1]<0||i>0&&e[a-1]>0)&&(r=2*i,t=o+r,r==t-o&&(o=t))}return o}}class Tt extends Map{constructor(e,t=Fa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Mi(this,e))}has(e){return super.has(Mi(this,e))}set(e,t){return super.set(La(this,e),t)}delete(e){return super.delete(qa(this,e))}}class Ke extends Set{constructor(e,t=Fa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Mi(this,e))}add(e){return super.add(La(this,e))}delete(e){return super.delete(qa(this,e))}}function Mi({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function La({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function qa({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Fa(n){return n!==null&&typeof n=="object"?n.valueOf():n}function At(n){return n}function Ua(n,...e){return qt(n,At,At,e)}function Ya(n,...e){return qt(n,Array.from,At,e)}function Ha(n,e){for(let t=1,r=e.length;t<r;++t)n=n.flatMap(i=>i.pop().map(([a,o])=>[...i,a,o]));return n}function Ei(n,e,...t){return qt(n,At,e,t)}function Ga(n,e,...t){return qt(n,Array.from,e,t)}function Xa(n){if(n.length!==1)throw new Error("duplicate key");return n[0]}function qt(n,e,t,r){return function i(a,o){if(o>=r.length)return t(a);const s=new Tt,c=r[o++];let u=-1;for(const f of a){const d=c(f,++u,a),l=s.get(d);l?l.push(f):s.set(d,[f])}for(const[f,d]of s)s.set(f,i(d,o));return e(s)}(n,0)}function Wa(n,e){return Array.from(e,t=>n[t])}function Ti(n,...e){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");n=Array.from(n);let[t]=e;if(t&&t.length!==2||e.length>1){const r=Uint32Array.from(n,(i,a)=>a);return e.length>1?(e=e.map(i=>n.map(i)),r.sort((i,a)=>{for(const o of e){const s=Ft(o[i],o[a]);if(s)return s}})):(t=n.map(t),r.sort((i,a)=>Ft(t[i],t[a]))),Wa(n,r)}return n.sort(Ai(t))}function Ai(n=$){if(n===$)return Ft;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function Ft(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}var lu=Array.prototype.slice;function Si(n){return()=>n}const hu=Math.sqrt(50),du=Math.sqrt(10),pu=Math.sqrt(2);function ur(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=hu?10:a>=du?5:a>=pu?2:1;let s,c,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(n*u),c=Math.round(e*u),s/u<n&&++s,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,s=Math.round(n/u),c=Math.round(e/u),s*u<n&&++s,c*u>e&&--c),c<s&&.5<=t&&t<2?ur(n,e,2*t):[s,c,u]}function St(n,e,t){if(!((t=+t)>0))return[];if((n=+n)==(e=+e))return[n];const r=e<n,[i,a,o]=r?ur(e,n,t):ur(n,e,t);if(!(a>=i))return[];const s=a-i+1,c=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)c[u]=(a-u)/-o;else for(let u=0;u<s;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)c[u]=(i+u)/-o;else for(let u=0;u<s;++u)c[u]=(i+u)*o;return c}function Ct(n,e,t){return ur(n=+n,e=+e,t=+t)[2]}function cr(n,e,t){t=+t;const r=(e=+e)<(n=+n),i=r?Ct(e,n,t):Ct(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function Ci(n,e,t){let r;for(;;){const i=Ct(n,e,t);if(i===r||i===0||!isFinite(i))return[n,e];i>0?(n=Math.floor(n/i)*i,e=Math.ceil(e/i)*i):i<0&&(n=Math.ceil(n*i)/i,e=Math.floor(e*i)/i),r=i}}function ki(n){return Math.max(1,Math.ceil(Math.log(Lt(n))/Math.LN2)+1)}function Za(){var n=At,e=Et,t=ki;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o,s,c=i.length,u=new Array(c);for(a=0;a<c;++a)u[a]=n(i[a],a,i);var f=e(u),d=f[0],l=f[1],g=t(u,d,l);if(!Array.isArray(g)){const A=l,E=+g;if(e===Et&&([d,l]=Ci(d,l,E)),(g=St(d,l,E))[0]<=d&&(s=Ct(d,l,E)),g[g.length-1]>=l)if(A>=l&&e===Et){const I=Ct(d,l,E);isFinite(I)&&(I>0?l=(Math.floor(l/I)+1)*I:I<0&&(l=(Math.ceil(l*-I)+1)/-I))}else g.pop()}for(var x=g.length,y=0,w=x;g[y]<=d;)++y;for(;g[w-1]>l;)--w;(y||w<x)&&(g=g.slice(y,w),x=w-y);var b,S=new Array(x+1);for(a=0;a<=x;++a)(b=S[a]=[]).x0=a>0?g[a-1]:d,b.x1=a<x?g[a]:l;if(isFinite(s)){if(s>0)for(a=0;a<c;++a)(o=u[a])!=null&&d<=o&&o<=l&&S[Math.min(x,Math.floor((o-d)/s))].push(i[a]);else if(s<0){for(a=0;a<c;++a)if((o=u[a])!=null&&d<=o&&o<=l){const A=Math.floor((d-o)*s);S[Math.min(x,A+(g[A]<=o))].push(i[a])}}}else for(a=0;a<c;++a)(o=u[a])!=null&&d<=o&&o<=l&&S[Ze(g,o,0,x)].push(i[a]);return S}return r.value=function(i){return arguments.length?(n=typeof i=="function"?i:Si(i),r):n},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Si([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(t=typeof i=="function"?i:Si(Array.isArray(i)?lu.call(i):i),r):t},r}function fr(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function Ii(n,e){let t,r=-1,i=-1;if(e===void 0)for(const a of n)++i,a!=null&&(t<a||t===void 0&&a>=a)&&(t=a,r=i);else for(let a of n)(a=e(a,++i,n))!=null&&(t<a||t===void 0&&a>=a)&&(t=a,r=i);return r}function Dr(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function jr(n,e){let t,r=-1,i=-1;if(e===void 0)for(const a of n)++i,a!=null&&(t>a||t===void 0&&a>=a)&&(t=a,r=i);else for(let a of n)(a=e(a,++i,n))!=null&&(t>a||t===void 0&&a>=a)&&(t=a,r=i);return r}function Lr(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?Ft:Ai(i);r>t;){if(r-t>600){const c=r-t+1,u=e-t+1,f=Math.log(c),d=.5*Math.exp(2*f/3),l=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1);Lr(n,e,Math.max(t,Math.floor(e-u*d/c+l)),Math.min(r,Math.floor(e+(c-u)*d/c+l)),i)}const a=n[e];let o=t,s=r;for(lr(n,t,e),i(n[r],a)>0&&lr(n,t,r);o<s;){for(lr(n,o,s),++o,--s;i(n[o],a)<0;)++o;for(;i(n[s],a)>0;)--s}i(n[t],a)===0?lr(n,t,s):(++s,lr(n,s,r)),s<=e&&(t=s+1),e<=s&&(r=s-1)}return n}function lr(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function te(n,e=$){let t,r=!1;if(e.length===1){let i;for(const a of n){const o=e(a);(r?$(o,i)>0:$(o,o)===0)&&(t=a,i=o,r=!0)}}else for(const i of n)(r?e(i,t)>0:e(i,i)===0)&&(t=i,r=!0);return t}function hr(n,e,t){if((r=(n=Float64Array.from(Pn(n,t))).length)&&!isNaN(e=+e)){if(e<=0||r<2)return Dr(n);if(e>=1)return fr(n);var r,i=(r-1)*e,a=Math.floor(i),o=fr(Lr(n,a).subarray(0,a+1));return o+(Dr(n.subarray(a+1))-o)*(i-a)}}function Ka(n,e,t=kn){if((r=n.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,a=Math.floor(i),o=+t(n[a],a,n);return o+(+t(n[a+1],a+1,n)-o)*(i-a)}}function Ni(n,e,t){if((r=(n=Float64Array.from(Pn(n,t))).length)&&!isNaN(e=+e)){if(e<=0||r<2)return jr(n);if(e>=1)return Ii(n);var r,i=Math.floor((r-1)*e),a=Lr(Uint32Array.from(n,(o,s)=>s),i,0,r-1,(o,s)=>Ft(n[o],n[s]));return te(a.subarray(0,i+1),o=>n[o])}}function qr(n){return Array.from(function*(e){for(const t of e)yield*t}(n))}function gu(n,e){return[n,e]}function st(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=0|Math.max(0,Math.ceil((e-n)/t)),a=new Array(i);++r<i;)a[r]=n+r*t;return a}function Ja(n,e=$){if(e.length===1)return jr(n,e);let t,r=-1,i=-1;for(const a of n)++i,(r<0?e(a,a)===0:e(a,t)<0)&&(t=a,r=i);return r}var vu=Qa(Math.random);function Qa(n){return function(e,t=0,r=e.length){let i=r-(t=+t);for(;i;){const a=n()*i--|0,o=e[i+t];e[i+t]=e[a+t],e[a+t]=o}return e}}function no(n){if(!(i=n.length))return[];for(var e=-1,t=Dr(n,mu),r=new Array(t);++e<t;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=n[a][e];return r}function mu(n){return n.length}function yu(n){return n instanceof Ke?n:new Ke(n)}function eo(n,e){const t=n[Symbol.iterator](),r=new Set;for(const i of e){const a=to(i);if(r.has(a))continue;let o,s;for(;{value:o,done:s}=t.next();){if(s)return!1;const c=to(o);if(r.add(c),Object.is(a,c))break}}return!0}function to(n){return n!==null&&typeof n=="object"?n.valueOf():n}function _u(n){return n}var dr=1,Ut=2,Yt=3,pr=4,Ne=1e-6;function $n(n){return"translate("+n+",0)"}function Bi(n){return"translate(0,"+n+")"}function zi(n){return e=>+n(e)}function $i(n,e){return e=Math.max(0,n.bandwidth()-2*e)/2,n.round()&&(e=Math.round(e)),t=>+n(t)+e}function ro(){return!this.__axis}function Ht(n,e){var t=[],r=null,i=null,a=6,o=6,s=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=n===dr||n===pr?-1:1,f=n===pr||n===Ut?"x":"y",d=n===dr||n===Yt?$n:Bi;function l(g){var x=r??(e.ticks?e.ticks.apply(e,t):e.domain()),y=i??(e.tickFormat?e.tickFormat.apply(e,t):_u),w=Math.max(a,0)+s,b=e.range(),S=+b[0]+c,A=+b[b.length-1]+c,E=(e.bandwidth?$i:zi)(e.copy(),c),I=g.selection?g.selection():g,N=I.selectAll(".domain").data([null]),F=I.selectAll(".tick").data(x,e).order(),W=F.exit(),U=F.enter().append("g").attr("class","tick"),O=F.select("line"),V=F.select("text");N=N.merge(N.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(U),O=O.merge(U.append("line").attr("stroke","currentColor").attr(f+"2",u*a)),V=V.merge(U.append("text").attr("fill","currentColor").attr(f,u*w).attr("dy",n===dr?"0em":n===Yt?"0.71em":"0.32em")),g!==I&&(N=N.transition(g),F=F.transition(g),O=O.transition(g),V=V.transition(g),W=W.transition(g).attr("opacity",Ne).attr("transform",function(j){return isFinite(j=E(j))?d(j+c):this.getAttribute("transform")}),U.attr("opacity",Ne).attr("transform",function(j){var Z=this.parentNode.__axis;return d((Z&&isFinite(Z=Z(j))?Z:E(j))+c)})),W.remove(),N.attr("d",n===pr||n===Ut?o?"M"+u*o+","+S+"H"+c+"V"+A+"H"+u*o:"M"+c+","+S+"V"+A:o?"M"+S+","+u*o+"V"+c+"H"+A+"V"+u*o:"M"+S+","+c+"H"+A),F.attr("opacity",1).attr("transform",function(j){return d(E(j)+c)}),O.attr(f+"2",u*a),V.attr(f,u*w).text(y),I.filter(ro).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",n===Ut?"start":n===pr?"end":"middle"),I.each(function(){this.__axis=E})}return l.scale=function(g){return arguments.length?(e=g,l):e},l.ticks=function(){return t=Array.from(arguments),l},l.tickArguments=function(g){return arguments.length?(t=g==null?[]:Array.from(g),l):t.slice()},l.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),l):r&&r.slice()},l.tickFormat=function(g){return arguments.length?(i=g,l):i},l.tickSize=function(g){return arguments.length?(a=o=+g,l):a},l.tickSizeInner=function(g){return arguments.length?(a=+g,l):a},l.tickSizeOuter=function(g){return arguments.length?(o=+g,l):o},l.tickPadding=function(g){return arguments.length?(s=+g,l):s},l.offset=function(g){return arguments.length?(c=+g,l):c},l}var io={value:()=>{}};function ut(){for(var n,e=0,t=arguments.length,r={};e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new je(r)}function je(n){this._=n}function Gt(n,e){for(var t,r=0,i=n.length;r<i;++r)if((t=n[r]).name===e)return t.value}function Le(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=io,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}je.prototype=ut.prototype={constructor:je,on:function(n,e){var t,r,i=this._,a=(r=i,(n+"").trim().split(/^|\s+/).map(function(c){var u="",f=c.indexOf(".");if(f>=0&&(u=c.slice(f+1),c=c.slice(0,f)),c&&!r.hasOwnProperty(c))throw new Error("unknown type: "+c);return{type:c,name:u}})),o=-1,s=a.length;if(!(arguments.length<2)){if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(t=(n=a[o]).type)i[t]=Le(i[t],n.name,e);else if(e==null)for(t in i)i[t]=Le(i[t],n.name,null);return this}for(;++o<s;)if((t=(n=a[o]).type)&&(t=Gt(i[t],n.name)))return t},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new je(n)},call:function(n,e){if((t=arguments.length-2)>0)for(var t,r,i=new Array(t),a=0;a<t;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=0,t=(r=this._[n]).length;a<t;++a)r[a].value.apply(e,i)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,a=r.length;i<a;++i)r[i].value.apply(e,t)}};var gr="http://www.w3.org/1999/xhtml",Fr={svg:"http://www.w3.org/2000/svg",xhtml:gr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vr(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),Fr.hasOwnProperty(e)?{space:Fr[e],local:n}:n}function ao(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===gr&&e.documentElement.namespaceURI===gr?e.createElement(n):e.createElementNS(t,n)}}function Pi(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Ur(n){var e=vr(n);return(e.local?Pi:ao)(e)}function bu(){}function kt(n){return n==null?bu:function(){return this.querySelector(n)}}function Oi(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function xu(){return[]}function Vi(n){return n==null?xu:function(){return this.querySelectorAll(n)}}function jn(n){return function(){return this.matches(n)}}function Yr(n){return function(e){return e.matches(n)}}var wu=Array.prototype.find;function oo(){return this.firstElementChild}var Mu=Array.prototype.filter;function Eu(){return Array.from(this.children)}function so(n){return new Array(n.length)}function Hr(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}function Tu(n,e,t,r,i,a){for(var o,s=0,c=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):t[s]=new Hr(n,a[s]);for(;s<c;++s)(o=e[s])&&(i[s]=o)}function Au(n,e,t,r,i,a,o){var s,c,u,f=new Map,d=e.length,l=a.length,g=new Array(d);for(s=0;s<d;++s)(c=e[s])&&(g[s]=u=o.call(c,c.__data__,s,e)+"",f.has(u)?i[s]=c:f.set(u,c));for(s=0;s<l;++s)u=o.call(n,a[s],s,a)+"",(c=f.get(u))?(r[s]=c,c.__data__=a[s],f.delete(u)):t[s]=new Hr(n,a[s]);for(s=0;s<d;++s)(c=e[s])&&f.get(g[s])===c&&(i[s]=c)}function Su(n){return n.__data__}function Cu(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function uo(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Ri(n){return function(){this.removeAttribute(n)}}function co(n){return function(){this.removeAttributeNS(n.space,n.local)}}function ku(n,e){return function(){this.setAttribute(n,e)}}function Di(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Iu(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function Nu(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function fo(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function ji(n){return function(){this.style.removeProperty(n)}}function Bu(n,e,t){return function(){this.style.setProperty(n,e,t)}}function zu(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function ct(n,e){return n.style.getPropertyValue(e)||fo(n).getComputedStyle(n,null).getPropertyValue(e)}function Li(n){return function(){delete this[n]}}function $u(n,e){return function(){this[n]=e}}function Pu(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function lo(n){return n.trim().split(/^|\s+/)}function qi(n){return n.classList||new Fi(n)}function Fi(n){this._node=n,this._names=lo(n.getAttribute("class")||"")}function Ui(n,e){for(var t=qi(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function ho(n,e){for(var t=qi(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function Ou(n){return function(){Ui(this,n)}}function Vu(n){return function(){ho(this,n)}}function Ru(n,e){return function(){(e.apply(this,arguments)?Ui:ho)(this,n)}}function po(){this.textContent=""}function Du(n){return function(){this.textContent=n}}function ju(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function Lu(){this.innerHTML=""}function qu(n){return function(){this.innerHTML=n}}function Fu(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function Uu(){this.nextSibling&&this.parentNode.appendChild(this)}function Yu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function h(){return null}function v(){var n=this.parentNode;n&&n.removeChild(this)}function m(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function M(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function _(n){return function(){var e=this.__on;if(e){for(var t,r=0,i=-1,a=e.length;r<a;++r)t=e[r],n.type&&t.type!==n.type||t.name!==n.name?e[++i]=t:this.removeEventListener(t.type,t.listener,t.options);++i?e.length=i:delete this.__on}}}function T(n,e,t){return function(){var r,i=this.__on,a=function(c){return function(u){c.call(this,u,this.__data__)}}(e);if(i){for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===n.type&&r.name===n.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=t),void(r.value=e)}this.addEventListener(n.type,a,t),r={type:n.type,name:n.name,value:e,listener:a,options:t},i?i.push(r):this.__on=[r]}}function C(n,e,t){var r=fo(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function z(n,e){return function(){return C(this,n,e)}}function k(n,e){return function(){return C(this,n,e.apply(this,arguments))}}Hr.prototype={constructor:Hr,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}},Fi.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var R=[null];function P(n,e){this._groups=n,this._parents=e}function D(){return new P([[document.documentElement]],R)}function q(n){return typeof n=="string"?new P([[document.querySelector(n)]],[document.documentElement]):new P([[n]],R)}P.prototype=D.prototype={constructor:P,select:function(n){typeof n!="function"&&(n=kt(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var a,o,s=e[i],c=s.length,u=r[i]=new Array(c),f=0;f<c;++f)(a=s[f])&&(o=n.call(a,a.__data__,f,s))&&("__data__"in a&&(o.__data__=a.__data__),u[f]=o);return new P(r,this._parents)},selectAll:function(n){n=typeof n=="function"?function(f){return function(){return Oi(f.apply(this,arguments))}}(n):Vi(n);for(var e=this._groups,t=e.length,r=[],i=[],a=0;a<t;++a)for(var o,s=e[a],c=s.length,u=0;u<c;++u)(o=s[u])&&(r.push(n.call(o,o.__data__,u,s)),i.push(o));return new P(r,i)},selectChild:function(n){return this.select(n==null?oo:function(e){return function(){return wu.call(this.children,e)}}(typeof n=="function"?n:Yr(n)))},selectChildren:function(n){return this.selectAll(n==null?Eu:function(e){return function(){return Mu.call(this.children,e)}}(typeof n=="function"?n:Yr(n)))},filter:function(n){typeof n!="function"&&(n=jn(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var a,o=e[i],s=o.length,c=r[i]=[],u=0;u<s;++u)(a=o[u])&&n.call(a,a.__data__,u,o)&&c.push(a);return new P(r,this._parents)},data:function(n,e){if(!arguments.length)return Array.from(this,Su);var t=e?Au:Tu,r=this._parents,i=this._groups;typeof n!="function"&&(n=function(I){return function(){return I}}(n));for(var a=i.length,o=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var f=r[u],d=i[u],l=d.length,g=Cu(n.call(f,f&&f.__data__,u,r)),x=g.length,y=s[u]=new Array(x),w=o[u]=new Array(x);t(f,d,y,w,c[u]=new Array(l),g,e);for(var b,S,A=0,E=0;A<x;++A)if(b=y[A]){for(A>=E&&(E=A+1);!(S=w[E])&&++E<x;);b._next=S||null}}return(o=new P(o,r))._enter=s,o._exit=c,o},enter:function(){return new P(this._enter||this._groups.map(so),this._parents)},exit:function(){return new P(this._exit||this._groups.map(so),this._parents)},join:function(n,e,t){var r=this.enter(),i=this,a=this.exit();return typeof n=="function"?(r=n(r))&&(r=r.selection()):r=r.append(n+""),e!=null&&(i=e(i))&&(i=i.selection()),t==null?a.remove():t(a),r&&i?r.merge(i).order():i},merge:function(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,a=r.length,o=Math.min(i,a),s=new Array(i),c=0;c<o;++c)for(var u,f=t[c],d=r[c],l=f.length,g=s[c]=new Array(l),x=0;x<l;++x)(u=f[x]||d[x])&&(g[x]=u);for(;c<i;++c)s[c]=t[c];return new P(s,this._parents)},selection:function(){return this},order:function(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r,i=n[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function e(d,l){return d&&l?n(d.__data__,l.__data__):!d-!l}n||(n=uo);for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a){for(var o,s=t[a],c=s.length,u=i[a]=new Array(c),f=0;f<c;++f)(o=s[f])&&(u[f]=o);u.sort(e)}return new P(i,this._parents).order()},call:function(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let n=0;for(const e of this)++n;return n},empty:function(){return!this.node()},each:function(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i,a=e[t],o=0,s=a.length;o<s;++o)(i=a[o])&&n.call(i,i.__data__,o,a);return this},attr:function(n,e){var t=vr(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?co:Ri:typeof e=="function"?t.local?Nu:Iu:t.local?Di:ku)(t,e))},style:function(n,e,t){return arguments.length>1?this.each((e==null?ji:typeof e=="function"?zu:Bu)(n,e,t??"")):ct(this.node(),n)},property:function(n,e){return arguments.length>1?this.each((e==null?Li:typeof e=="function"?Pu:$u)(n,e)):this.node()[n]},classed:function(n,e){var t=lo(n+"");if(arguments.length<2){for(var r=qi(this.node()),i=-1,a=t.length;++i<a;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?Ru:e?Ou:Vu)(t,e))},text:function(n){return arguments.length?this.each(n==null?po:(typeof n=="function"?ju:Du)(n)):this.node().textContent},html:function(n){return arguments.length?this.each(n==null?Lu:(typeof n=="function"?Fu:qu)(n)):this.node().innerHTML},raise:function(){return this.each(Uu)},lower:function(){return this.each(Yu)},append:function(n){var e=typeof n=="function"?n:Ur(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(n,e){var t=typeof n=="function"?n:Ur(n),r=e==null?h:typeof e=="function"?e:kt(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(v)},clone:function(n){return this.select(n?M:m)},datum:function(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function(n,e,t){var r,i,a=function(d){return d.trim().split(/^|\s+/).map(function(l){var g="",x=l.indexOf(".");return x>=0&&(g=l.slice(x+1),l=l.slice(0,x)),{type:l,name:g}})}(n+""),o=a.length;if(!(arguments.length<2)){for(s=e?T:_,r=0;r<o;++r)this.each(s(a[r],e,t));return this}var s=this.node().__on;if(s){for(var c,u=0,f=s.length;u<f;++u)for(r=0,c=s[u];r<o;++r)if((i=a[r]).type===c.type&&i.name===c.name)return c.value}},dispatch:function(n,e){return this.each((typeof e=="function"?k:z)(n,e))},[Symbol.iterator]:function*(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r,i=n[e],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};var G=0;function en(){return new H}function H(){this._="@"+(++G).toString(36)}function tn(n){let e;for(;e=n.sourceEvent;)n=e;return n}function J(n,e){if(n=tn(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}H.prototype=en.prototype={constructor:H,get:function(n){for(var e=this._;!(e in n);)if(!(n=n.parentNode))return;return n[e]},set:function(n,e){return n[this._]=e},remove:function(n){return this._ in n&&delete n[this._]},toString:function(){return this._}};const nn={passive:!1},cn={capture:!0,passive:!1};function fn(n){n.stopImmediatePropagation()}function on(n){n.preventDefault(),n.stopImmediatePropagation()}function dn(n){var e=n.document.documentElement,t=q(n).on("dragstart.drag",on,cn);"onselectstart"in e?t.on("selectstart.drag",on,cn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Rn(n,e){var t=n.document.documentElement,r=q(n).on("dragstart.drag",null);e&&(r.on("click.drag",on,cn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}var Nn=n=>()=>n;function bn(n,{sourceEvent:e,subject:t,target:r,identifier:i,active:a,x:o,y:s,dx:c,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}function Mn(n){return!n.ctrlKey&&!n.button}function ne(){return this.parentNode}function Be(n,e){return e??{x:n.x,y:n.y}}function qe(){return navigator.maxTouchPoints||"ontouchstart"in this}function re(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Se(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function On(){}bn.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};var ze=.7,ie=1/ze,ae="\\s*([+-]?\\d+)\\s*",qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ft=/^#([0-9a-f]{3,8})$/,Yi=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),Hu=new RegExp(`^rgb\\(${oe},${oe},${oe}\\)$`),Gu=new RegExp(`^rgba\\(${ae},${ae},${ae},${qn}\\)$`),Xu=new RegExp(`^rgba\\(${oe},${oe},${oe},${qn}\\)$`),Wu=new RegExp(`^hsl\\(${qn},${oe},${oe}\\)$`),go=new RegExp(`^hsla\\(${qn},${oe},${oe},${qn}\\)$`),Y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function mn(){return this.rgb().formatHex()}function Ml(){return this.rgb().formatRgb()}function Xt(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=ft.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?El(e):t===3?new se(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):t===8?vo(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):t===4?vo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Yi.exec(n))?new se(e[1],e[2],e[3],1):(e=Hu.exec(n))?new se(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Gu.exec(n))?vo(e[1],e[2],e[3],e[4]):(e=Xu.exec(n))?vo(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Wu.exec(n))?Sl(e[1],e[2]/100,e[3]/100,1):(e=go.exec(n))?Sl(e[1],e[2]/100,e[3]/100,e[4]):Y.hasOwnProperty(n)?El(Y[n]):n==="transparent"?new se(NaN,NaN,NaN,0):null}function El(n){return new se(n>>16&255,n>>8&255,255&n,1)}function vo(n,e,t,r){return r<=0&&(n=e=t=NaN),new se(n,e,t,r)}function Zu(n){return n instanceof On||(n=Xt(n)),n?new se((n=n.rgb()).r,n.g,n.b,n.opacity):new se}function Gr(n,e,t,r){return arguments.length===1?Zu(n):new se(n,e,t,r??1)}function se(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}function Tl(){return`#${yr(this.r)}${yr(this.g)}${yr(this.b)}`}function Al(){const n=mo(this.opacity);return`${n===1?"rgb(":"rgba("}${mr(this.r)}, ${mr(this.g)}, ${mr(this.b)}${n===1?")":`, ${n})`}`}function mo(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function mr(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function yr(n){return((n=mr(n))<16?"0":"")+n.toString(16)}function Sl(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Je(n,e,t,r)}function Cl(n){if(n instanceof Je)return new Je(n.h,n.s,n.l,n.opacity);if(n instanceof On||(n=Xt(n)),!n)return new Je;if(n instanceof Je)return n;var e=(n=n.rgb()).r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=e===a?(t-r)/s+6*(t<r):t===a?(r-e)/s+2:(e-t)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new Je(o,s,c,n.opacity)}function yo(n,e,t,r){return arguments.length===1?Cl(n):new Je(n,e,t,r??1)}function Je(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}function kl(n){return(n=(n||0)%360)<0?n+360:n}function _o(n){return Math.max(0,Math.min(1,n||0))}function Ku(n,e,t){return 255*(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)}re(On,Xt,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:mn,formatHex:mn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Cl(this).formatHsl()},formatRgb:Ml,toString:Ml}),re(se,Gr,Se(On,{brighter(n){return n=n==null?ie:Math.pow(ie,n),new se(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?ze:Math.pow(ze,n),new se(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new se(mr(this.r),mr(this.g),mr(this.b),mo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tl,formatHex:Tl,formatHex8:function(){return`#${yr(this.r)}${yr(this.g)}${yr(this.b)}${yr(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Al,toString:Al})),re(Je,yo,Se(On,{brighter(n){return n=n==null?ie:Math.pow(ie,n),new Je(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ze:Math.pow(ze,n),new Je(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new se(Ku(n>=240?n-240:n+120,i,r),Ku(n,i,r),Ku(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Je(kl(this.h),_o(this.s),_o(this.l),mo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=mo(this.opacity);return`${n===1?"hsl(":"hsla("}${kl(this.h)}, ${100*_o(this.s)}%, ${100*_o(this.l)}%${n===1?")":`, ${n})`}`}}));const Il=Math.PI/180,Nl=180/Math.PI,Bl=.96422,zl=1,$l=.82521,Pl=4/29,Xr=6/29,Ol=3*Xr*Xr,yg=Xr*Xr*Xr;function Vl(n){if(n instanceof Qe)return new Qe(n.l,n.a,n.b,n.opacity);if(n instanceof lt)return Dl(n);n instanceof se||(n=Zu(n));var e,t,r=ec(n.r),i=ec(n.g),a=ec(n.b),o=Ju((.2225045*r+.7168786*i+.0606169*a)/zl);return r===i&&i===a?e=t=o:(e=Ju((.4360747*r+.3850649*i+.1430804*a)/Bl),t=Ju((.0139322*r+.0971045*i+.7141733*a)/$l)),new Qe(116*o-16,500*(e-o),200*(o-t),n.opacity)}function bo(n,e,t,r){return arguments.length===1?Vl(n):new Qe(n,e,t,r??1)}function Qe(n,e,t,r){this.l=+n,this.a=+e,this.b=+t,this.opacity=+r}function Ju(n){return n>yg?Math.pow(n,1/3):n/Ol+Pl}function Qu(n){return n>Xr?n*n*n:Ol*(n-Pl)}function nc(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function ec(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Rl(n){if(n instanceof lt)return new lt(n.h,n.c,n.l,n.opacity);if(n instanceof Qe||(n=Vl(n)),n.a===0&&n.b===0)return new lt(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var e=Math.atan2(n.b,n.a)*Nl;return new lt(e<0?e+360:e,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function xo(n,e,t,r){return arguments.length===1?Rl(n):new lt(n,e,t,r??1)}function lt(n,e,t,r){this.h=+n,this.c=+e,this.l=+t,this.opacity=+r}function Dl(n){if(isNaN(n.h))return new Qe(n.l,0,0,n.opacity);var e=n.h*Il;return new Qe(n.l,Math.cos(e)*n.c,Math.sin(e)*n.c,n.opacity)}re(Qe,bo,Se(On,{brighter(n){return new Qe(this.l+18*(n??1),this.a,this.b,this.opacity)},darker(n){return new Qe(this.l-18*(n??1),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,e=isNaN(this.a)?n:n+this.a/500,t=isNaN(this.b)?n:n-this.b/200;return new se(nc(3.1338561*(e=Bl*Qu(e))-1.6168667*(n=zl*Qu(n))-.4906146*(t=$l*Qu(t))),nc(-.9787684*e+1.9161415*n+.033454*t),nc(.0719453*e-.2289914*n+1.4052427*t),this.opacity)}})),re(lt,xo,Se(On,{brighter(n){return new lt(this.h,this.c,this.l+18*(n??1),this.opacity)},darker(n){return new lt(this.h,this.c,this.l-18*(n??1),this.opacity)},rgb(){return Dl(this).rgb()}}));var jl=-.14861,tc=1.78277,rc=-.29227,wo=-.90649,Hi=1.97294,Ll=Hi*wo,ql=Hi*tc,Fl=tc*rc-wo*jl;function nt(n,e,t,r){return arguments.length===1?function(i){if(i instanceof _r)return new _r(i.h,i.s,i.l,i.opacity);i instanceof se||(i=Zu(i));var a=i.r/255,o=i.g/255,s=i.b/255,c=(Fl*s+Ll*a-ql*o)/(Fl+Ll-ql),u=s-c,f=(Hi*(o-c)-rc*u)/wo,d=Math.sqrt(f*f+u*u)/(Hi*c*(1-c)),l=d?Math.atan2(f,u)*Nl-120:NaN;return new _r(l<0?l+360:l,d,c,i.opacity)}(n):new _r(n,e,t,r??1)}function _r(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}function Ul(n,e,t,r,i){var a=n*n,o=a*n;return((1-3*n+3*a-o)*e+(4-6*a+3*o)*t+(1+3*n+3*a-3*o)*r+o*i)/6}function Yl(n){var e=n.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),i=n[r],a=n[r+1],o=r>0?n[r-1]:2*i-a,s=r<e-1?n[r+2]:2*a-i;return Ul((t-r/e)*e,o,i,a,s)}}function Hl(n){var e=n.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),i=n[(r+e-1)%e],a=n[r%e],o=n[(r+1)%e],s=n[(r+2)%e];return Ul((t-r/e)*e,i,a,o,s)}}re(_r,nt,Se(On,{brighter(n){return n=n==null?ie:Math.pow(ie,n),new _r(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ze:Math.pow(ze,n),new _r(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*Il,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(n),i=Math.sin(n);return new se(255*(e+t*(jl*r+tc*i)),255*(e+t*(rc*r+wo*i)),255*(e+t*(Hi*r)),this.opacity)}}));var Mo=n=>()=>n;function Gl(n,e){return function(t){return n+t*e}}function Eo(n,e){var t=e-n;return t?Gl(n,t>180||t<-180?t-360*Math.round(t/360):t):Mo(isNaN(n)?e:n)}function _g(n){return(n=+n)==1?ue:function(e,t){return t-e?function(r,i,a){return r=Math.pow(r,a),i=Math.pow(i,a)-r,a=1/a,function(o){return Math.pow(r+o*i,a)}}(e,t,n):Mo(isNaN(e)?t:e)}}function ue(n,e){var t=e-n;return t?Gl(n,t):Mo(isNaN(n)?e:n)}var Gi=function n(e){var t=_g(e);function r(i,a){var o=t((i=Gr(i)).r,(a=Gr(a)).r),s=t(i.g,a.g),c=t(i.b,a.b),u=ue(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=n,r}(1);function Xl(n){return function(e){var t,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(t=0;t<i;++t)r=Gr(e[t]),a[t]=r.r||0,o[t]=r.g||0,s[t]=r.b||0;return a=n(a),o=n(o),s=n(s),r.opacity=1,function(c){return r.r=a(c),r.g=o(c),r.b=s(c),r+""}}}var Wl=Xl(Yl),bg=Xl(Hl);function ic(n,e){e||(e=[]);var t,r=n?Math.min(e.length,n.length):0,i=e.slice();return function(a){for(t=0;t<r;++t)i[t]=n[t]*(1-a)+e[t]*a;return i}}function Zl(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Kl(n,e){var t,r=e?e.length:0,i=n?Math.min(r,n.length):0,a=new Array(i),o=new Array(r);for(t=0;t<i;++t)a[t]=Wt(n[t],e[t]);for(;t<r;++t)o[t]=e[t];return function(s){for(t=0;t<i;++t)o[t]=a[t](s);return o}}function Jl(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function Fe(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Ql(n,e){var t,r={},i={};for(t in n!==null&&typeof n=="object"||(n={}),e!==null&&typeof e=="object"||(e={}),e)t in n?r[t]=Wt(n[t],e[t]):i[t]=e[t];return function(a){for(t in r)i[t]=r[t](a);return i}}var ac=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oc=new RegExp(ac.source,"g");function sc(n,e){var t,r,i,a=ac.lastIndex=oc.lastIndex=0,o=-1,s=[],c=[];for(n+="",e+="";(t=ac.exec(n))&&(r=oc.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(t=t[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,c.push({i:o,x:Fe(t,r)})),a=oc.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?function(u){return function(f){return u(f)+""}}(c[0].x):function(u){return function(){return u}}(e):(e=c.length,function(u){for(var f,d=0;d<e;++d)s[(f=c[d]).i]=f.x(u);return s.join("")})}function Wt(n,e){var t,r=typeof e;return e==null||r==="boolean"?Mo(e):(r==="number"?Fe:r==="string"?(t=Xt(e))?(e=t,Gi):sc:e instanceof Xt?Gi:e instanceof Date?Jl:Zl(e)?ic:Array.isArray(e)?Kl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ql:Fe)(n,e)}function To(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}var Ao,nh=180/Math.PI,uc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eh(n,e,t,r,i,a){var o,s,c;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(c=n*t+e*r)&&(t-=n*c,r-=e*c),(s=Math.sqrt(t*t+r*r))&&(t/=s,r/=s,c/=s),n*r<e*t&&(n=-n,e=-e,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,n)*nh,skewX:Math.atan(c)*nh,scaleX:o,scaleY:s}}function th(n,e,t,r){function i(a){return a.length?a.pop()+" ":""}return function(a,o){var s=[],c=[];return a=n(a),o=n(o),function(u,f,d,l,g,x){if(u!==d||f!==l){var y=g.push("translate(",null,e,null,t);x.push({i:y-4,x:Fe(u,d)},{i:y-2,x:Fe(f,l)})}else(d||l)&&g.push("translate("+d+e+l+t)}(a.translateX,a.translateY,o.translateX,o.translateY,s,c),function(u,f,d,l){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),l.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Fe(u,f)})):f&&d.push(i(d)+"rotate("+f+r)}(a.rotate,o.rotate,s,c),function(u,f,d,l){u!==f?l.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Fe(u,f)}):f&&d.push(i(d)+"skewX("+f+r)}(a.skewX,o.skewX,s,c),function(u,f,d,l,g,x){if(u!==d||f!==l){var y=g.push(i(g)+"scale(",null,",",null,")");x.push({i:y-4,x:Fe(u,d)},{i:y-2,x:Fe(f,l)})}else d===1&&l===1||g.push(i(g)+"scale("+d+","+l+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,c),a=o=null,function(u){for(var f,d=-1,l=c.length;++d<l;)s[(f=c[d]).i]=f.x(u);return s.join("")}}}var rh=th(function(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?uc:eh(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),ih=th(function(n){return n==null?uc:(Ao||(Ao=document.createElementNS("http://www.w3.org/2000/svg","g")),Ao.setAttribute("transform",n),(n=Ao.transform.baseVal.consolidate())?eh((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):uc)},", ",")",")");function ah(n){return((n=Math.exp(n))+1/n)/2}var oh=function n(e,t,r){function i(a,o){var s,c,u=a[0],f=a[1],d=a[2],l=o[0],g=o[1],x=o[2],y=l-u,w=g-f,b=y*y+w*w;if(b<1e-12)c=Math.log(x/d)/e,s=function(F){return[u+F*y,f+F*w,d*Math.exp(e*F*c)]};else{var S=Math.sqrt(b),A=(x*x-d*d+r*b)/(2*d*t*S),E=(x*x-d*d-r*b)/(2*x*t*S),I=Math.log(Math.sqrt(A*A+1)-A),N=Math.log(Math.sqrt(E*E+1)-E);c=(N-I)/e,s=function(F){var W=F*c,U=ah(I),O=d/(t*S)*(U*function(V){return((V=Math.exp(2*V))-1)/(V+1)}(e*W+I)-function(V){return((V=Math.exp(V))-1/V)/2}(I));return[u+O*y,f+O*w,d*U/ah(e*W+I)]}}return s.duration=1e3*c*e/Math.SQRT2,s}return i.rho=function(a){var o=Math.max(.001,+a),s=o*o;return n(o,s,s*s)},i}(Math.SQRT2,2,4);function sh(n){return function(e,t){var r=n((e=yo(e)).h,(t=yo(t)).h),i=ue(e.s,t.s),a=ue(e.l,t.l),o=ue(e.opacity,t.opacity);return function(s){return e.h=r(s),e.s=i(s),e.l=a(s),e.opacity=o(s),e+""}}}var xg=sh(Eo),wg=sh(ue);function uh(n){return function(e,t){var r=n((e=xo(e)).h,(t=xo(t)).h),i=ue(e.c,t.c),a=ue(e.l,t.l),o=ue(e.opacity,t.opacity);return function(s){return e.h=r(s),e.c=i(s),e.l=a(s),e.opacity=o(s),e+""}}}var Mg=uh(Eo),Eg=uh(ue);function ch(n){return function e(t){function r(i,a){var o=n((i=nt(i)).h,(a=nt(a)).h),s=ue(i.s,a.s),c=ue(i.l,a.l),u=ue(i.opacity,a.opacity);return function(f){return i.h=o(f),i.s=s(f),i.l=c(Math.pow(f,t)),i.opacity=u(f),i+""}}return t=+t,r.gamma=e,r}(1)}var Tg=ch(Eo),So=ch(ue);function fh(n,e){e===void 0&&(e=n,n=Wt);for(var t=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);t<r;)a[t]=n(i,i=e[++t]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}var Co,Xi,Wr=0,Wi=0,Zi=0,lh=1e3,ko=0,br=0,Io=0,Ki=typeof performance=="object"&&performance.now?performance:Date,hh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Ji(){return br||(hh(Ag),br=Ki.now()+Io)}function Ag(){br=0}function Qi(){this._call=this._time=this._next=null}function No(n,e,t){var r=new Qi;return r.restart(n,e,t),r}function dh(){Ji(),++Wr;for(var n,e=Co;e;)(n=br-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Wr}function ph(){br=(ko=Ki.now())+Io,Wr=Wi=0;try{dh()}finally{Wr=0,function(){for(var n,e,t=Co,r=1/0;t;)t._call?(r>t._time&&(r=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:Co=e);Xi=n,cc(r)}(),br=0}}function Sg(){var n=Ki.now(),e=n-ko;e>lh&&(Io-=e,ko=n)}function cc(n){Wr||(Wi&&(Wi=clearTimeout(Wi)),n-br>24?(n<1/0&&(Wi=setTimeout(ph,n-Ki.now()-Io)),Zi&&(Zi=clearInterval(Zi))):(Zi||(ko=Ki.now(),Zi=setInterval(Sg,lh)),Wr=1,hh(ph)))}function fc(n,e,t){var r=new Qi;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}Qi.prototype=No.prototype={constructor:Qi,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Ji():+t)+(e==null?0:+e),this._next||Xi===this||(Xi?Xi._next=this:Co=this,Xi=this),this._call=n,this._time=t,cc()},stop:function(){this._call&&(this._call=null,this._time=1/0,cc())}};var Cg=ut("start","end","cancel","interrupt"),kg=[],gh=0,lc=1,hc=2,Bo=3,vh=4,dc=5,zo=6;function $o(n,e,t,r,i,a){var o=n.__transition;if(o){if(t in o)return}else n.__transition={};(function(s,c,u){var f,d=s.__transition;function l(w){u.state=lc,u.timer.restart(g,u.delay,u.time),u.delay<=w&&g(w-u.delay)}function g(w){var b,S,A,E;if(u.state!==lc)return y();for(b in d)if((E=d[b]).name===u.name){if(E.state===Bo)return fc(g);E.state===vh?(E.state=zo,E.timer.stop(),E.on.call("interrupt",s,s.__data__,E.index,E.group),delete d[b]):+b<c&&(E.state=zo,E.timer.stop(),E.on.call("cancel",s,s.__data__,E.index,E.group),delete d[b])}if(fc(function(){u.state===Bo&&(u.state=vh,u.timer.restart(x,u.delay,u.time),x(w))}),u.state=hc,u.on.call("start",s,s.__data__,u.index,u.group),u.state===hc){for(u.state=Bo,f=new Array(A=u.tween.length),b=0,S=-1;b<A;++b)(E=u.tween[b].value.call(s,s.__data__,u.index,u.group))&&(f[++S]=E);f.length=S+1}}function x(w){for(var b=w<u.duration?u.ease.call(null,w/u.duration):(u.timer.restart(y),u.state=dc,1),S=-1,A=f.length;++S<A;)f[S].call(s,b);u.state===dc&&(u.on.call("end",s,s.__data__,u.index,u.group),y())}function y(){for(var w in u.state=zo,u.timer.stop(),delete d[c],d)return;delete s.__transition}d[c]=u,u.timer=No(l,0,u.time)})(n,t,{name:e,index:r,group:i,on:Cg,tween:kg,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:gh})}function pc(n,e){var t=et(n,e);if(t.state>gh)throw new Error("too late; already scheduled");return t}function ht(n,e){var t=et(n,e);if(t.state>Bo)throw new Error("too late; already running");return t}function et(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function xr(n,e){var t,r,i,a=n.__transition,o=!0;if(a){for(i in e=e==null?null:e+"",a)(t=a[i]).name===e?(r=t.state>hc&&t.state<dc,t.state=zo,t.timer.stop(),t.on.call(r?"interrupt":"cancel",n,n.__data__,t.index,t.group),delete a[i]):o=!1;o&&delete n.__transition}}function Ig(n,e){var t,r;return function(){var i=ht(this,n),a=i.tween;if(a!==t){for(var o=0,s=(r=t=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}}i.tween=r}}function Ng(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var a=ht(this,n),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:t},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=s;break}c===u&&i.push(s)}a.tween=i}}function gc(n,e,t){var r=n._id;return n.each(function(){var i=ht(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return et(i,r).value[e]}}function mh(n,e){var t;return(typeof e=="number"?Fe:e instanceof Xt?Gi:(t=Xt(e))?(e=t,Gi):sc)(n,e)}function Bg(n){return function(){this.removeAttribute(n)}}function zg(n){return function(){this.removeAttributeNS(n.space,n.local)}}function $g(n,e,t){var r,i,a=t+"";return function(){var o=this.getAttribute(n);return o===a?null:o===r?i:i=e(r=o,t)}}function Pg(n,e,t){var r,i,a=t+"";return function(){var o=this.getAttributeNS(n.space,n.local);return o===a?null:o===r?i:i=e(r=o,t)}}function Og(n,e,t){var r,i,a;return function(){var o,s,c=t(this);if(c!=null)return(o=this.getAttribute(n))===(s=c+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,c));this.removeAttribute(n)}}function Vg(n,e,t){var r,i,a;return function(){var o,s,c=t(this);if(c!=null)return(o=this.getAttributeNS(n.space,n.local))===(s=c+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,c));this.removeAttributeNS(n.space,n.local)}}function Rg(n,e){var t,r;function i(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&function(o,s){return function(c){this.setAttributeNS(o.space,o.local,s.call(this,c))}}(n,a)),t}return i._value=e,i}function Dg(n,e){var t,r;function i(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&function(o,s){return function(c){this.setAttribute(o,s.call(this,c))}}(n,a)),t}return i._value=e,i}function jg(n,e){return function(){pc(this,n).delay=+e.apply(this,arguments)}}function Lg(n,e){return e=+e,function(){pc(this,n).delay=e}}function qg(n,e){return function(){ht(this,n).duration=+e.apply(this,arguments)}}function Fg(n,e){return e=+e,function(){ht(this,n).duration=e}}var Ug=D.prototype.constructor;function yh(n){return function(){this.style.removeProperty(n)}}var Yg=0;function dt(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function _h(n){return D().transition(n)}function bh(){return++Yg}var It=D.prototype;dt.prototype=_h.prototype={constructor:dt,select:function(n){var e=this._name,t=this._id;typeof n!="function"&&(n=kt(n));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,c,u=r[o],f=u.length,d=a[o]=new Array(f),l=0;l<f;++l)(s=u[l])&&(c=n.call(s,s.__data__,l,u))&&("__data__"in s&&(c.__data__=s.__data__),d[l]=c,$o(d[l],e,t,l,d,et(s,t)));return new dt(a,this._parents,e,t)},selectAll:function(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Vi(n));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c,u=r[s],f=u.length,d=0;d<f;++d)if(c=u[d]){for(var l,g=n.call(c,c.__data__,d,u),x=et(c,t),y=0,w=g.length;y<w;++y)(l=g[y])&&$o(l,e,t,y,g,x);a.push(g),o.push(c)}return new dt(a,o,e,t)},selectChild:It.selectChild,selectChildren:It.selectChildren,filter:function(n){typeof n!="function"&&(n=jn(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var a,o=e[i],s=o.length,c=r[i]=[],u=0;u<s;++u)(a=o[u])&&n.call(a,a.__data__,u,o)&&c.push(a);return new dt(r,this._parents,this._name,this._id)},merge:function(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c,u=e[s],f=t[s],d=u.length,l=o[s]=new Array(d),g=0;g<d;++g)(c=u[g]||f[g])&&(l[g]=c);for(;s<r;++s)o[s]=e[s];return new dt(o,this._parents,this._name,this._id)},selection:function(){return new Ug(this._groups,this._parents)},transition:function(){for(var n=this._name,e=this._id,t=bh(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],c=s.length,u=0;u<c;++u)if(o=s[u]){var f=et(o,e);$o(o,n,t,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new dt(r,this._parents,n,t)},call:It.call,nodes:It.nodes,node:It.node,size:It.size,empty:It.empty,each:It.each,on:function(n,e){var t=this._id;return arguments.length<2?et(this.node(),t).on.on(n):this.each(function(r,i,a){var o,s,c=function(u){return(u+"").trim().split(/^|\s+/).every(function(f){var d=f.indexOf(".");return d>=0&&(f=f.slice(0,d)),!f||f==="start"})}(i)?pc:ht;return function(){var u=c(this,r),f=u.on;f!==o&&(s=(o=f).copy()).on(i,a),u.on=s}}(t,n,e))},attr:function(n,e){var t=vr(n),r=t==="transform"?ih:mh;return this.attrTween(n,typeof e=="function"?(t.local?Vg:Og)(t,r,gc(this,"attr."+n,e)):e==null?(t.local?zg:Bg)(t):(t.local?Pg:$g)(t,r,e))},attrTween:function(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=vr(n);return this.tween(t,(r.local?Rg:Dg)(r,e))},style:function(n,e,t){var r=(n+="")=="transform"?rh:mh;return e==null?this.styleTween(n,function(i,a){var o,s,c;return function(){var u=ct(this,i),f=(this.style.removeProperty(i),ct(this,i));return u===f?null:u===o&&f===s?c:c=a(o=u,s=f)}}(n,r)).on("end.style."+n,yh(n)):typeof e=="function"?this.styleTween(n,function(i,a,o){var s,c,u;return function(){var f=ct(this,i),d=o(this),l=d+"";return d==null&&(this.style.removeProperty(i),l=d=ct(this,i)),f===l?null:f===s&&l===c?u:(c=l,u=a(s=f,d))}}(n,r,gc(this,"style."+n,e))).each(function(i,a){var o,s,c,u,f="style."+a,d="end."+f;return function(){var l=ht(this,i),g=l.on,x=l.value[f]==null?u||(u=yh(a)):void 0;g===o&&c===x||(s=(o=g).copy()).on(d,c=x),l.on=s}}(this._id,n)):this.styleTween(n,function(i,a,o){var s,c,u=o+"";return function(){var f=ct(this,i);return f===u?null:f===s?c:c=a(s=f,o)}}(n,r,e),t).on("end.style."+n,null)},styleTween:function(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,function(i,a,o){var s,c;function u(){var f=a.apply(this,arguments);return f!==c&&(s=(c=f)&&function(d,l,g){return function(x){this.style.setProperty(d,l.call(this,x),g)}}(i,f,o)),s}return u._value=a,u}(n,e,t??""))},text:function(n){return this.tween("text",typeof n=="function"?function(e){return function(){var t=e(this);this.textContent=t??""}}(gc(this,"text",n)):function(e){return function(){this.textContent=e}}(n==null?"":n+""))},textTween:function(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,function(t){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(s){return function(c){this.textContent=s.call(this,c)}}(o)),r}return a._value=t,a}(n))},remove:function(){return this.on("end.remove",function(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}(this._id))},tween:function(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r,i=et(this.node(),t).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===n)return r.value;return null}return this.each((e==null?Ig:Ng)(t,n,e))},delay:function(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?jg:Lg)(e,n)):et(this.node(),e).delay},duration:function(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?qg:Fg)(e,n)):et(this.node(),e).duration},ease:function(n){var e=this._id;return arguments.length?this.each(function(t,r){if(typeof r!="function")throw new Error;return function(){ht(this,t).ease=r}}(e,n)):et(this.node(),e).ease},easeVarying:function(n){if(typeof n!="function")throw new Error;return this.each(function(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;ht(this,e).ease=r}}(this._id,n))},end:function(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i==0&&a()}};t.each(function(){var u=ht(this,r),f=u.on;f!==n&&((e=(n=f).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),u.on=e}),i===0&&a()})},[Symbol.iterator]:It[Symbol.iterator]};function xh(n){return((n*=2)<=1?n*n:--n*(2-n)+1)/2}function vc(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Hg=function n(e){function t(r){return Math.pow(r,e)}return e=+e,t.exponent=n,t}(3),Gg=function n(e){function t(r){return 1-Math.pow(1-r,e)}return e=+e,t.exponent=n,t}(3),wh=function n(e){function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return e=+e,t.exponent=n,t}(3),Mh=Math.PI,Eh=Mh/2;function Th(n){return(1-Math.cos(Mh*n))/2}function Zt(n){return 1.0009775171065494*(Math.pow(2,-10*n)-.0009765625)}function Ah(n){return((n*=2)<=1?Zt(1-n):2-Zt(n-1))/2}function Sh(n){return((n*=2)<=1?1-Math.sqrt(1-n*n):Math.sqrt(1-(n-=2)*n)+1)/2}var mc=4/11,Xg=6/11,Wg=8/11,Zg=3/4,Kg=9/11,Jg=10/11,Qg=15/16,nv=21/22,ev=63/64,Po=1/mc/mc;function na(n){return(n=+n)<mc?Po*n*n:n<Wg?Po*(n-=Xg)*n+Zg:n<Jg?Po*(n-=Kg)*n+Qg:Po*(n-=nv)*n+ev}var yc=1.70158,tv=function n(e){function t(r){return(r=+r)*r*(e*(r-1)+r)}return e=+e,t.overshoot=n,t}(yc),rv=function n(e){function t(r){return--r*r*((r+1)*e+r)+1}return e=+e,t.overshoot=n,t}(yc),Ch=function n(e){function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return e=+e,t.overshoot=n,t}(yc),Zr=2*Math.PI,iv=function n(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Zr);function i(a){return e*Zt(- --a)*Math.sin((r-a)/t)}return i.amplitude=function(a){return n(a,t*Zr)},i.period=function(a){return n(e,a)},i}(1,.3),kh=function n(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Zr);function i(a){return 1-e*Zt(a=+a)*Math.sin((a+r)/t)}return i.amplitude=function(a){return n(a,t*Zr)},i.period=function(a){return n(e,a)},i}(1,.3),av=function n(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Zr);function i(a){return((a=2*a-1)<0?e*Zt(-a)*Math.sin((r-a)/t):2-e*Zt(a)*Math.sin((r+a)/t))/2}return i.amplitude=function(a){return n(a,t*Zr)},i.period=function(a){return n(e,a)},i}(1,.3),ov={time:null,delay:0,duration:250,ease:vc};function sv(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}D.prototype.interrupt=function(n){return this.each(function(){xr(this,n)})},D.prototype.transition=function(n){var e,t;n instanceof dt?(e=n._id,n=n._name):(e=bh(),(t=ov).time=Ji(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],c=s.length,u=0;u<c;++u)(o=s[u])&&$o(o,n,e,u,s,t||sv(o,e));return new dt(r,this._parents,n,e)};var uv=[null],_c=n=>()=>n;function cv(n,{sourceEvent:e,target:t,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function bc(n){n.preventDefault(),n.stopImmediatePropagation()}var Ih={name:"drag"},xc={name:"space"},Kr={name:"handle"},Jr={name:"center"};const{abs:Nh,max:he,min:de}=Math;function Bh(n){return[+n[0],+n[1]]}function wc(n){return[Bh(n[0]),Bh(n[1])]}var Oo={name:"x",handles:["w","e"].map(ea),input:function(n,e){return n==null?null:[[+n[0],e[0][1]],[+n[1],e[1][1]]]},output:function(n){return n&&[n[0][0],n[1][0]]}},Vo={name:"y",handles:["n","s"].map(ea),input:function(n,e){return n==null?null:[[e[0][0],+n[0]],[e[1][0],+n[1]]]},output:function(n){return n&&[n[0][1],n[1][1]]}},fv={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ea),input:function(n){return n==null?null:wc(n)},output:function(n){return n}},Nt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},zh={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},$h={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},lv={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},hv={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ea(n){return{type:n}}function dv(n){return!n.ctrlKey&&!n.button}function pv(){var n=this.ownerSVGElement||this;return n.hasAttribute("viewBox")?[[(n=n.viewBox.baseVal).x,n.y],[n.x+n.width,n.y+n.height]]:[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]}function gv(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mc(n){for(;!n.__brush;)if(!(n=n.parentNode))return;return n.__brush}function Ec(n){var e,t=pv,r=dv,i=gv,a=!0,o=ut("start","brush","end"),s=6;function c(w){var b=w.property("__brush",y).selectAll(".overlay").data([ea("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Nt.overlay).merge(b).each(function(){var A=Mc(this).extent;q(this).attr("x",A[0][0]).attr("y",A[0][1]).attr("width",A[1][0]-A[0][0]).attr("height",A[1][1]-A[0][1])}),w.selectAll(".selection").data([ea("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Nt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=w.selectAll(".handle").data(n.handles,function(A){return A.type});S.exit().remove(),S.enter().append("rect").attr("class",function(A){return"handle handle--"+A.type}).attr("cursor",function(A){return Nt[A.type]}),w.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",l).filter(i).on("touchstart.brush",l).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var w=q(this),b=Mc(this).selection;b?(w.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),w.selectAll(".handle").style("display",null).attr("x",function(S){return S.type[S.type.length-1]==="e"?b[1][0]-s/2:b[0][0]-s/2}).attr("y",function(S){return S.type[0]==="s"?b[1][1]-s/2:b[0][1]-s/2}).attr("width",function(S){return S.type==="n"||S.type==="s"?b[1][0]-b[0][0]+s:s}).attr("height",function(S){return S.type==="e"||S.type==="w"?b[1][1]-b[0][1]+s:s})):w.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(w,b,S){var A=w.__brush.emitter;return!A||S&&A.clean?new d(w,b,S):A}function d(w,b,S){this.that=w,this.args=b,this.state=w.__brush,this.active=0,this.clean=S}function l(w){if((!e||w.touches)&&r.apply(this,arguments)){var b,S,A,E,I,N,F,W,U,O,V,j=this,Z=w.target.__data__.type,B=(a&&w.metaKey?Z="overlay":Z)==="selection"?Ih:a&&w.altKey?Jr:Kr,L=n===Vo?null:lv[Z],X=n===Oo?null:hv[Z],K=Mc(j),Q=K.extent,rn=K.selection,sn=Q[0][0],an=Q[0][1],hn=Q[1][0],En=Q[1][1],vn=0,_n=0,Ln=L&&X&&a&&w.shiftKey,Tn=Array.from(w.touches||[w],Sn=>{const Dn=Sn.identifier;return(Sn=J(Sn,j)).point0=Sn.slice(),Sn.identifier=Dn,Sn});xr(j);var Kn=f(j,arguments,!0).beforestart();if(Z==="overlay"){rn&&(U=!0);const Sn=[Tn[0],Tn[1]||Tn[0]];K.selection=rn=[[b=n===Vo?sn:de(Sn[0][0],Sn[1][0]),A=n===Oo?an:de(Sn[0][1],Sn[1][1])],[I=n===Vo?hn:he(Sn[0][0],Sn[1][0]),F=n===Oo?En:he(Sn[0][1],Sn[1][1])]],Tn.length>1&&ot(w)}else b=rn[0][0],A=rn[0][1],I=rn[1][0],F=rn[1][1];S=b,E=A,N=I,W=F;var Oe=q(j).attr("pointer-events","none"),at=Oe.selectAll(".overlay").attr("cursor",Nt[Z]);if(w.touches)Kn.moved=xt,Kn.ended=su;else{var jt=q(w.view).on("mousemove.brush",xt,!0).on("mouseup.brush",su,!0);a&&jt.on("keydown.brush",function(Sn){switch(Sn.keyCode){case 16:Ln=L&&X;break;case 18:B===Kr&&(L&&(I=N-vn*L,b=S+vn*L),X&&(F=W-_n*X,A=E+_n*X),B=Jr,ot(Sn));break;case 32:B!==Kr&&B!==Jr||(L<0?I=N-vn:L>0&&(b=S-vn),X<0?F=W-_n:X>0&&(A=E-_n),B=xc,at.attr("cursor",Nt.selection),ot(Sn));break;default:return}bc(Sn)},!0).on("keyup.brush",function(Sn){switch(Sn.keyCode){case 16:Ln&&(O=V=Ln=!1,ot(Sn));break;case 18:B===Jr&&(L<0?I=N:L>0&&(b=S),X<0?F=W:X>0&&(A=E),B=Kr,ot(Sn));break;case 32:B===xc&&(Sn.altKey?(L&&(I=N-vn*L,b=S+vn*L),X&&(F=W-_n*X,A=E+_n*X),B=Jr):(L<0?I=N:L>0&&(b=S),X<0?F=W:X>0&&(A=E),B=Kr),at.attr("cursor",Nt[Z]),ot(Sn));break;default:return}bc(Sn)},!0),dn(w.view)}u.call(j),Kn.start(w,B.name)}function xt(Sn){for(const Dn of Sn.changedTouches||[Sn])for(const or of Tn)or.identifier===Dn.identifier&&(or.cur=J(Dn,j));if(Ln&&!O&&!V&&Tn.length===1){const Dn=Tn[0];Nh(Dn.cur[0]-Dn[0])>Nh(Dn.cur[1]-Dn[1])?V=!0:O=!0}for(const Dn of Tn)Dn.cur&&(Dn[0]=Dn.cur[0],Dn[1]=Dn.cur[1]);U=!0,bc(Sn),ot(Sn)}function ot(Sn){const Dn=Tn[0],or=Dn.point0;var wt;switch(vn=Dn[0]-or[0],_n=Dn[1]-or[1],B){case xc:case Ih:L&&(vn=he(sn-b,de(hn-I,vn)),S=b+vn,N=I+vn),X&&(_n=he(an-A,de(En-F,_n)),E=A+_n,W=F+_n);break;case Kr:Tn[1]?(L&&(S=he(sn,de(hn,Tn[0][0])),N=he(sn,de(hn,Tn[1][0])),L=1),X&&(E=he(an,de(En,Tn[0][1])),W=he(an,de(En,Tn[1][1])),X=1)):(L<0?(vn=he(sn-b,de(hn-b,vn)),S=b+vn,N=I):L>0&&(vn=he(sn-I,de(hn-I,vn)),S=b,N=I+vn),X<0?(_n=he(an-A,de(En-A,_n)),E=A+_n,W=F):X>0&&(_n=he(an-F,de(En-F,_n)),E=A,W=F+_n));break;case Jr:L&&(S=he(sn,de(hn,b-vn*L)),N=he(sn,de(hn,I+vn*L))),X&&(E=he(an,de(En,A-_n*X)),W=he(an,de(En,F+_n*X)))}N<S&&(L*=-1,wt=b,b=I,I=wt,wt=S,S=N,N=wt,Z in zh&&at.attr("cursor",Nt[Z=zh[Z]])),W<E&&(X*=-1,wt=A,A=F,F=wt,wt=E,E=W,W=wt,Z in $h&&at.attr("cursor",Nt[Z=$h[Z]])),K.selection&&(rn=K.selection),O&&(S=rn[0][0],N=rn[1][0]),V&&(E=rn[0][1],W=rn[1][1]),rn[0][0]===S&&rn[0][1]===E&&rn[1][0]===N&&rn[1][1]===W||(K.selection=[[S,E],[N,W]],u.call(j),Kn.brush(Sn,B.name))}function su(Sn){if(function(Dn){Dn.stopImmediatePropagation()}(Sn),Sn.touches){if(Sn.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500)}else Rn(Sn.view,U),jt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Oe.attr("pointer-events","all"),at.attr("cursor",Nt.overlay),K.selection&&(rn=K.selection),function(Dn){return Dn[0][0]===Dn[1][0]||Dn[0][1]===Dn[1][1]}(rn)&&(K.selection=null,u.call(j)),Kn.end(Sn,B.name)}}function g(w){f(this,arguments).moved(w)}function x(w){f(this,arguments).ended(w)}function y(){var w=this.__brush||{selection:null};return w.extent=wc(t.apply(this,arguments)),w.dim=n,w}return c.move=function(w,b,S){w.tween?w.on("start.brush",function(A){f(this,arguments).beforestart().start(A)}).on("interrupt.brush end.brush",function(A){f(this,arguments).end(A)}).tween("brush",function(){var A=this,E=A.__brush,I=f(A,arguments),N=E.selection,F=n.input(typeof b=="function"?b.apply(this,arguments):b,E.extent),W=Wt(N,F);function U(O){E.selection=O===1&&F===null?null:W(O),u.call(A),I.brush()}return N!==null&&F!==null?U:U(1)}):w.each(function(){var A=this,E=arguments,I=A.__brush,N=n.input(typeof b=="function"?b.apply(A,E):b,I.extent),F=f(A,E).beforestart();xr(A),I.selection=N===null?null:N,u.call(A),F.start(S).brush(S).end(S)})},c.clear=function(w,b){c.move(w,null,b)},d.prototype={beforestart:function(){return++this.active==1&&(this.state.emitter=this,this.starting=!0),this},start:function(w,b){return this.starting?(this.starting=!1,this.emit("start",w,b)):this.emit("brush",w),this},brush:function(w,b){return this.emit("brush",w,b),this},end:function(w,b){return--this.active==0&&(delete this.state.emitter,this.emit("end",w,b)),this},emit:function(w,b,S){var A=q(this.that).datum();o.call(w,this.that,new cv(w,{sourceEvent:b,target:c,selection:n.output(this.state.selection),mode:S,dispatch:o}),A)}},c.extent=function(w){return arguments.length?(t=typeof w=="function"?w:_c(wc(w)),c):t},c.filter=function(w){return arguments.length?(r=typeof w=="function"?w:_c(!!w),c):r},c.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:_c(!!w),c):i},c.handleSize=function(w){return arguments.length?(s=+w,c):s},c.keyModifiers=function(w){return arguments.length?(a=!!w,c):a},c.on=function(){var w=o.on.apply(o,arguments);return w===o?c:w},c}var Ph=Math.abs,Qr=Math.cos,ni=Math.sin,Oh=Math.PI,Ro=Oh/2,Vh=2*Oh,Rh=Math.max,Tc=1e-12;function Ac(n,e){return Array.from({length:e-n},(t,r)=>n+r)}function Sc(n,e){var t=0,r=null,i=null,a=null;function o(s){var c,u=s.length,f=new Array(u),d=Ac(0,u),l=new Array(u*u),g=new Array(u),x=0;s=Float64Array.from({length:u*u},e?(y,w)=>s[w%u][w/u|0]:(y,w)=>s[w/u|0][w%u]);for(let y=0;y<u;++y){let w=0;for(let b=0;b<u;++b)w+=s[y*u+b]+n*s[b*u+y];x+=f[y]=w}c=(x=Rh(0,Vh-t*u)/x)?t:Vh/u;{let y=0;r&&d.sort((w,b)=>r(f[w],f[b]));for(const w of d){const b=y;if(n){const S=Ac(1+~u,u).filter(A=>A<0?s[~A*u+w]:s[w*u+A]);i&&S.sort((A,E)=>i(A<0?-s[~A*u+w]:s[w*u+A],E<0?-s[~E*u+w]:s[w*u+E]));for(const A of S)A<0?(l[~A*u+w]||(l[~A*u+w]={source:null,target:null})).target={index:w,startAngle:y,endAngle:y+=s[~A*u+w]*x,value:s[~A*u+w]}:(l[w*u+A]||(l[w*u+A]={source:null,target:null})).source={index:w,startAngle:y,endAngle:y+=s[w*u+A]*x,value:s[w*u+A]};g[w]={index:w,startAngle:b,endAngle:y,value:f[w]}}else{const S=Ac(0,u).filter(A=>s[w*u+A]||s[A*u+w]);i&&S.sort((A,E)=>i(s[w*u+A],s[w*u+E]));for(const A of S){let E;if(w<A?(E=l[w*u+A]||(l[w*u+A]={source:null,target:null}),E.source={index:w,startAngle:y,endAngle:y+=s[w*u+A]*x,value:s[w*u+A]}):(E=l[A*u+w]||(l[A*u+w]={source:null,target:null}),E.target={index:w,startAngle:y,endAngle:y+=s[w*u+A]*x,value:s[w*u+A]},w===A&&(E.source=E.target)),E.source&&E.target&&E.source.value<E.target.value){const I=E.source;E.source=E.target,E.target=I}}g[w]={index:w,startAngle:b,endAngle:y,value:f[w]}}y+=c}}return(l=Object.values(l)).groups=g,a?l.sort(a):l}return o.padAngle=function(s){return arguments.length?(t=Rh(0,s),o):t},o.sortGroups=function(s){return arguments.length?(r=s,o):r},o.sortSubgroups=function(s){return arguments.length?(i=s,o):i},o.sortChords=function(s){return arguments.length?(s==null?a=null:(c=s,a=function(u,f){return c(u.source.value+u.target.value,f.source.value+f.target.value)})._=s,o):a&&a._;var c},o}const Cc=Math.PI,kc=2*Cc,wr=1e-6,vv=kc-wr;function Dh(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}let ta=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?Dh:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Dh;const r=10**t;return function(i){this._+=i[0];for(let a=1,o=i.length;a<o;++a)this._+=Math.round(arguments[a]*r)/r+i[a]}}(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,t,r){this._append`Q${+n},${+e},${this._x1=+t},${this._y1=+r}`}bezierCurveTo(n,e,t,r,i,a){this._append`C${+n},${+e},${+t},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(n,e,t,r,i){if(n=+n,e=+e,t=+t,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=t-n,c=r-e,u=a-n,f=o-e,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(d>wr)if(Math.abs(f*s-c*u)>wr&&i){let l=t-a,g=r-o,x=s*s+c*c,y=l*l+g*g,w=Math.sqrt(x),b=Math.sqrt(d),S=i*Math.tan((Cc-Math.acos((x+d-y)/(2*w*b)))/2),A=S/b,E=S/w;Math.abs(A-1)>wr&&this._append`L${n+A*u},${e+A*f}`,this._append`A${i},${i},0,0,${+(f*l>u*g)},${this._x1=n+E*s},${this._y1=e+E*c}`}else this._append`L${this._x1=n},${this._y1=e}`}arc(n,e,t,r,i,a){if(n=+n,e=+e,a=!!a,(t=+t)<0)throw new Error(`negative radius: ${t}`);let o=t*Math.cos(r),s=t*Math.sin(r),c=n+o,u=e+s,f=1^a,d=a?r-i:i-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>wr||Math.abs(this._y1-u)>wr)&&this._append`L${c},${u}`,t&&(d<0&&(d=d%kc+kc),d>vv?this._append`A${t},${t},0,1,${f},${n-o},${e-s}A${t},${t},0,1,${f},${this._x1=c},${this._y1=u}`:d>wr&&this._append`A${t},${t},0,${+(d>=Cc)},${f},${this._x1=n+t*Math.cos(i)},${this._y1=e+t*Math.sin(i)}`)}rect(n,e,t,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${t=+t}v${+r}h${-t}Z`}toString(){return this._}};function Ic(){return new ta}Ic.prototype=ta.prototype;var mv=Array.prototype.slice;function Mr(n){return function(){return n}}function yv(n){return n.source}function _v(n){return n.target}function jh(n){return n.radius}function bv(n){return n.startAngle}function xv(n){return n.endAngle}function wv(){return 0}function Mv(){return 10}function Lh(n){var e=yv,t=_v,r=jh,i=jh,a=bv,o=xv,s=wv,c=null;function u(){var f,d=e.apply(this,arguments),l=t.apply(this,arguments),g=s.apply(this,arguments)/2,x=mv.call(arguments),y=+r.apply(this,(x[0]=d,x)),w=a.apply(this,x)-Ro,b=o.apply(this,x)-Ro,S=+i.apply(this,(x[0]=l,x)),A=a.apply(this,x)-Ro,E=o.apply(this,x)-Ro;if(c||(c=f=Ic()),g>Tc&&(Ph(b-w)>2*g+Tc?b>w?(w+=g,b-=g):(w-=g,b+=g):w=b=(w+b)/2,Ph(E-A)>2*g+Tc?E>A?(A+=g,E-=g):(A-=g,E+=g):A=E=(A+E)/2),c.moveTo(y*Qr(w),y*ni(w)),c.arc(0,0,y,w,b),w!==A||b!==E)if(n){var I=S-+n.apply(this,arguments),N=(A+E)/2;c.quadraticCurveTo(0,0,I*Qr(A),I*ni(A)),c.lineTo(S*Qr(N),S*ni(N)),c.lineTo(I*Qr(E),I*ni(E))}else c.quadraticCurveTo(0,0,S*Qr(A),S*ni(A)),c.arc(0,0,S,A,E);if(c.quadraticCurveTo(0,0,y*Qr(w),y*ni(w)),c.closePath(),f)return c=null,f+""||null}return n&&(u.headRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Mr(+f),u):n}),u.radius=function(f){return arguments.length?(r=i=typeof f=="function"?f:Mr(+f),u):r},u.sourceRadius=function(f){return arguments.length?(r=typeof f=="function"?f:Mr(+f),u):r},u.targetRadius=function(f){return arguments.length?(i=typeof f=="function"?f:Mr(+f),u):i},u.startAngle=function(f){return arguments.length?(a=typeof f=="function"?f:Mr(+f),u):a},u.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:Mr(+f),u):o},u.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Mr(+f),u):s},u.source=function(f){return arguments.length?(e=f,u):e},u.target=function(f){return arguments.length?(t=f,u):t},u.context=function(f){return arguments.length?(c=f??null,u):c},u}var qh=Array.prototype.slice;function Ev(n,e){return n-e}var Kt=n=>()=>n;function Tv(n,e){for(var t,r=-1,i=e.length;++r<i;)if(t=Av(n,e[r]))return t;return 0}function Av(n,e){for(var t=e[0],r=e[1],i=-1,a=0,o=n.length,s=o-1;a<o;s=a++){var c=n[a],u=c[0],f=c[1],d=n[s],l=d[0],g=d[1];if(Sv(c,d,e))return 0;f>r!=g>r&&t<(l-u)*(r-f)/(g-f)+u&&(i=-i)}return i}function Sv(n,e,t){var r,i,a,o;return function(s,c,u){return(c[0]-s[0])*(u[1]-s[1])==(u[0]-s[0])*(c[1]-s[1])}(n,e,t)&&(i=n[r=+(n[0]===e[0])],a=t[r],o=e[r],i<=a&&a<=o||o<=a&&a<=i)}function Cv(){}var Bt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Nc(){var n=1,e=1,t=ki,r=s;function i(c){var u=t(c);if(Array.isArray(u))u=u.slice().sort(Ev);else{const f=Et(c,kv);for(u=St(...Ci(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>a(c,f))}function a(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var d=[],l=[];return function(g,x,y){var w,b,S,A,E,I,N=new Array,F=new Array;for(w=b=-1,A=Er(g[0],x),Bt[A<<1].forEach(W);++w<n-1;)S=A,A=Er(g[w+1],x),Bt[S|A<<1].forEach(W);for(Bt[A<<0].forEach(W);++b<e-1;){for(w=-1,A=Er(g[b*n+n],x),E=Er(g[b*n],x),Bt[A<<1|E<<2].forEach(W);++w<n-1;)S=A,A=Er(g[b*n+n+w+1],x),I=E,E=Er(g[b*n+w+1],x),Bt[S|A<<1|E<<2|I<<3].forEach(W);Bt[A|E<<3].forEach(W)}for(w=-1,E=g[b*n]>=x,Bt[E<<2].forEach(W);++w<n-1;)I=E,E=Er(g[b*n+w+1],x),Bt[E<<2|I<<3].forEach(W);function W(U){var O,V,j=[U[0][0]+w,U[0][1]+b],Z=[U[1][0]+w,U[1][1]+b],B=o(j),L=o(Z);(O=F[B])?(V=N[L])?(delete F[O.end],delete N[V.start],O===V?(O.ring.push(Z),y(O.ring)):N[O.start]=F[V.end]={start:O.start,end:V.end,ring:O.ring.concat(V.ring)}):(delete F[O.end],O.ring.push(Z),F[O.end=L]=O):(O=N[L])?(V=F[B])?(delete N[O.start],delete F[V.end],O===V?(O.ring.push(Z),y(O.ring)):N[V.start]=F[O.end]={start:V.start,end:O.end,ring:V.ring.concat(O.ring)}):(delete N[O.start],O.ring.unshift(j),N[O.start=B]=O):N[B]=F[L]={start:B,end:L,ring:[j,Z]}}Bt[E<<3].forEach(W)}(c,f,function(g){r(g,c,f),function(x){for(var y=0,w=x.length,b=x[w-1][1]*x[0][0]-x[w-1][0]*x[0][1];++y<w;)b+=x[y-1][1]*x[y][0]-x[y-1][0]*x[y][1];return b}(g)>0?d.push([g]):l.push(g)}),l.forEach(function(g){for(var x,y=0,w=d.length;y<w;++y)if(Tv((x=d[y])[0],g)!==-1)return void x.push(g)}),{type:"MultiPolygon",value:u,coordinates:d}}function o(c){return 2*c[0]+c[1]*(n+1)*4}function s(c,u,f){c.forEach(function(d){var l=d[0],g=d[1],x=0|l,y=0|g,w=Bc(u[y*n+x]);l>0&&l<n&&x===l&&(d[0]=Fh(l,Bc(u[y*n+x-1]),w,f)),g>0&&g<e&&y===g&&(d[1]=Fh(g,Bc(u[(y-1)*n+x]),w,f))})}return i.contour=a,i.size=function(c){if(!arguments.length)return[n,e];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return n=u,e=f,i},i.thresholds=function(c){return arguments.length?(t=typeof c=="function"?c:Array.isArray(c)?Kt(qh.call(c)):Kt(c),i):t},i.smooth=function(c){return arguments.length?(r=c?s:Cv,i):r===s},i}function kv(n){return isFinite(n)?n:NaN}function Er(n,e){return n!=null&&+n>=e}function Bc(n){return n==null||isNaN(n=+n)?-1/0:n}function Fh(n,e,t,r){const i=r-e,a=t-e,o=isFinite(i)||isFinite(a)?i/a:Math.sign(i)/Math.sign(a);return isNaN(o)?n:n+o-.5}function Iv(n){return n[0]}function Nv(n){return n[1]}function Bv(){return 1}const pe=134217729,zv=33306690738754706e-32;function zc(n,e,t,r,i){let a,o,s,c,u=e[0],f=r[0],d=0,l=0;f>u==f>-u?(a=u,u=e[++d]):(a=f,f=r[++l]);let g=0;if(d<n&&l<t)for(f>u==f>-u?(o=u+a,s=a-(o-u),u=e[++d]):(o=f+a,s=a-(o-f),f=r[++l]),a=o,s!==0&&(i[g++]=s);d<n&&l<t;)f>u==f>-u?(o=a+u,c=o-a,s=a-(o-c)+(u-c),u=e[++d]):(o=a+f,c=o-a,s=a-(o-c)+(f-c),f=r[++l]),a=o,s!==0&&(i[g++]=s);for(;d<n;)o=a+u,c=o-a,s=a-(o-c)+(u-c),u=e[++d],a=o,s!==0&&(i[g++]=s);for(;l<t;)o=a+f,c=o-a,s=a-(o-c)+(f-c),f=r[++l],a=o,s!==0&&(i[g++]=s);return a===0&&g!==0||(i[g++]=a),g}function ra(n){return new Float64Array(n)}const $v=22204460492503146e-32,Pv=11093356479670487e-47,ei=ra(4),Uh=ra(8),Yh=ra(12),Hh=ra(16),me=ra(4);function Do(n,e,t,r,i,a){const o=(e-a)*(t-i),s=(n-i)*(r-a),c=o-s;if(o===0||s===0||o>0!=s>0)return c;const u=Math.abs(o+s);return Math.abs(c)>=33306690738754716e-32*u?c:-function(f,d,l,g,x,y,w){let b,S,A,E,I,N,F,W,U,O,V,j,Z,B,L,X,K,Q;const rn=f-x,sn=l-x,an=d-y,hn=g-y;B=rn*hn,N=pe*rn,F=N-(N-rn),W=rn-F,N=pe*hn,U=N-(N-hn),O=hn-U,L=W*O-(B-F*U-W*U-F*O),X=an*sn,N=pe*an,F=N-(N-an),W=an-F,N=pe*sn,U=N-(N-sn),O=sn-U,K=W*O-(X-F*U-W*U-F*O),V=L-K,I=L-V,ei[0]=L-(V+I)+(I-K),j=B+V,I=j-B,Z=B-(j-I)+(V-I),V=Z-X,I=Z-V,ei[1]=Z-(V+I)+(I-X),Q=j+V,I=Q-j,ei[2]=j-(Q-I)+(V-I),ei[3]=Q;let En=function(Kn,Oe){let at=Oe[0];for(let jt=1;jt<Kn;jt++)at+=Oe[jt];return at}(4,ei),vn=$v*w;if(En>=vn||-En>=vn||(I=f-rn,b=f-(rn+I)+(I-x),I=l-sn,A=l-(sn+I)+(I-x),I=d-an,S=d-(an+I)+(I-y),I=g-hn,E=g-(hn+I)+(I-y),b===0&&S===0&&A===0&&E===0)||(vn=Pv*w+zv*Math.abs(En),En+=rn*E+hn*b-(an*A+sn*S),En>=vn||-En>=vn))return En;B=b*hn,N=pe*b,F=N-(N-b),W=b-F,N=pe*hn,U=N-(N-hn),O=hn-U,L=W*O-(B-F*U-W*U-F*O),X=S*sn,N=pe*S,F=N-(N-S),W=S-F,N=pe*sn,U=N-(N-sn),O=sn-U,K=W*O-(X-F*U-W*U-F*O),V=L-K,I=L-V,me[0]=L-(V+I)+(I-K),j=B+V,I=j-B,Z=B-(j-I)+(V-I),V=Z-X,I=Z-V,me[1]=Z-(V+I)+(I-X),Q=j+V,I=Q-j,me[2]=j-(Q-I)+(V-I),me[3]=Q;const _n=zc(4,ei,4,me,Uh);B=rn*E,N=pe*rn,F=N-(N-rn),W=rn-F,N=pe*E,U=N-(N-E),O=E-U,L=W*O-(B-F*U-W*U-F*O),X=an*A,N=pe*an,F=N-(N-an),W=an-F,N=pe*A,U=N-(N-A),O=A-U,K=W*O-(X-F*U-W*U-F*O),V=L-K,I=L-V,me[0]=L-(V+I)+(I-K),j=B+V,I=j-B,Z=B-(j-I)+(V-I),V=Z-X,I=Z-V,me[1]=Z-(V+I)+(I-X),Q=j+V,I=Q-j,me[2]=j-(Q-I)+(V-I),me[3]=Q;const Ln=zc(_n,Uh,4,me,Yh);B=b*E,N=pe*b,F=N-(N-b),W=b-F,N=pe*E,U=N-(N-E),O=E-U,L=W*O-(B-F*U-W*U-F*O),X=S*A,N=pe*S,F=N-(N-S),W=S-F,N=pe*A,U=N-(N-A),O=A-U,K=W*O-(X-F*U-W*U-F*O),V=L-K,I=L-V,me[0]=L-(V+I)+(I-K),j=B+V,I=j-B,Z=B-(j-I)+(V-I),V=Z-X,I=Z-V,me[1]=Z-(V+I)+(I-X),Q=j+V,I=Q-j,me[2]=j-(Q-I)+(V-I),me[3]=Q;const Tn=zc(Ln,Yh,4,me,Hh);return Hh[Tn-1]}(n,e,t,r,i,a,u)}const Gh=Math.pow(2,-52),jo=new Uint32Array(512);class Lo{static from(e,t=Rv,r=Dv){const i=e.length,a=new Float64Array(2*i);for(let o=0;o<i;o++){const s=e[o];a[2*o]=t(s),a[2*o+1]=r(s)}return new Lo(a)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:r,_hullTri:i,_hullHash:a}=this,o=e.length>>1;let s=1/0,c=1/0,u=-1/0,f=-1/0;for(let O=0;O<o;O++){const V=e[2*O],j=e[2*O+1];V<s&&(s=V),j<c&&(c=j),V>u&&(u=V),j>f&&(f=j),this._ids[O]=O}const d=(s+u)/2,l=(c+f)/2;let g,x,y,w=1/0;for(let O=0;O<o;O++){const V=$c(d,l,e[2*O],e[2*O+1]);V<w&&(g=O,w=V)}const b=e[2*g],S=e[2*g+1];w=1/0;for(let O=0;O<o;O++){if(O===g)continue;const V=$c(b,S,e[2*O],e[2*O+1]);V<w&&V>0&&(x=O,w=V)}let A=e[2*x],E=e[2*x+1],I=1/0;for(let O=0;O<o;O++){if(O===g||O===x)continue;const V=Vv(b,S,A,E,e[2*O],e[2*O+1]);V<I&&(y=O,I=V)}let N=e[2*y],F=e[2*y+1];if(I===1/0){for(let j=0;j<o;j++)this._dists[j]=e[2*j]-e[0]||e[2*j+1]-e[1];ti(this._ids,this._dists,0,o-1);const O=new Uint32Array(o);let V=0;for(let j=0,Z=-1/0;j<o;j++){const B=this._ids[j];this._dists[B]>Z&&(O[V++]=B,Z=this._dists[B])}return this.hull=O.subarray(0,V),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Do(b,S,A,E,N,F)<0){const O=x,V=A,j=E;x=y,A=N,E=F,y=O,N=V,F=j}const W=function(O,V,j,Z,B,L){const X=j-O,K=Z-V,Q=B-O,rn=L-V,sn=X*X+K*K,an=Q*Q+rn*rn,hn=.5/(X*rn-K*Q),En=O+(rn*sn-K*an)*hn,vn=V+(X*an-Q*sn)*hn;return{x:En,y:vn}}(b,S,A,E,N,F);this._cx=W.x,this._cy=W.y;for(let O=0;O<o;O++)this._dists[O]=$c(e[2*O],e[2*O+1],W.x,W.y);ti(this._ids,this._dists,0,o-1),this._hullStart=g;let U=3;r[g]=t[y]=x,r[x]=t[g]=y,r[y]=t[x]=g,i[g]=0,i[x]=1,i[y]=2,a.fill(-1),a[this._hashKey(b,S)]=g,a[this._hashKey(A,E)]=x,a[this._hashKey(N,F)]=y,this.trianglesLen=0,this._addTriangle(g,x,y,-1,-1,-1);for(let O,V,j=0;j<this._ids.length;j++){const Z=this._ids[j],B=e[2*Z],L=e[2*Z+1];if(j>0&&Math.abs(B-O)<=Gh&&Math.abs(L-V)<=Gh||(O=B,V=L,Z===g||Z===x||Z===y))continue;let X=0;for(let an=0,hn=this._hashKey(B,L);an<this._hashSize&&(X=a[(hn+an)%this._hashSize],X===-1||X===r[X]);an++);X=t[X];let K,Q=X;for(;K=r[Q],Do(B,L,e[2*Q],e[2*Q+1],e[2*K],e[2*K+1])>=0;)if(Q=K,Q===X){Q=-1;break}if(Q===-1)continue;let rn=this._addTriangle(Q,Z,r[Q],-1,-1,i[Q]);i[Z]=this._legalize(rn+2),i[Q]=rn,U++;let sn=r[Q];for(;K=r[sn],Do(B,L,e[2*sn],e[2*sn+1],e[2*K],e[2*K+1])<0;)rn=this._addTriangle(sn,Z,K,i[Z],-1,i[sn]),i[Z]=this._legalize(rn+2),r[sn]=sn,U--,sn=K;if(Q===X)for(;K=t[Q],Do(B,L,e[2*K],e[2*K+1],e[2*Q],e[2*Q+1])<0;)rn=this._addTriangle(K,Z,Q,-1,i[Q],i[K]),this._legalize(rn+2),i[K]=rn,r[Q]=Q,U--,Q=K;this._hullStart=t[Z]=Q,r[Q]=t[sn]=Z,r[Z]=sn,a[this._hashKey(B,L)]=Z,a[this._hashKey(e[2*Q],e[2*Q+1])]=Q}this.hull=new Uint32Array(U);for(let O=0,V=this._hullStart;O<U;O++)this.hull[O]=V,V=r[V];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(r,i){const a=r/(Math.abs(r)+Math.abs(i));return(i>0?3-a:1+a)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:r,coords:i}=this;let a=0,o=0;for(;;){const s=r[e],c=e-e%3;if(o=c+(e+2)%3,s===-1){if(a===0)break;e=jo[--a];continue}const u=s-s%3,f=c+(e+1)%3,d=u+(s+2)%3,l=t[o],g=t[e],x=t[f],y=t[d];if(Ov(i[2*l],i[2*l+1],i[2*g],i[2*g+1],i[2*x],i[2*x+1],i[2*y],i[2*y+1])){t[e]=y,t[s]=l;const w=r[d];if(w===-1){let S=this._hullStart;do{if(this._hullTri[S]===d){this._hullTri[S]=e;break}S=this._hullPrev[S]}while(S!==this._hullStart)}this._link(e,w),this._link(s,r[o]),this._link(o,d);const b=u+(s+1)%3;a<jo.length&&(jo[a++]=b)}else{if(a===0)break;e=jo[--a]}}return o}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,r,i,a,o){const s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=t,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,a),this._link(s+2,o),this.trianglesLen+=3,s}}function $c(n,e,t,r){const i=n-t,a=e-r;return i*i+a*a}function Ov(n,e,t,r,i,a,o,s){const c=n-o,u=e-s,f=t-o,d=r-s,l=i-o,g=a-s,x=f*f+d*d,y=l*l+g*g;return c*(d*y-x*g)-u*(f*y-x*l)+(c*c+u*u)*(f*g-d*l)<0}function Vv(n,e,t,r,i,a){const o=t-n,s=r-e,c=i-n,u=a-e,f=o*o+s*s,d=c*c+u*u,l=.5/(o*u-s*c),g=(u*f-s*d)*l,x=(o*d-c*f)*l;return g*g+x*x}function ti(n,e,t,r){if(r-t<=20)for(let i=t+1;i<=r;i++){const a=n[i],o=e[a];let s=i-1;for(;s>=t&&e[n[s]]>o;)n[s+1]=n[s--];n[s+1]=a}else{let i=t+1,a=r;ia(n,t+r>>1,i),e[n[t]]>e[n[r]]&&ia(n,t,r),e[n[i]]>e[n[r]]&&ia(n,i,r),e[n[t]]>e[n[i]]&&ia(n,t,i);const o=n[i],s=e[o];for(;;){do i++;while(e[n[i]]<s);do a--;while(e[n[a]]>s);if(a<i)break;ia(n,i,a)}n[t+1]=n[a],n[a]=o,r-i+1>=a-t?(ti(n,e,i,r),ti(n,e,t,a-1)):(ti(n,e,t,a-1),ti(n,e,i,r))}}function ia(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function Rv(n){return n[0]}function Dv(n){return n[1]}const Xh=1e-6;class Tr{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,r){const i=(e=+e)+(r=+r),a=t=+t;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>Xh||Math.abs(this._y1-a)>Xh)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${e-r},${t}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,t,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Pc{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class Wh{constructor(e,[t,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(t=+t)&&(a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=i,this.xmin=t,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:r},vectors:i}=this;let a,o;const s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let y,w,b=0,S=0,A=r.length;b<A;b+=3,S+=2){const E=2*r[b],I=2*r[b+1],N=2*r[b+2],F=e[E],W=e[E+1],U=e[I],O=e[I+1],V=e[N],j=e[N+1],Z=U-F,B=O-W,L=V-F,X=j-W,K=2*(Z*X-B*L);if(Math.abs(K)<1e-9){if(a===void 0){a=o=0;for(const rn of t)a+=e[2*rn],o+=e[2*rn+1];a/=t.length,o/=t.length}const Q=1e9*Math.sign((a-F)*X-(o-W)*L);y=(F+V)/2-Q*X,w=(W+j)/2+Q*L}else{const Q=1/K,rn=Z*Z+B*B,sn=L*L+X*X;y=F+(X*rn-B*sn)*Q,w=W+(Z*sn-L*rn)*Q}s[S]=y,s[S+1]=w}let c,u,f,d=t[t.length-1],l=4*d,g=e[2*d],x=e[2*d+1];i.fill(0);for(let y=0;y<t.length;++y)d=t[y],c=l,u=g,f=x,l=4*d,g=e[2*d],x=e[2*d+1],i[c+2]=i[l]=f-x,i[c+3]=i[l+1]=g-u}render(e){const t=e==null?e=new Tr:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:o,vectors:s}=this;if(a.length<=1)return null;for(let f=0,d=r.length;f<d;++f){const l=r[f];if(l<f)continue;const g=2*Math.floor(f/3),x=2*Math.floor(l/3),y=o[g],w=o[g+1],b=o[x],S=o[x+1];this._renderSegment(y,w,b,S,e)}let c,u=a[a.length-1];for(let f=0;f<a.length;++f){c=u,u=a[f];const d=2*Math.floor(i[u]/3),l=o[d],g=o[d+1],x=4*c,y=this._project(l,g,s[x+2],s[x+3]);y&&this._renderSegment(l,g,y[0],y[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new Tr:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const r=t==null?t=new Tr:void 0,i=this._clip(e);if(i===null||!i.length)return;t.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let o=2;o<a;o+=2)i[o]===i[o-2]&&i[o+1]===i[o-1]||t.lineTo(i[o],i[o+1]);return t.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,r=e.length/2;t<r;++t){const i=this.cellPolygon(t);i&&(i.index=t,yield i)}}cellPolygon(e){const t=new Pc;return this.renderCell(e,t),t.value()}_renderSegment(e,t,r,i,a){let o;const s=this._regioncode(e,t),c=this._regioncode(r,i);s===0&&c===0?(a.moveTo(e,t),a.lineTo(r,i)):(o=this._clipSegment(e,t,r,i,s,c))&&(a.moveTo(o[0],o[1]),a.lineTo(o[2],o[3]))}contains(e,t,r){return(t=+t)==t&&(r=+r)==r&&this.delaunay._step(e,t,r)===e}*neighbors(e){const t=this._clip(e);if(t)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){n:for(let a=0,o=t.length;a<o;a+=2)for(let s=0,c=i.length;s<c;s+=2)if(t[a]===i[s]&&t[a+1]===i[s+1]&&t[(a+2)%o]===i[(s+c-2)%c]&&t[(a+3)%o]===i[(s+c-1)%c]){yield r;break n}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,o=r[e];if(o===-1)return null;const s=[];let c=o;do{const u=Math.floor(c/3);if(s.push(t[2*u],t[2*u+1]),c=c%3==2?c-2:c+1,a[c]!==e)break;c=i[c]}while(c!==o&&c!==-1);return s}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:r}=this,i=4*e;return this._simplify(r[i]||r[i+1]?this._clipInfinite(e,t,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,t))}_clipFinite(e,t){const r=t.length;let i,a,o,s,c=null,u=t[r-2],f=t[r-1],d=this._regioncode(u,f),l=0;for(let g=0;g<r;g+=2)if(i=u,a=f,u=t[g],f=t[g+1],o=d,d=this._regioncode(u,f),o===0&&d===0)s=l,l=0,c?c.push(u,f):c=[u,f];else{let x,y,w,b,S;if(o===0){if((x=this._clipSegment(i,a,u,f,o,d))===null)continue;[y,w,b,S]=x}else{if((x=this._clipSegment(u,f,i,a,d,o))===null)continue;[b,S,y,w]=x,s=l,l=this._edgecode(y,w),s&&l&&this._edge(e,s,l,c,c.length),c?c.push(y,w):c=[y,w]}s=l,l=this._edgecode(b,S),s&&l&&this._edge(e,s,l,c,c.length),c?c.push(b,S):c=[b,S]}if(c)s=l,l=this._edgecode(c[0],c[1]),s&&l&&this._edge(e,s,l,c,c.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return c}_clipSegment(e,t,r,i,a,o){const s=a<o;for(s&&([e,t,r,i,a,o]=[r,i,e,t,o,a]);;){if(a===0&&o===0)return s?[r,i,e,t]:[e,t,r,i];if(a&o)return null;let c,u,f=a||o;8&f?(c=e+(r-e)*(this.ymax-t)/(i-t),u=this.ymax):4&f?(c=e+(r-e)*(this.ymin-t)/(i-t),u=this.ymin):2&f?(u=t+(i-t)*(this.xmax-e)/(r-e),c=this.xmax):(u=t+(i-t)*(this.xmin-e)/(r-e),c=this.xmin),a?(e=c,t=u,a=this._regioncode(e,t)):(r=c,i=u,o=this._regioncode(r,i))}}_clipInfinite(e,t,r,i,a,o){let s,c=Array.from(t);if((s=this._project(c[0],c[1],r,i))&&c.unshift(s[0],s[1]),(s=this._project(c[c.length-2],c[c.length-1],a,o))&&c.push(s[0],s[1]),c=this._clipFinite(e,c))for(let u,f=0,d=c.length,l=this._edgecode(c[d-2],c[d-1]);f<d;f+=2)u=l,l=this._edgecode(c[f],c[f+1]),u&&l&&(f=this._edge(e,u,l,c,f),d=c.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(c=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return c}_edge(e,t,r,i,a){for(;t!==r;){let o,s;switch(t){case 5:t=4;continue;case 4:t=6,o=this.xmax,s=this.ymin;break;case 6:t=2;continue;case 2:t=10,o=this.xmax,s=this.ymax;break;case 10:t=8;continue;case 8:t=9,o=this.xmin,s=this.ymax;break;case 9:t=1;continue;case 1:t=5,o=this.xmin,s=this.ymin}i[a]===o&&i[a+1]===s||!this.contains(e,o,s)||(i.splice(a,0,o,s),a+=2)}return a}_project(e,t,r,i){let a,o,s,c=1/0;if(i<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/i)<c&&(s=this.ymin,o=e+(c=a)*r)}else if(i>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/i)<c&&(s=this.ymax,o=e+(c=a)*r)}if(r>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/r)<c&&(o=this.xmax,s=t+(c=a)*i)}else if(r<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/r)<c&&(o=this.xmin,s=t+(c=a)*i)}return[o,s]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const r=(t+2)%e.length,i=(t+4)%e.length;(e[t]===e[r]&&e[r]===e[i]||e[t+1]===e[r+1]&&e[r+1]===e[i+1])&&(e.splice(r,2),t-=2)}e.length||(e=null)}return e}}const jv=2*Math.PI,ri=Math.pow;function Lv(n){return n[0]}function qv(n){return n[1]}function Fv(n,e,t){return[n+Math.sin(n+e)*t,e+Math.cos(n-e)*t]}class Oc{static from(e,t=Lv,r=qv,i){return new Oc("length"in e?function(a,o,s,c){const u=a.length,f=new Float64Array(2*u);for(let d=0;d<u;++d){const l=a[d];f[2*d]=o.call(c,l,d,a),f[2*d+1]=s.call(c,l,d,a)}return f}(e,t,r,i):Float64Array.from(function*(a,o,s,c){let u=0;for(const f of a)yield o.call(c,f,u,a),yield s.call(c,f,u,a),++u}(e,t,r,i)))}constructor(e){this._delaunator=new Lo(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(c){const{triangles:u,coords:f}=c;for(let d=0;d<u.length;d+=3){const l=2*u[d],g=2*u[d+1],x=2*u[d+2];if((f[x]-f[l])*(f[g+1]-f[l+1])-(f[g]-f[l])*(f[x+1]-f[l+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(l,g)=>g).sort((l,g)=>t[2*l]-t[2*g]||t[2*l+1]-t[2*g+1]);const c=this.collinear[0],u=this.collinear[this.collinear.length-1],f=[t[2*c],t[2*c+1],t[2*u],t[2*u+1]],d=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let l=0,g=t.length/2;l<g;++l){const x=Fv(t[2*l],t[2*l+1],d);t[2*l]=x[0],t[2*l+1]=x[1]}this._delaunator=new Lo(t)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let c=0,u=r.length;c<u;++c){const f=a[c%3==2?c-2:c+1];r[c]!==-1&&o[f]!==-1||(o[f]=c)}for(let c=0,u=i.length;c<u;++c)s[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new Wh(this,e)}*neighbors(e){const{inedges:t,hull:r,_hullIndex:i,halfedges:a,triangles:o,collinear:s}=this;if(s){const d=s.indexOf(e);return d>0&&(yield s[d-1]),void(d<s.length-1&&(yield s[d+1]))}const c=t[e];if(c===-1)return;let u=c,f=-1;do{if(yield f=o[u],u=u%3==2?u-2:u+1,o[u]!==e)return;if(u=a[u],u===-1){const d=r[(i[e]+1)%r.length];return void(d!==f&&(yield d))}}while(u!==c)}find(e,t,r=0){if((e=+e)!=e||(t=+t)!=t)return-1;const i=r;let a;for(;(a=this._step(r,e,t))>=0&&a!==r&&a!==i;)r=a;return a}_step(e,t,r){const{inedges:i,hull:a,_hullIndex:o,halfedges:s,triangles:c,points:u}=this;if(i[e]===-1||!u.length)return(e+1)%(u.length>>1);let f=e,d=ri(t-u[2*e],2)+ri(r-u[2*e+1],2);const l=i[e];let g=l;do{let x=c[g];const y=ri(t-u[2*x],2)+ri(r-u[2*x+1],2);if(y<d&&(d=y,f=x),g=g%3==2?g-2:g+1,c[g]!==e)break;if(g=s[g],g===-1){if(g=a[(o[e]+1)%a.length],g!==x&&ri(t-u[2*g],2)+ri(r-u[2*g+1],2)<d)return g;break}}while(g!==l);return f}render(e){const t=e==null?e=new Tr:void 0,{points:r,halfedges:i,triangles:a}=this;for(let o=0,s=i.length;o<s;++o){const c=i[o];if(c<o)continue;const u=2*a[o],f=2*a[c];e.moveTo(r[u],r[u+1]),e.lineTo(r[f],r[f+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t!==void 0||e&&typeof e.moveTo=="function"||(t=e,e=null),t=t==null?2:+t;const r=e==null?e=new Tr:void 0,{points:i}=this;for(let a=0,o=i.length;a<o;a+=2){const s=i[a],c=i[a+1];e.moveTo(s+t,c),e.arc(s,c,t,0,jv)}return r&&r.value()}renderHull(e){const t=e==null?e=new Tr:void 0,{hull:r,points:i}=this,a=2*r[0],o=r.length;e.moveTo(i[a],i[a+1]);for(let s=1;s<o;++s){const c=2*r[s];e.lineTo(i[c],i[c+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new Pc;return this.renderHull(e),e.value()}renderTriangle(e,t){const r=t==null?t=new Tr:void 0,{points:i,triangles:a}=this,o=2*a[e*=3],s=2*a[e+1],c=2*a[e+2];return t.moveTo(i[o],i[o+1]),t.lineTo(i[s],i[s+1]),t.lineTo(i[c],i[c+1]),t.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,r=e.length/3;t<r;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new Pc;return this.renderTriangle(e,t),t.value()}}var Zh={},Vc={},Rc=34,aa=10,Dc=13;function Kh(n){return new Function("d","return {"+n.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function Jh(n){var e=Object.create(null),t=[];return n.forEach(function(r){for(var i in r)i in e||t.push(e[i]=i)}),t}function Ce(n,e){var t=n+"",r=t.length;return r<e?new Array(e-r+1).join(0)+t:t}function Uv(n){var e,t=n.getUTCHours(),r=n.getUTCMinutes(),i=n.getUTCSeconds(),a=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":((e=n.getUTCFullYear())<0?"-"+Ce(-e,6):e>9999?"+"+Ce(e,6):Ce(e,4))+"-"+Ce(n.getUTCMonth()+1,2)+"-"+Ce(n.getUTCDate(),2)+(a?"T"+Ce(t,2)+":"+Ce(r,2)+":"+Ce(i,2)+"."+Ce(a,3)+"Z":i?"T"+Ce(t,2)+":"+Ce(r,2)+":"+Ce(i,2)+"Z":r||t?"T"+Ce(t,2)+":"+Ce(r,2)+"Z":"")}function qo(n){var e=new RegExp('["'+n+`
\r]`),t=n.charCodeAt(0);function r(s,c){var u,f=[],d=s.length,l=0,g=0,x=d<=0,y=!1;function w(){if(x)return Vc;if(y)return y=!1,Zh;var S,A,E=l;if(s.charCodeAt(E)===Rc){for(;l++<d&&s.charCodeAt(l)!==Rc||s.charCodeAt(++l)===Rc;);return(S=l)>=d?x=!0:(A=s.charCodeAt(l++))===aa?y=!0:A===Dc&&(y=!0,s.charCodeAt(l)===aa&&++l),s.slice(E+1,S-1).replace(/""/g,'"')}for(;l<d;){if((A=s.charCodeAt(S=l++))===aa)y=!0;else if(A===Dc)y=!0,s.charCodeAt(l)===aa&&++l;else if(A!==t)continue;return s.slice(E,S)}return x=!0,s.slice(E,d)}for(s.charCodeAt(d-1)===aa&&--d,s.charCodeAt(d-1)===Dc&&--d;(u=w())!==Vc;){for(var b=[];u!==Zh&&u!==Vc;)b.push(u),u=w();c&&(b=c(b,g++))==null||f.push(b)}return f}function i(s,c){return s.map(function(u){return c.map(function(f){return o(u[f])}).join(n)})}function a(s){return s.map(o).join(n)}function o(s){return s==null?"":s instanceof Date?Uv(s):e.test(s+="")?'"'+s.replace(/"/g,'""')+'"':s}return{parse:function(s,c){var u,f,d=r(s,function(l,g){if(u)return u(l,g-1);f=l,u=c?function(x,y){var w=Kh(x);return function(b,S){return y(w(b),S,x)}}(l,c):Kh(l)});return d.columns=f||[],d},parseRows:r,format:function(s,c){return c==null&&(c=Jh(s)),[c.map(o).join(n)].concat(i(s,c)).join(`
`)},formatBody:function(s,c){return c==null&&(c=Jh(s)),i(s,c).join(`
`)},formatRows:function(s){return s.map(a).join(`
`)},formatRow:a,formatValue:o}}var Ar=qo(","),Qh=Ar.parse,Yv=Ar.parseRows,Hv=Ar.format,Gv=Ar.formatBody,Xv=Ar.formatRows,Wv=Ar.formatRow,Zv=Ar.formatValue,Sr=qo("	"),n0=Sr.parse,Kv=Sr.parseRows,Jv=Sr.format,Qv=Sr.formatBody,nm=Sr.formatRows,em=Sr.formatRow,tm=Sr.formatValue;const rm=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function im(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.blob()}function am(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.arrayBuffer()}function om(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.text()}function Fo(n,e){return fetch(n,e).then(om)}function e0(n){return function(e,t,r){return arguments.length===2&&typeof t=="function"&&(r=t,t=void 0),Fo(e,t).then(function(i){return n(i,r)})}}var sm=e0(Qh),um=e0(n0);function cm(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(n.status!==204&&n.status!==205)return n.json()}function jc(n){return(e,t)=>Fo(e,t).then(r=>new DOMParser().parseFromString(r,n))}var fm=jc("application/xml"),lm=jc("text/html"),hm=jc("image/svg+xml");function t0(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,a,o,s,c,u,f,d,l,g=n._root,x={data:r},y=n._x0,w=n._y0,b=n._x1,S=n._y1;if(!g)return n._root=x,n;for(;g.length;)if((u=e>=(a=(y+b)/2))?y=a:b=a,(f=t>=(o=(w+S)/2))?w=o:S=o,i=g,!(g=g[d=f<<1|u]))return i[d]=x,n;if(s=+n._x.call(null,g.data),c=+n._y.call(null,g.data),e===s&&t===c)return x.next=g,i?i[d]=x:n._root=x,n;do i=i?i[d]=new Array(4):n._root=new Array(4),(u=e>=(a=(y+b)/2))?y=a:b=a,(f=t>=(o=(w+S)/2))?w=o:S=o;while((d=f<<1|u)==(l=(c>=o)<<1|s>=a));return i[l]=g,i[d]=x,n}function ye(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function dm(n){return n[0]}function pm(n){return n[1]}function Uo(n,e,t){var r=new Lc(e??dm,t??pm,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function Lc(n,e,t,r,i,a){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function r0(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var _e=Uo.prototype=Lc.prototype;function ee(n){return function(){return n}}function Jt(n){return 1e-6*(n()-.5)}function gm(n){return n.x+n.vx}function vm(n){return n.y+n.vy}function mm(n){return n.index}function i0(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}_e.copy=function(){var n,e,t=new Lc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return t;if(!r.length)return t._root=r0(r),t;for(n=[{source:r,target:t._root=new Array(4)}];r=n.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?n.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=r0(e));return t},_e.add=function(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return t0(this.cover(e,t),e,t,n)},_e.addAll=function(n){var e,t,r,i,a=n.length,o=new Array(a),s=new Array(a),c=1/0,u=1/0,f=-1/0,d=-1/0;for(t=0;t<a;++t)isNaN(r=+this._x.call(null,e=n[t]))||isNaN(i=+this._y.call(null,e))||(o[t]=r,s[t]=i,r<c&&(c=r),r>f&&(f=r),i<u&&(u=i),i>d&&(d=i));if(c>f||u>d)return this;for(this.cover(c,u).cover(f,d),t=0;t<a;++t)t0(this,o[t],s[t],n[t]);return this},_e.cover=function(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,a=(r=Math.floor(e))+1;else{for(var o,s,c=i-t||1,u=this._root;t>n||n>=i||r>e||e>=a;)switch(s=(e<r)<<1|n<t,(o=new Array(4))[s]=u,u=o,c*=2,s){case 0:i=t+c,a=r+c;break;case 1:t=i-c,a=r+c;break;case 2:i=t+c,r=a-c;break;case 3:t=i-c,r=a-c}this._root&&this._root.length&&(this._root=u)}return this._x0=t,this._y0=r,this._x1=i,this._y1=a,this},_e.data=function(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n},_e.extent=function(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},_e.find=function(n,e,t){var r,i,a,o,s,c,u,f=this._x0,d=this._y0,l=this._x1,g=this._y1,x=[],y=this._root;for(y&&x.push(new ye(y,f,d,l,g)),t==null?t=1/0:(f=n-t,d=e-t,l=n+t,g=e+t,t*=t);c=x.pop();)if(!(!(y=c.node)||(i=c.x0)>l||(a=c.y0)>g||(o=c.x1)<f||(s=c.y1)<d))if(y.length){var w=(i+o)/2,b=(a+s)/2;x.push(new ye(y[3],w,b,o,s),new ye(y[2],i,b,w,s),new ye(y[1],w,a,o,b),new ye(y[0],i,a,w,b)),(u=(e>=b)<<1|n>=w)&&(c=x[x.length-1],x[x.length-1]=x[x.length-1-u],x[x.length-1-u]=c)}else{var S=n-+this._x.call(null,y.data),A=e-+this._y.call(null,y.data),E=S*S+A*A;if(E<t){var I=Math.sqrt(t=E);f=n-I,d=e-I,l=n+I,g=e+I,r=y.data}}return r},_e.remove=function(n){if(isNaN(a=+this._x.call(null,n))||isNaN(o=+this._y.call(null,n)))return this;var e,t,r,i,a,o,s,c,u,f,d,l,g=this._root,x=this._x0,y=this._y0,w=this._x1,b=this._y1;if(!g)return this;if(g.length)for(;;){if((u=a>=(s=(x+w)/2))?x=s:w=s,(f=o>=(c=(y+b)/2))?y=c:b=c,e=g,!(g=g[d=f<<1|u]))return this;if(!g.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(t=e,l=d)}for(;g.data!==n;)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):e?(i?e[d]=i:delete e[d],(g=e[0]||e[1]||e[2]||e[3])&&g===(e[3]||e[2]||e[1]||e[0])&&!g.length&&(t?t[l]=g:this._root=g),this):(this._root=i,this)},_e.removeAll=function(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this},_e.root=function(){return this._root},_e.size=function(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n},_e.visit=function(n){var e,t,r,i,a,o,s=[],c=this._root;for(c&&s.push(new ye(c,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!n(c=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&c.length){var u=(r+a)/2,f=(i+o)/2;(t=c[3])&&s.push(new ye(t,u,f,a,o)),(t=c[2])&&s.push(new ye(t,r,f,u,o)),(t=c[1])&&s.push(new ye(t,u,i,a,f)),(t=c[0])&&s.push(new ye(t,r,i,u,f))}return this},_e.visitAfter=function(n){var e,t=[],r=[];for(this._root&&t.push(new ye(this._root,this._x0,this._y0,this._x1,this._y1));e=t.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,c=e.x1,u=e.y1,f=(o+c)/2,d=(s+u)/2;(a=i[0])&&t.push(new ye(a,o,s,f,d)),(a=i[1])&&t.push(new ye(a,f,s,c,d)),(a=i[2])&&t.push(new ye(a,o,d,f,u)),(a=i[3])&&t.push(new ye(a,f,d,c,u))}r.push(e)}for(;e=r.pop();)n(e.node,e.x0,e.y0,e.x1,e.y1);return this},_e.x=function(n){return arguments.length?(this._x=n,this):this._x},_e.y=function(n){return arguments.length?(this._y=n,this):this._y};const ym=1664525,_m=1013904223,a0=4294967296;function bm(n){return n.x}function xm(n){return n.y}var wm=Math.PI*(3-Math.sqrt(5));function Yo(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function ii(n){return(n=Yo(Math.abs(n)))?n[1]:NaN}var o0,Mm=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ai(n){if(!(e=Mm.exec(n)))throw new Error("invalid format: "+n);var e;return new Ho({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ho(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}function s0(n,e){var t=Yo(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ai.prototype=Ho.prototype,Ho.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var u0={"%":(n,e)=>(100*n).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:function(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)},e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>s0(100*n,e),r:s0,s:function(n,e){var t=Yo(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(o0=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Yo(n,Math.max(0,e+a-1))[0]},X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function c0(n){return n}var Go,f0=Array.prototype.map,l0=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function h0(n){var e,t,r=n.grouping===void 0||n.thousands===void 0?c0:(e=f0.call(n.grouping,Number),t=n.thousands+"",function(l,g){for(var x=l.length,y=[],w=0,b=e[0],S=0;x>0&&b>0&&(S+b+1>g&&(b=Math.max(1,g-S)),y.push(l.substring(x-=b,x+b)),!((S+=b+1)>g));)b=e[w=(w+1)%e.length];return y.reverse().join(t)}),i=n.currency===void 0?"":n.currency[0]+"",a=n.currency===void 0?"":n.currency[1]+"",o=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?c0:function(l){return function(g){return g.replace(/[0-9]/g,function(x){return l[+x]})}}(f0.call(n.numerals,String)),c=n.percent===void 0?"%":n.percent+"",u=n.minus===void 0?"\u2212":n.minus+"",f=n.nan===void 0?"NaN":n.nan+"";function d(l){var g=(l=ai(l)).fill,x=l.align,y=l.sign,w=l.symbol,b=l.zero,S=l.width,A=l.comma,E=l.precision,I=l.trim,N=l.type;N==="n"?(A=!0,N="g"):u0[N]||(E===void 0&&(E=12),I=!0,N="g"),(b||g==="0"&&x==="=")&&(b=!0,g="0",x="=");var F=w==="$"?i:w==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",W=w==="$"?a:/[%p]/.test(N)?c:"",U=u0[N],O=/[defgprs%]/.test(N);function V(j){var Z,B,L,X=F,K=W;if(N==="c")K=U(j)+K,j="";else{var Q=(j=+j)<0||1/j<0;if(j=isNaN(j)?f:U(Math.abs(j),E),I&&(j=function(an){n:for(var hn,En=an.length,vn=1,_n=-1;vn<En;++vn)switch(an[vn]){case".":_n=hn=vn;break;case"0":_n===0&&(_n=vn),hn=vn;break;default:if(!+an[vn])break n;_n>0&&(_n=0)}return _n>0?an.slice(0,_n)+an.slice(hn+1):an}(j)),Q&&+j==0&&y!=="+"&&(Q=!1),X=(Q?y==="("?y:u:y==="-"||y==="("?"":y)+X,K=(N==="s"?l0[8+o0/3]:"")+K+(Q&&y==="("?")":""),O){for(Z=-1,B=j.length;++Z<B;)if(48>(L=j.charCodeAt(Z))||L>57){K=(L===46?o+j.slice(Z+1):j.slice(Z))+K,j=j.slice(0,Z);break}}}A&&!b&&(j=r(j,1/0));var rn=X.length+j.length+K.length,sn=rn<S?new Array(S-rn+1).join(g):"";switch(A&&b&&(j=r(sn+j,sn.length?S-K.length:1/0),sn=""),x){case"<":j=X+j+K+sn;break;case"=":j=X+sn+j+K;break;case"^":j=sn.slice(0,rn=sn.length>>1)+X+j+K+sn.slice(rn);break;default:j=sn+X+j+K}return s(j)}return E=E===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E)),V.toString=function(){return l+""},V}return{format:d,formatPrefix:function(l,g){var x=d(((l=ai(l)).type="f",l)),y=3*Math.max(-8,Math.min(8,Math.floor(ii(g)/3))),w=Math.pow(10,-y),b=l0[8+y/3];return function(S){return x(w*S)+b}}}}function d0(n){return Go=h0(n),p.format=Go.format,p.formatPrefix=Go.formatPrefix,Go}function p0(n){return Math.max(0,-ii(Math.abs(n)))}function g0(n,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ii(e)/3)))-ii(Math.abs(n)))}function v0(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,ii(e)-ii(n))+1}p.format=void 0,p.formatPrefix=void 0,d0({thousands:",",grouping:[3],currency:["$",""]});var xn=1e-6,oa=1e-12,In=Math.PI,Wn=In/2,Xo=In/4,be=2*In,Fn=180/In,wn=In/180,zn=Math.abs,oi=Math.atan,xe=Math.atan2,yn=Math.cos,Wo=Math.ceil,m0=Math.exp,qc=Math.hypot,Zo=Math.log,Fc=Math.pow,gn=Math.sin,Ue=Math.sign||function(n){return n>0?1:n<0?-1:0},ce=Math.sqrt,Uc=Math.tan;function y0(n){return n>1?0:n<-1?In:Math.acos(n)}function we(n){return n>1?Wn:n<-1?-Wn:Math.asin(n)}function _0(n){return(n=gn(n/2))*n}function Gn(){}function Ko(n,e){n&&x0.hasOwnProperty(n.type)&&x0[n.type](n,e)}var b0={Feature:function(n,e){Ko(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,r=-1,i=t.length;++r<i;)Ko(t[r].geometry,e)}},x0={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)n=t[r],e.point(n[0],n[1],n[2])},LineString:function(n,e){Yc(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)Yc(t[r],e,0)},Polygon:function(n,e){w0(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)w0(t[r],e)},GeometryCollection:function(n,e){for(var t=n.geometries,r=-1,i=t.length;++r<i;)Ko(t[r],e)}};function Yc(n,e,t){var r,i=-1,a=n.length-t;for(e.lineStart();++i<a;)r=n[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function w0(n,e){var t=-1,r=n.length;for(e.polygonStart();++t<r;)Yc(n[t],e,1);e.polygonEnd()}function tt(n,e){n&&b0.hasOwnProperty(n.type)?b0[n.type](n,e):Ko(n,e)}var M0,E0,Hc,Gc,Xc,Xn,ke,Zn,$e,Cr,T0,A0,si,sa,Qt,zt,Jo=new Hn,Qo=new Hn,pt={point:Gn,lineStart:Gn,lineEnd:Gn,polygonStart:function(){Jo=new Hn,pt.lineStart=Em,pt.lineEnd=Tm},polygonEnd:function(){var n=+Jo;Qo.add(n<0?be+n:n),this.lineStart=this.lineEnd=this.point=Gn},sphere:function(){Qo.add(be)}};function Em(){pt.point=Am}function Tm(){S0(M0,E0)}function Am(n,e){pt.point=S0,M0=n,E0=e,Hc=n*=wn,Gc=yn(e=(e*=wn)/2+Xo),Xc=gn(e)}function S0(n,e){var t=(n*=wn)-Hc,r=t>=0?1:-1,i=r*t,a=yn(e=(e*=wn)/2+Xo),o=gn(e),s=Xc*o,c=Gc*a+s*yn(i),u=s*r*gn(i);Jo.add(xe(u,c)),Hc=n,Gc=a,Xc=o}function ns(n){return[xe(n[1],n[0]),we(n[2])]}function kr(n){var e=n[0],t=n[1],r=yn(t);return[r*yn(e),r*gn(e),gn(t)]}function es(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function ui(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function Wc(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function ts(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function rs(n){var e=ce(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}var ua,is,as,os,ss,us,cs,fs,Zc,Kc,Jc,C0,k0,Me,Ee,Te,$t={point:Qc,lineStart:N0,lineEnd:B0,polygonStart:function(){$t.point=z0,$t.lineStart=Sm,$t.lineEnd=Cm,sa=new Hn,pt.polygonStart()},polygonEnd:function(){pt.polygonEnd(),$t.point=Qc,$t.lineStart=N0,$t.lineEnd=B0,Jo<0?(Xn=-(Zn=180),ke=-($e=90)):sa>xn?$e=90:sa<-xn&&(ke=-90),zt[0]=Xn,zt[1]=Zn},sphere:function(){Xn=-(Zn=180),ke=-($e=90)}};function Qc(n,e){Qt.push(zt=[Xn=n,Zn=n]),e<ke&&(ke=e),e>$e&&($e=e)}function I0(n,e){var t=kr([n*wn,e*wn]);if(si){var r=ui(si,t),i=ui([r[1],-r[0],0],r);rs(i),i=ns(i);var a,o=n-Cr,s=o>0?1:-1,c=i[0]*Fn*s,u=zn(o)>180;u^(s*Cr<c&&c<s*n)?(a=i[1]*Fn)>$e&&($e=a):u^(s*Cr<(c=(c+360)%360-180)&&c<s*n)?(a=-i[1]*Fn)<ke&&(ke=a):(e<ke&&(ke=e),e>$e&&($e=e)),u?n<Cr?Pe(Xn,n)>Pe(Xn,Zn)&&(Zn=n):Pe(n,Zn)>Pe(Xn,Zn)&&(Xn=n):Zn>=Xn?(n<Xn&&(Xn=n),n>Zn&&(Zn=n)):n>Cr?Pe(Xn,n)>Pe(Xn,Zn)&&(Zn=n):Pe(n,Zn)>Pe(Xn,Zn)&&(Xn=n)}else Qt.push(zt=[Xn=n,Zn=n]);e<ke&&(ke=e),e>$e&&($e=e),si=t,Cr=n}function N0(){$t.point=I0}function B0(){zt[0]=Xn,zt[1]=Zn,$t.point=Qc,si=null}function z0(n,e){if(si){var t=n-Cr;sa.add(zn(t)>180?t+(t>0?360:-360):t)}else T0=n,A0=e;pt.point(n,e),I0(n,e)}function Sm(){pt.lineStart()}function Cm(){z0(T0,A0),pt.lineEnd(),zn(sa)>xn&&(Xn=-(Zn=180)),zt[0]=Xn,zt[1]=Zn,si=null}function Pe(n,e){return(e-=n)<0?e+360:e}function km(n,e){return n[0]-e[0]}function $0(n,e){return n[0]<=n[1]?n[0]<=e&&e<=n[1]:e<n[0]||n[1]<e}var rt={sphere:Gn,point:nf,lineStart:P0,lineEnd:O0,polygonStart:function(){rt.lineStart=Bm,rt.lineEnd=zm},polygonEnd:function(){rt.lineStart=P0,rt.lineEnd=O0}};function nf(n,e){n*=wn;var t=yn(e*=wn);ca(t*yn(n),t*gn(n),gn(e))}function ca(n,e,t){++ua,as+=(n-as)/ua,os+=(e-os)/ua,ss+=(t-ss)/ua}function P0(){rt.point=Im}function Im(n,e){n*=wn;var t=yn(e*=wn);Me=t*yn(n),Ee=t*gn(n),Te=gn(e),rt.point=Nm,ca(Me,Ee,Te)}function Nm(n,e){n*=wn;var t=yn(e*=wn),r=t*yn(n),i=t*gn(n),a=gn(e),o=xe(ce((o=Ee*a-Te*i)*o+(o=Te*r-Me*a)*o+(o=Me*i-Ee*r)*o),Me*r+Ee*i+Te*a);is+=o,us+=o*(Me+(Me=r)),cs+=o*(Ee+(Ee=i)),fs+=o*(Te+(Te=a)),ca(Me,Ee,Te)}function O0(){rt.point=nf}function Bm(){rt.point=$m}function zm(){V0(C0,k0),rt.point=nf}function $m(n,e){C0=n,k0=e,n*=wn,e*=wn,rt.point=V0;var t=yn(e);Me=t*yn(n),Ee=t*gn(n),Te=gn(e),ca(Me,Ee,Te)}function V0(n,e){n*=wn;var t=yn(e*=wn),r=t*yn(n),i=t*gn(n),a=gn(e),o=Ee*a-Te*i,s=Te*r-Me*a,c=Me*i-Ee*r,u=qc(o,s,c),f=we(u),d=u&&-f/u;Zc.add(d*o),Kc.add(d*s),Jc.add(d*c),is+=f,us+=f*(Me+(Me=r)),cs+=f*(Ee+(Ee=i)),fs+=f*(Te+(Te=a)),ca(Me,Ee,Te)}function ci(n){return function(){return n}}function ef(n,e){function t(r,i){return r=n(r,i),e(r[0],r[1])}return n.invert&&e.invert&&(t.invert=function(r,i){return(r=e.invert(r,i))&&n.invert(r[0],r[1])}),t}function tf(n,e){return zn(n)>In&&(n-=Math.round(n/be)*be),[n,e]}function rf(n,e,t){return(n%=be)?e||t?ef(D0(n),j0(e,t)):D0(n):e||t?j0(e,t):tf}function R0(n){return function(e,t){return zn(e+=n)>In&&(e-=Math.round(e/be)*be),[e,t]}}function D0(n){var e=R0(n);return e.invert=R0(-n),e}function j0(n,e){var t=yn(n),r=gn(n),i=yn(e),a=gn(e);function o(s,c){var u=yn(c),f=yn(s)*u,d=gn(s)*u,l=gn(c),g=l*t+f*r;return[xe(d*i-g*a,f*t-l*r),we(g*i+d*a)]}return o.invert=function(s,c){var u=yn(c),f=yn(s)*u,d=gn(s)*u,l=gn(c),g=l*i-d*a;return[xe(d*i+l*a,f*t+g*r),we(g*t-f*r)]},o}function L0(n){function e(t){return(t=n(t[0]*wn,t[1]*wn))[0]*=Fn,t[1]*=Fn,t}return n=rf(n[0]*wn,n[1]*wn,n.length>2?n[2]*wn:0),e.invert=function(t){return(t=n.invert(t[0]*wn,t[1]*wn))[0]*=Fn,t[1]*=Fn,t},e}function q0(n,e,t,r,i,a){if(t){var o=yn(e),s=gn(e),c=r*t;i==null?(i=e+r*be,a=e-c/2):(i=F0(o,i),a=F0(o,a),(r>0?i<a:i>a)&&(i+=r*be));for(var u,f=i;r>0?f>a:f<a;f-=c)u=ns([o,-s*yn(f),-s*gn(f)]),n.point(u[0],u[1])}}function F0(n,e){(e=kr(e))[0]-=n,rs(e);var t=y0(-e[1]);return((-e[2]<0?-t:t)+be-xn)%be}function U0(){var n,e=[];return{point:function(t,r,i){n.push([t,r,i])},lineStart:function(){e.push(n=[])},lineEnd:Gn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}}function ls(n,e){return zn(n[0]-e[0])<xn&&zn(n[1]-e[1])<xn}function hs(n,e,t,r){this.x=n,this.z=e,this.o=t,this.e=r,this.v=!1,this.n=this.p=null}function Y0(n,e,t,r,i){var a,o,s=[],c=[];if(n.forEach(function(x){if(!((y=x.length-1)<=0)){var y,w,b=x[0],S=x[y];if(ls(b,S)){if(!b[2]&&!S[2]){for(i.lineStart(),a=0;a<y;++a)i.point((b=x[a])[0],b[1]);return void i.lineEnd()}S[0]+=2*xn}s.push(w=new hs(b,x,null,!0)),c.push(w.o=new hs(b,null,w,!1)),s.push(w=new hs(S,x,null,!1)),c.push(w.o=new hs(S,null,w,!0))}}),s.length){for(c.sort(e),H0(s),H0(c),a=0,o=c.length;a<o;++a)c[a].e=t=!t;for(var u,f,d=s[0];;){for(var l=d,g=!0;l.v;)if((l=l.n)===d)return;u=l.z,i.lineStart();do{if(l.v=l.o.v=!0,l.e){if(g)for(a=0,o=u.length;a<o;++a)i.point((f=u[a])[0],f[1]);else r(l.x,l.n.x,1,i);l=l.n}else{if(g)for(u=l.p.z,a=u.length-1;a>=0;--a)i.point((f=u[a])[0],f[1]);else r(l.x,l.p.x,-1,i);l=l.p}u=(l=l.o).z,g=!g}while(!l.v);i.lineEnd()}}}function H0(n){if(e=n.length){for(var e,t,r=0,i=n[0];++r<e;)i.n=t=n[r],t.p=i,i=t;i.n=t=n[0],t.p=i}}function af(n){return zn(n[0])<=In?n[0]:Ue(n[0])*((zn(n[0])+In)%be-In)}function G0(n,e){var t=af(e),r=e[1],i=gn(r),a=[gn(t),-yn(t),0],o=0,s=0,c=new Hn;i===1?r=Wn+xn:i===-1&&(r=-Wn-xn);for(var u=0,f=n.length;u<f;++u)if(l=(d=n[u]).length)for(var d,l,g=d[l-1],x=af(g),y=g[1]/2+Xo,w=gn(y),b=yn(y),S=0;S<l;++S,x=E,w=N,b=F,g=A){var A=d[S],E=af(A),I=A[1]/2+Xo,N=gn(I),F=yn(I),W=E-x,U=W>=0?1:-1,O=U*W,V=O>In,j=w*N;if(c.add(xe(j*U*gn(O),b*F+j*yn(O))),o+=V?W+U*be:W,V^x>=t^E>=t){var Z=ui(kr(g),kr(A));rs(Z);var B=ui(a,Z);rs(B);var L=(V^W>=0?-1:1)*we(B[2]);(r>L||r===L&&(Z[0]||Z[1]))&&(s+=V^W>=0?1:-1)}}return(o<-xn||o<xn&&c<-oa)^1&s}function X0(n,e,t,r){return function(i){var a,o,s,c=e(i),u=U0(),f=e(u),d=!1,l={point:g,lineStart:y,lineEnd:w,polygonStart:function(){l.point=b,l.lineStart=S,l.lineEnd=A,o=[],a=[]},polygonEnd:function(){l.point=g,l.lineStart=y,l.lineEnd=w,o=qr(o);var E=G0(a,r);o.length?(d||(i.polygonStart(),d=!0),Y0(o,Om,E,t,i)):E&&(d||(i.polygonStart(),d=!0),i.lineStart(),t(null,null,1,i),i.lineEnd()),d&&(i.polygonEnd(),d=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),t(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(E,I){n(E,I)&&i.point(E,I)}function x(E,I){c.point(E,I)}function y(){l.point=x,c.lineStart()}function w(){l.point=g,c.lineEnd()}function b(E,I){s.push([E,I]),f.point(E,I)}function S(){f.lineStart(),s=[]}function A(){b(s[0][0],s[0][1]),f.lineEnd();var E,I,N,F,W=f.clean(),U=u.result(),O=U.length;if(s.pop(),a.push(s),s=null,O)if(1&W){if((I=(N=U[0]).length-1)>0){for(d||(i.polygonStart(),d=!0),i.lineStart(),E=0;E<I;++E)i.point((F=N[E])[0],F[1]);i.lineEnd()}}else O>1&&2&W&&U.push(U.pop().concat(U.shift())),o.push(U.filter(Pm))}return l}}function Pm(n){return n.length>1}function Om(n,e){return((n=n.x)[0]<0?n[1]-Wn-xn:Wn-n[1])-((e=e.x)[0]<0?e[1]-Wn-xn:Wn-e[1])}tf.invert=tf;var of=X0(function(){return!0},function(n){var e,t=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),e=1},point:function(a,o){var s=a>0?In:-In,c=zn(a-t);zn(c-In)<xn?(n.point(t,r=(r+o)/2>0?Wn:-Wn),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(s,r),n.point(a,r),e=0):i!==s&&c>=In&&(zn(t-i)<xn&&(t-=i*xn),zn(a-s)<xn&&(a-=s*xn),r=function(u,f,d,l){var g,x,y=gn(u-d);return zn(y)>xn?oi((gn(f)*(x=yn(l))*gn(d)-gn(l)*(g=yn(f))*gn(u))/(g*x*y)):(f+l)/2}(t,r,a,o),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(s,r),e=0),n.point(t=a,r=o),i=s},lineEnd:function(){n.lineEnd(),t=r=NaN},clean:function(){return 2-e}}},function(n,e,t,r){var i;if(n==null)i=t*Wn,r.point(-In,i),r.point(0,i),r.point(In,i),r.point(In,0),r.point(In,-i),r.point(0,-i),r.point(-In,-i),r.point(-In,0),r.point(-In,i);else if(zn(n[0]-e[0])>xn){var a=n[0]<e[0]?In:-In;i=t*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-In,-Wn]);function W0(n){var e=yn(n),t=6*wn,r=e>0,i=zn(e)>xn;function a(c,u){return yn(c)*yn(u)>e}function o(c,u,f){var d=[1,0,0],l=ui(kr(c),kr(u)),g=es(l,l),x=l[0],y=g-x*x;if(!y)return!f&&c;var w=e*g/y,b=-e*x/y,S=ui(d,l),A=ts(d,w);Wc(A,ts(l,b));var E=S,I=es(A,E),N=es(E,E),F=I*I-N*(es(A,A)-1);if(!(F<0)){var W=ce(F),U=ts(E,(-I-W)/N);if(Wc(U,A),U=ns(U),!f)return U;var O,V=c[0],j=u[0],Z=c[1],B=u[1];j<V&&(O=V,V=j,j=O);var L=j-V,X=zn(L-In)<xn;if(!X&&B<Z&&(O=Z,Z=B,B=O),X||L<xn?X?Z+B>0^U[1]<(zn(U[0]-V)<xn?Z:B):Z<=U[1]&&U[1]<=B:L>In^(V<=U[0]&&U[0]<=j)){var K=ts(E,(-I+W)/N);return Wc(K,A),[U,ns(K)]}}}function s(c,u){var f=r?n:In-n,d=0;return c<-f?d|=1:c>f&&(d|=2),u<-f?d|=4:u>f&&(d|=8),d}return X0(a,function(c){var u,f,d,l,g;return{lineStart:function(){l=d=!1,g=1},point:function(x,y){var w,b=[x,y],S=a(x,y),A=r?S?0:s(x,y):S?s(x+(x<0?In:-In),y):0;if(!u&&(l=d=S)&&c.lineStart(),S!==d&&(!(w=o(u,b))||ls(u,w)||ls(b,w))&&(b[2]=1),S!==d)g=0,S?(c.lineStart(),w=o(b,u),c.point(w[0],w[1])):(w=o(u,b),c.point(w[0],w[1],2),c.lineEnd()),u=w;else if(i&&u&&r^S){var E;A&f||!(E=o(b,u,!0))||(g=0,r?(c.lineStart(),c.point(E[0][0],E[0][1]),c.point(E[1][0],E[1][1]),c.lineEnd()):(c.point(E[1][0],E[1][1]),c.lineEnd(),c.lineStart(),c.point(E[0][0],E[0][1],3)))}!S||u&&ls(u,b)||c.point(b[0],b[1]),u=b,d=S,f=A},lineEnd:function(){d&&c.lineEnd(),u=null},clean:function(){return g|(l&&d)<<1}}},function(c,u,f,d){q0(d,n,t,f,c,u)},r?[0,-n]:[-In,n-In])}var sf,uf,ds,ps,fa=1e9,gs=-fa;function vs(n,e,t,r){function i(u,f){return n<=u&&u<=t&&e<=f&&f<=r}function a(u,f,d,l){var g=0,x=0;if(u==null||(g=o(u,d))!==(x=o(f,d))||c(u,f)<0^d>0)do l.point(g===0||g===3?n:t,g>1?r:e);while((g=(g+d+4)%4)!==x);else l.point(f[0],f[1])}function o(u,f){return zn(u[0]-n)<xn?f>0?0:3:zn(u[0]-t)<xn?f>0?2:1:zn(u[1]-e)<xn?f>0?1:0:f>0?3:2}function s(u,f){return c(u.x,f.x)}function c(u,f){var d=o(u,1),l=o(f,1);return d!==l?d-l:d===0?f[1]-u[1]:d===1?u[0]-f[0]:d===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f,d,l,g,x,y,w,b,S,A,E,I=u,N=U0(),F={point:W,lineStart:function(){F.point=U,d&&d.push(l=[]),A=!0,S=!1,w=b=NaN},lineEnd:function(){f&&(U(g,x),y&&S&&N.rejoin(),f.push(N.result())),F.point=W,S&&I.lineEnd()},polygonStart:function(){I=N,f=[],d=[],E=!0},polygonEnd:function(){var O=function(){for(var Z=0,B=0,L=d.length;B<L;++B)for(var X,K,Q=d[B],rn=1,sn=Q.length,an=Q[0],hn=an[0],En=an[1];rn<sn;++rn)X=hn,K=En,hn=(an=Q[rn])[0],En=an[1],K<=r?En>r&&(hn-X)*(r-K)>(En-K)*(n-X)&&++Z:En<=r&&(hn-X)*(r-K)<(En-K)*(n-X)&&--Z;return Z}(),V=E&&O,j=(f=qr(f)).length;(V||j)&&(u.polygonStart(),V&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),j&&Y0(f,s,O,a,u),u.polygonEnd()),I=u,f=d=l=null}};function W(O,V){i(O,V)&&I.point(O,V)}function U(O,V){var j=i(O,V);if(d&&l.push([O,V]),A)g=O,x=V,y=j,A=!1,j&&(I.lineStart(),I.point(O,V));else if(j&&S)I.point(O,V);else{var Z=[w=Math.max(gs,Math.min(fa,w)),b=Math.max(gs,Math.min(fa,b))],B=[O=Math.max(gs,Math.min(fa,O)),V=Math.max(gs,Math.min(fa,V))];(function(L,X,K,Q,rn,sn){var an,hn=L[0],En=L[1],vn=0,_n=1,Ln=X[0]-hn,Tn=X[1]-En;if(an=K-hn,Ln||!(an>0)){if(an/=Ln,Ln<0){if(an<vn)return;an<_n&&(_n=an)}else if(Ln>0){if(an>_n)return;an>vn&&(vn=an)}if(an=rn-hn,Ln||!(an<0)){if(an/=Ln,Ln<0){if(an>_n)return;an>vn&&(vn=an)}else if(Ln>0){if(an<vn)return;an<_n&&(_n=an)}if(an=Q-En,Tn||!(an>0)){if(an/=Tn,Tn<0){if(an<vn)return;an<_n&&(_n=an)}else if(Tn>0){if(an>_n)return;an>vn&&(vn=an)}if(an=sn-En,Tn||!(an<0)){if(an/=Tn,Tn<0){if(an>_n)return;an>vn&&(vn=an)}else if(Tn>0){if(an<vn)return;an<_n&&(_n=an)}return vn>0&&(L[0]=hn+vn*Ln,L[1]=En+vn*Tn),_n<1&&(X[0]=hn+_n*Ln,X[1]=En+_n*Tn),!0}}}}})(Z,B,n,e,t,r)?(S||(I.lineStart(),I.point(Z[0],Z[1])),I.point(B[0],B[1]),j||I.lineEnd(),E=!1):j&&(I.lineStart(),I.point(O,V),E=!1)}w=O,b=V,S=j}return F}}var fi={sphere:Gn,point:Gn,lineStart:function(){fi.point=Rm,fi.lineEnd=Vm},lineEnd:Gn,polygonStart:Gn,polygonEnd:Gn};function Vm(){fi.point=fi.lineEnd=Gn}function Rm(n,e){uf=n*=wn,ds=gn(e*=wn),ps=yn(e),fi.point=Dm}function Dm(n,e){n*=wn;var t=gn(e*=wn),r=yn(e),i=zn(n-uf),a=yn(i),o=r*gn(i),s=ps*t-ds*r*a,c=ds*t+ps*r*a;sf.add(xe(ce(o*o+s*s),c)),uf=n,ds=t,ps=r}function Z0(n){return sf=new Hn,tt(n,fi),+sf}var cf=[null,null],jm={type:"LineString",coordinates:cf};function ms(n,e){return cf[0]=n,cf[1]=e,Z0(jm)}var K0={Feature:function(n,e){return ys(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,r=-1,i=t.length;++r<i;)if(ys(t[r].geometry,e))return!0;return!1}},J0={Sphere:function(){return!0},Point:function(n,e){return Q0(n.coordinates,e)},MultiPoint:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)if(Q0(t[r],e))return!0;return!1},LineString:function(n,e){return nd(n.coordinates,e)},MultiLineString:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)if(nd(t[r],e))return!0;return!1},Polygon:function(n,e){return ed(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)if(ed(t[r],e))return!0;return!1},GeometryCollection:function(n,e){for(var t=n.geometries,r=-1,i=t.length;++r<i;)if(ys(t[r],e))return!0;return!1}};function ys(n,e){return!(!n||!J0.hasOwnProperty(n.type))&&J0[n.type](n,e)}function Q0(n,e){return ms(n,e)===0}function nd(n,e){for(var t,r,i,a=0,o=n.length;a<o;a++){if((r=ms(n[a],e))===0||a>0&&(i=ms(n[a],n[a-1]))>0&&t<=i&&r<=i&&(t+r-i)*(1-Math.pow((t-r)/i,2))<oa*i)return!0;t=r}return!1}function ed(n,e){return!!G0(n.map(Lm),td(e))}function Lm(n){return(n=n.map(td)).pop(),n}function td(n){return[n[0]*wn,n[1]*wn]}function rd(n,e,t){var r=st(n,e-xn,t).concat(e);return function(i){return r.map(function(a){return[i,a]})}}function id(n,e,t){var r=st(n,e-xn,t).concat(e);return function(i){return r.map(function(a){return[a,i]})}}function ad(){var n,e,t,r,i,a,o,s,c,u,f,d,l=10,g=l,x=90,y=360,w=2.5;function b(){return{type:"MultiLineString",coordinates:S()}}function S(){return st(Wo(r/x)*x,t,x).map(f).concat(st(Wo(s/y)*y,o,y).map(d)).concat(st(Wo(e/l)*l,n,l).filter(function(A){return zn(A%x)>xn}).map(c)).concat(st(Wo(a/g)*g,i,g).filter(function(A){return zn(A%y)>xn}).map(u))}return b.lines=function(){return S().map(function(A){return{type:"LineString",coordinates:A}})},b.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(d(o).slice(1),f(t).reverse().slice(1),d(s).reverse().slice(1))]}},b.extent=function(A){return arguments.length?b.extentMajor(A).extentMinor(A):b.extentMinor()},b.extentMajor=function(A){return arguments.length?(r=+A[0][0],t=+A[1][0],s=+A[0][1],o=+A[1][1],r>t&&(A=r,r=t,t=A),s>o&&(A=s,s=o,o=A),b.precision(w)):[[r,s],[t,o]]},b.extentMinor=function(A){return arguments.length?(e=+A[0][0],n=+A[1][0],a=+A[0][1],i=+A[1][1],e>n&&(A=e,e=n,n=A),a>i&&(A=a,a=i,i=A),b.precision(w)):[[e,a],[n,i]]},b.step=function(A){return arguments.length?b.stepMajor(A).stepMinor(A):b.stepMinor()},b.stepMajor=function(A){return arguments.length?(x=+A[0],y=+A[1],b):[x,y]},b.stepMinor=function(A){return arguments.length?(l=+A[0],g=+A[1],b):[l,g]},b.precision=function(A){return arguments.length?(w=+A,c=rd(a,i,90),u=id(e,n,w),f=rd(s,o,90),d=id(r,t,w),b):w},b.extentMajor([[-180,-90+xn],[180,90-xn]]).extentMinor([[-180,-80-xn],[180,80+xn]])}var od,sd,ff,lf,la=n=>n,hf=new Hn,df=new Hn,nr={point:Gn,lineStart:Gn,lineEnd:Gn,polygonStart:function(){nr.lineStart=qm,nr.lineEnd=Um},polygonEnd:function(){nr.lineStart=nr.lineEnd=nr.point=Gn,hf.add(zn(df)),df=new Hn},result:function(){var n=hf/2;return hf=new Hn,n}};function qm(){nr.point=Fm}function Fm(n,e){nr.point=ud,od=ff=n,sd=lf=e}function ud(n,e){df.add(lf*n-ff*e),ff=n,lf=e}function Um(){ud(od,sd)}var cd=nr,li=1/0,_s=li,ha=-li,bs=ha,Ym={point:function(n,e){n<li&&(li=n),n>ha&&(ha=n),e<_s&&(_s=e),e>bs&&(bs=e)},lineStart:Gn,lineEnd:Gn,polygonStart:Gn,polygonEnd:Gn,result:function(){var n=[[li,_s],[ha,bs]];return ha=bs=-(_s=li=1/0),n}},fd,ld,gt,vt,xs=Ym,pf=0,gf=0,da=0,ws=0,Ms=0,hi=0,vf=0,mf=0,pa=0,it={point:Ir,lineStart:hd,lineEnd:dd,polygonStart:function(){it.lineStart=Xm,it.lineEnd=Wm},polygonEnd:function(){it.point=Ir,it.lineStart=hd,it.lineEnd=dd},result:function(){var n=pa?[vf/pa,mf/pa]:hi?[ws/hi,Ms/hi]:da?[pf/da,gf/da]:[NaN,NaN];return pf=gf=da=ws=Ms=hi=vf=mf=pa=0,n}};function Ir(n,e){pf+=n,gf+=e,++da}function hd(){it.point=Hm}function Hm(n,e){it.point=Gm,Ir(gt=n,vt=e)}function Gm(n,e){var t=n-gt,r=e-vt,i=ce(t*t+r*r);ws+=i*(gt+n)/2,Ms+=i*(vt+e)/2,hi+=i,Ir(gt=n,vt=e)}function dd(){it.point=Ir}function Xm(){it.point=Zm}function Wm(){pd(fd,ld)}function Zm(n,e){it.point=pd,Ir(fd=gt=n,ld=vt=e)}function pd(n,e){var t=n-gt,r=e-vt,i=ce(t*t+r*r);ws+=i*(gt+n)/2,Ms+=i*(vt+e)/2,hi+=i,vf+=(i=vt*n-gt*e)*(gt+n),mf+=i*(vt+e),pa+=3*i,Ir(gt=n,vt=e)}var gd=it;function vd(n){this._context=n}vd.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:this._context.moveTo(n,e),this._point=1;break;case 1:this._context.lineTo(n,e);break;default:this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,be)}},result:Gn};var yf,md,yd,ga,va,_f=new Hn,Es={point:Gn,lineStart:function(){Es.point=Km},lineEnd:function(){yf&&_d(md,yd),Es.point=Gn},polygonStart:function(){yf=!0},polygonEnd:function(){yf=null},result:function(){var n=+_f;return _f=new Hn,n}};function Km(n,e){Es.point=_d,md=ga=n,yd=va=e}function _d(n,e){ga-=n,va-=e,_f.add(ce(ga*ga+va*va)),ga=n,va=e}var bd=Es;let xd,Ts,wd,Md;class Ed{constructor(e){this._append=e==null?Td:function(t){const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);if(r>15)return Td;if(r!==xd){const i=10**r;xd=r,Ts=function(a){let o=1;this._+=a[0];for(const s=a.length;o<s;++o)this._+=Math.round(arguments[o]*i)/i+a[o]}}return Ts}(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:this._append`M${e},${t}`,this._point=1;break;case 1:this._append`L${e},${t}`;break;default:if(this._append`M${e},${t}`,this._radius!==wd||this._append!==Ts){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,wd=r,Ts=this._append,Md=this._,this._=i}this._+=Md}}result(){const e=this._;return this._="",e.length?e:null}}function Td(n){let e=1;this._+=n[0];for(const t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function ma(n){return function(e){var t=new bf;for(var r in n)t[r]=n[r];return t.stream=e,t}}function bf(){}function xf(n,e,t){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),tt(t,n.stream(xs)),e(xs.result()),r!=null&&n.clipExtent(r),n}function As(n,e,t){return xf(n,function(r){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+e[0][0]+(i-o*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(a-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([s,c])},t)}function wf(n,e,t){return As(n,[[0,0],e],t)}function Mf(n,e,t){return xf(n,function(r){var i=+e,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];n.scale(150*a).translate([o,s])},t)}function Ef(n,e,t){return xf(n,function(r){var i=+e,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;n.scale(150*a).translate([o,s])},t)}bf.prototype={constructor:bf,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ad=16,Jm=yn(30*wn);function Sd(n,e){return+e?function(t,r){function i(a,o,s,c,u,f,d,l,g,x,y,w,b,S){var A=d-a,E=l-o,I=A*A+E*E;if(I>4*r&&b--){var N=c+x,F=u+y,W=f+w,U=ce(N*N+F*F+W*W),O=we(W/=U),V=zn(zn(W)-1)<xn||zn(s-g)<xn?(s+g)/2:xe(F,N),j=t(V,O),Z=j[0],B=j[1],L=Z-a,X=B-o,K=E*L-A*X;(K*K/I>r||zn((A*L+E*X)/I-.5)>.3||c*x+u*y+f*w<Jm)&&(i(a,o,s,c,u,f,Z,B,V,N/=U,F/=U,W,b,S),S.point(Z,B),i(Z,B,V,N,F,W,d,l,g,x,y,w,b,S))}}return function(a){var o,s,c,u,f,d,l,g,x,y,w,b,S={point:A,lineStart:E,lineEnd:N,polygonStart:function(){a.polygonStart(),S.lineStart=F},polygonEnd:function(){a.polygonEnd(),S.lineStart=E}};function A(O,V){O=t(O,V),a.point(O[0],O[1])}function E(){g=NaN,S.point=I,a.lineStart()}function I(O,V){var j=kr([O,V]),Z=t(O,V);i(g,x,l,y,w,b,g=Z[0],x=Z[1],l=O,y=j[0],w=j[1],b=j[2],Ad,a),a.point(g,x)}function N(){S.point=A,a.lineEnd()}function F(){E(),S.point=W,S.lineEnd=U}function W(O,V){I(o=O,V),s=g,c=x,u=y,f=w,d=b,S.point=I}function U(){i(g,x,l,y,w,b,s,c,o,u,f,d,Ad,a),S.lineEnd=N,N()}return S}}(n,e):function(t){return ma({point:function(r,i){r=t(r,i),this.stream.point(r[0],r[1])}})}(n)}var Qm=ma({point:function(n,e){this.stream.point(n*wn,e*wn)}});function Cd(n,e,t,r,i,a){if(!a)return function(y,w,b,S,A){function E(I,N){return[w+y*(I*=S),b-y*(N*=A)]}return E.invert=function(I,N){return[(I-w)/y*S,(b-N)/y*A]},E}(n,e,t,r,i);var o=yn(a),s=gn(a),c=o*n,u=s*n,f=o/n,d=s/n,l=(s*t-o*e)/n,g=(s*e+o*t)/n;function x(y,w){return[c*(y*=r)-u*(w*=i)+e,t-u*y-c*w]}return x.invert=function(y,w){return[r*(f*y-d*w+l),i*(g-d*y-f*w)]},x}function mt(n){return Tf(function(){return n})()}function Tf(n){var e,t,r,i,a,o,s,c,u,f,d=150,l=480,g=250,x=0,y=0,w=0,b=0,S=0,A=0,E=1,I=1,N=null,F=of,W=null,U=la,O=.5;function V(L){return c(L[0]*wn,L[1]*wn)}function j(L){return(L=c.invert(L[0],L[1]))&&[L[0]*Fn,L[1]*Fn]}function Z(){var L=Cd(d,0,0,E,I,A).apply(null,e(x,y)),X=Cd(d,l-L[0],g-L[1],E,I,A);return t=rf(w,b,S),s=ef(e,X),c=ef(t,s),o=Sd(s,O),B()}function B(){return u=f=null,V}return V.stream=function(L){return u&&f===L?u:u=Qm(function(X){return ma({point:function(K,Q){var rn=X(K,Q);return this.stream.point(rn[0],rn[1])}})}(t)(F(o(U(f=L)))))},V.preclip=function(L){return arguments.length?(F=L,N=void 0,B()):F},V.postclip=function(L){return arguments.length?(U=L,W=r=i=a=null,B()):U},V.clipAngle=function(L){return arguments.length?(F=+L?W0(N=L*wn):(N=null,of),B()):N*Fn},V.clipExtent=function(L){return arguments.length?(U=L==null?(W=r=i=a=null,la):vs(W=+L[0][0],r=+L[0][1],i=+L[1][0],a=+L[1][1]),B()):W==null?null:[[W,r],[i,a]]},V.scale=function(L){return arguments.length?(d=+L,Z()):d},V.translate=function(L){return arguments.length?(l=+L[0],g=+L[1],Z()):[l,g]},V.center=function(L){return arguments.length?(x=L[0]%360*wn,y=L[1]%360*wn,Z()):[x*Fn,y*Fn]},V.rotate=function(L){return arguments.length?(w=L[0]%360*wn,b=L[1]%360*wn,S=L.length>2?L[2]%360*wn:0,Z()):[w*Fn,b*Fn,S*Fn]},V.angle=function(L){return arguments.length?(A=L%360*wn,Z()):A*Fn},V.reflectX=function(L){return arguments.length?(E=L?-1:1,Z()):E<0},V.reflectY=function(L){return arguments.length?(I=L?-1:1,Z()):I<0},V.precision=function(L){return arguments.length?(o=Sd(s,O=L*L),B()):ce(O)},V.fitExtent=function(L,X){return As(V,L,X)},V.fitSize=function(L,X){return wf(V,L,X)},V.fitWidth=function(L,X){return Mf(V,L,X)},V.fitHeight=function(L,X){return Ef(V,L,X)},function(){return e=n.apply(this,arguments),V.invert=e.invert&&j,Z()}}function Af(n){var e=0,t=In/3,r=Tf(n),i=r(e,t);return i.parallels=function(a){return arguments.length?r(e=a[0]*wn,t=a[1]*wn):[e*Fn,t*Fn]},i}function kd(n,e){var t=gn(n),r=(t+gn(e))/2;if(zn(r)<xn)return function(s){var c=yn(s);function u(f,d){return[f*c,gn(d)/c]}return u.invert=function(f,d){return[f/c,we(d*c)]},u}(n);var i=1+t*(2*r-t),a=ce(i)/r;function o(s,c){var u=ce(i-2*r*gn(c))/r;return[u*gn(s*=r),a-u*yn(s)]}return o.invert=function(s,c){var u=a-c,f=xe(s,zn(u))*Ue(u);return u*r<0&&(f-=In*Ue(s)*Ue(u)),[f/r,we((i-(s*s+u*u)*r*r)/(2*r))]},o}function Ss(){return Af(kd).scale(155.424).center([0,33.6442])}function Id(){return Ss().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Nd(n){return function(e,t){var r=yn(e),i=yn(t),a=n(r*i);return a===1/0?[2,0]:[a*i*gn(e),a*gn(t)]}}function ya(n){return function(e,t){var r=ce(e*e+t*t),i=n(r),a=gn(i),o=yn(i);return[xe(e*a,r*o),we(r&&t*a/r)]}}var Sf=Nd(function(n){return ce(2/(1+n))});Sf.invert=ya(function(n){return 2*we(n/2)});var Cf=Nd(function(n){return(n=y0(n))&&n/gn(n)});function _a(n,e){return[n,Zo(Uc((Wn+e)/2))]}function Bd(n){var e,t,r,i=mt(n),a=i.center,o=i.scale,s=i.translate,c=i.clipExtent,u=null;function f(){var d=In*o(),l=i(L0(i.rotate()).invert([0,0]));return c(u==null?[[l[0]-d,l[1]-d],[l[0]+d,l[1]+d]]:n===_a?[[Math.max(l[0]-d,u),e],[Math.min(l[0]+d,t),r]]:[[u,Math.max(l[1]-d,e)],[t,Math.min(l[1]+d,r)]])}return i.scale=function(d){return arguments.length?(o(d),f()):o()},i.translate=function(d){return arguments.length?(s(d),f()):s()},i.center=function(d){return arguments.length?(a(d),f()):a()},i.clipExtent=function(d){return arguments.length?(d==null?u=e=t=r=null:(u=+d[0][0],e=+d[0][1],t=+d[1][0],r=+d[1][1]),f()):u==null?null:[[u,e],[t,r]]},f()}function Cs(n){return Uc((Wn+n)/2)}function zd(n,e){var t=yn(n),r=n===e?gn(n):Zo(t/yn(e))/Zo(Cs(e)/Cs(n)),i=t*Fc(Cs(n),r)/r;if(!r)return _a;function a(o,s){i>0?s<-Wn+xn&&(s=-Wn+xn):s>Wn-xn&&(s=Wn-xn);var c=i/Fc(Cs(s),r);return[c*gn(r*o),i-c*yn(r*o)]}return a.invert=function(o,s){var c=i-s,u=Ue(r)*ce(o*o+c*c),f=xe(o,zn(c))*Ue(c);return c*r<0&&(f-=In*Ue(o)*Ue(c)),[f/r,2*oi(Fc(i/u,1/r))-Wn]},a}function ba(n,e){return[n,e]}function $d(n,e){var t=yn(n),r=n===e?gn(n):(t-yn(e))/(e-n),i=t/r+n;if(zn(r)<xn)return ba;function a(o,s){var c=i-s,u=r*o;return[c*gn(u),i-c*yn(u)]}return a.invert=function(o,s){var c=i-s,u=xe(o,zn(c))*Ue(c);return c*r<0&&(u-=In*Ue(o)*Ue(c)),[u/r,i-Ue(r)*ce(o*o+c*c)]},a}Cf.invert=ya(function(n){return n}),_a.invert=function(n,e){return[n,2*oi(m0(e))-Wn]},ba.invert=ba;var xa=1.340264,wa=-.081106,Ma=893e-6,Ea=.003796,ks=ce(3)/2;function kf(n,e){var t=we(ks*gn(e)),r=t*t,i=r*r*r;return[n*yn(t)/(ks*(xa+3*wa*r+i*(7*Ma+9*Ea*r))),t*(xa+wa*r+i*(Ma+Ea*r))]}function If(n,e){var t=yn(e),r=yn(n)*t;return[t*gn(n)/r,gn(e)/r]}function Nf(n,e){var t=e*e,r=t*t;return[n*(.8707-.131979*t+r*(r*(.003971*t-.001529*r)-.013791)),e*(1.007226+t*(.015085+r*(.028874*t-.044475-.005916*r)))]}function Bf(n,e){return[yn(e)*gn(n),gn(e)]}function zf(n,e){var t=yn(e),r=1+yn(n)*t;return[t*gn(n)/r,gn(e)/r]}function $f(n,e){return[Zo(Uc((Wn+e)/2)),-n]}function ny(n,e){return n.parent===e.parent?1:2}function ey(n,e){return n+e.x}function ty(n,e){return Math.max(n,e.y)}function ry(n){var e=0,t=n.children,r=t&&t.length;if(r)for(;--r>=0;)e+=t[r].value;else e=1;n.value=e}function Pf(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=ay)):e===void 0&&(e=iy);for(var t,r,i,a,o,s=new Nr(n),c=[s];t=c.pop();)if((i=e(t.data))&&(o=(i=Array.from(i)).length))for(t.children=i,a=o-1;a>=0;--a)c.push(r=i[a]=new Nr(i[a])),r.parent=t,r.depth=t.depth+1;return s.eachBefore(Pd)}function iy(n){return n.children}function ay(n){return Array.isArray(n)?n[1]:null}function oy(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function Pd(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function Nr(n){this.data=n,this.depth=this.height=0,this.parent=null}function Is(n){return n==null?null:Od(n)}function Od(n){if(typeof n!="function")throw new Error;return n}function Br(){return 0}function di(n){return function(){return n}}kf.invert=function(n,e){for(var t,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=t=(r*(xa+wa*i+a*(Ma+Ea*i))-e)/(xa+3*wa*i+a*(7*Ma+9*Ea*i)))*r)*i*i,!(zn(t)<oa));++o);return[ks*n*(xa+3*wa*i+a*(7*Ma+9*Ea*i))/yn(r),we(gn(r)/ks)]},If.invert=ya(oi),Nf.invert=function(n,e){var t,r=e,i=25;do{var a=r*r,o=a*a;r-=t=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(zn(t)>xn&&--i>0);return[n/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},Bf.invert=ya(we),zf.invert=ya(function(n){return 2*oi(n)}),$f.invert=function(n,e){return[-e,2*oi(m0(n))-Wn]},Nr.prototype=Pf.prototype={constructor:Nr,count:function(){return this.eachAfter(ry)},each:function(n,e){let t=-1;for(const r of this)n.call(e,r,++t,this);return this},eachAfter:function(n,e){for(var t,r,i,a=this,o=[a],s=[],c=-1;a=o.pop();)if(s.push(a),t=a.children)for(r=0,i=t.length;r<i;++r)o.push(t[r]);for(;a=s.pop();)n.call(e,a,++c,this);return this},eachBefore:function(n,e){for(var t,r,i=this,a=[i],o=-1;i=a.pop();)if(n.call(e,i,++o,this),t=i.children)for(r=t.length-1;r>=0;--r)a.push(t[r]);return this},find:function(n,e){let t=-1;for(const r of this)if(n.call(e,r,++t,this))return r},sum:function(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)t+=r[i].value;e.value=t})},sort:function(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})},path:function(n){for(var e=this,t=function(a,o){if(a===o)return a;var s=a.ancestors(),c=o.ancestors(),u=null;for(a=s.pop(),o=c.pop();a===o;)u=a,a=s.pop(),o=c.pop();return u}(e,n),r=[e];e!==t;)e=e.parent,r.push(e);for(var i=r.length;n!==t;)r.splice(i,0,n),n=n.parent;return r},ancestors:function(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e},descendants:function(){return Array.from(this)},leaves:function(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n},links:function(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t})}),e},copy:function(){return Pf(this).eachBefore(oy)},[Symbol.iterator]:function*(){var n,e,t,r,i=this,a=[i];do for(n=a.reverse(),a=[];i=n.pop();)if(yield i,e=i.children)for(t=0,r=e.length;t<r;++t)a.push(e[t]);while(a.length)}};const sy=1664525,uy=1013904223,Vd=4294967296;function Of(){let n=1;return()=>(n=(sy*n+uy)%Vd)/Vd}function Rd(n,e){for(var t,r,i=0,a=(n=function(s,c){let u,f,d=s.length;for(;d;)f=c()*d--|0,u=s[d],s[d]=s[f],s[f]=u;return s}(Array.from(n),e)).length,o=[];i<a;)t=n[i],r&&Dd(r,t)?++i:(r=fy(o=cy(o,t)),i=0);return r}function cy(n,e){var t,r;if(Vf(e,n))return[e];for(t=0;t<n.length;++t)if(Ns(e,n[t])&&Vf(Ta(n[t],e),n))return[n[t],e];for(t=0;t<n.length-1;++t)for(r=t+1;r<n.length;++r)if(Ns(Ta(n[t],n[r]),e)&&Ns(Ta(n[t],e),n[r])&&Ns(Ta(n[r],e),n[t])&&Vf(jd(n[t],n[r],e),n))return[n[t],n[r],e];throw new Error}function Ns(n,e){var t=n.r-e.r,r=e.x-n.x,i=e.y-n.y;return t<0||t*t<r*r+i*i}function Dd(n,e){var t=n.r-e.r+1e-9*Math.max(n.r,e.r,1),r=e.x-n.x,i=e.y-n.y;return t>0&&t*t>r*r+i*i}function Vf(n,e){for(var t=0;t<e.length;++t)if(!Dd(n,e[t]))return!1;return!0}function fy(n){switch(n.length){case 1:return function(e){return{x:e.x,y:e.y,r:e.r}}(n[0]);case 2:return Ta(n[0],n[1]);case 3:return jd(n[0],n[1],n[2])}}function Ta(n,e){var t=n.x,r=n.y,i=n.r,a=e.x,o=e.y,s=e.r,c=a-t,u=o-r,f=s-i,d=Math.sqrt(c*c+u*u);return{x:(t+a+c/d*f)/2,y:(r+o+u/d*f)/2,r:(d+i+s)/2}}function jd(n,e,t){var r=n.x,i=n.y,a=n.r,o=e.x,s=e.y,c=e.r,u=t.x,f=t.y,d=t.r,l=r-o,g=r-u,x=i-s,y=i-f,w=c-a,b=d-a,S=r*r+i*i-a*a,A=S-o*o-s*s+c*c,E=S-u*u-f*f+d*d,I=g*x-l*y,N=(x*E-y*A)/(2*I)-r,F=(y*w-x*b)/I,W=(g*A-l*E)/(2*I)-i,U=(l*b-g*w)/I,O=F*F+U*U-1,V=2*(a+N*F+W*U),j=N*N+W*W-a*a,Z=-(Math.abs(O)>1e-6?(V+Math.sqrt(V*V-4*O*j))/(2*O):j/V);return{x:r+N+F*Z,y:i+W+U*Z,r:Z}}function Ld(n,e,t){var r,i,a,o,s=n.x-e.x,c=n.y-e.y,u=s*s+c*c;u?(i=e.r+t.r,i*=i,o=n.r+t.r,i>(o*=o)?(r=(u+o-i)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),t.x=n.x-r*s-a*c,t.y=n.y-r*c+a*s):(r=(u+i-o)/(2*u),a=Math.sqrt(Math.max(0,i/u-r*r)),t.x=e.x+r*s-a*c,t.y=e.y+r*c+a*s)):(t.x=e.x+t.r,t.y=e.y)}function qd(n,e){var t=n.r+e.r-1e-6,r=e.x-n.x,i=e.y-n.y;return t>0&&t*t>r*r+i*i}function Fd(n){var e=n._,t=n.next._,r=e.r+t.r,i=(e.x*t.r+t.x*e.r)/r,a=(e.y*t.r+t.y*e.r)/r;return i*i+a*a}function Bs(n){this._=n,this.next=null,this.previous=null}function Ud(n,e){if(!(a=(n=function(g){return typeof g=="object"&&"length"in g?g:Array.from(g)}(n)).length))return 0;var t,r,i,a,o,s,c,u,f,d,l;if((t=n[0]).x=0,t.y=0,!(a>1))return t.r;if(r=n[1],t.x=-r.r,r.x=t.r,r.y=0,!(a>2))return t.r+r.r;Ld(r,t,i=n[2]),t=new Bs(t),r=new Bs(r),i=new Bs(i),t.next=i.previous=r,r.next=t.previous=i,i.next=r.previous=t;n:for(c=3;c<a;++c){Ld(t._,r._,i=n[c]),i=new Bs(i),u=r.next,f=t.previous,d=r._.r,l=t._.r;do if(d<=l){if(qd(u._,i._)){r=u,t.next=r,r.previous=t,--c;continue n}d+=u._.r,u=u.next}else{if(qd(f._,i._)){(t=f).next=r,r.previous=t,--c;continue n}l+=f._.r,f=f.previous}while(u!==f.next);for(i.previous=t,i.next=r,t.next=r.previous=r=i,o=Fd(t);(i=i.next)!==r;)(s=Fd(i))<o&&(t=i,o=s);r=t.next}for(t=[r._],i=r;(i=i.next)!==r;)t.push(i._);for(i=Rd(t,e),c=0;c<a;++c)(t=n[c]).x-=i.x,t.y-=i.y;return i.r}function ly(n){return Math.sqrt(n.value)}function Yd(n){return function(e){e.children||(e.r=Math.max(0,+n(e)||0))}}function Rf(n,e,t){return function(r){if(i=r.children){var i,a,o,s=i.length,c=n(r)*e||0;if(c)for(a=0;a<s;++a)i[a].r+=c;if(o=Ud(i,t),c)for(a=0;a<s;++a)i[a].r-=c;r.r=o+c}}}function Hd(n){return function(e){var t=e.parent;e.r*=n,t&&(e.x=t.x+n*e.x,e.y=t.y+n*e.y)}}function Gd(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function Aa(n,e,t,r,i){for(var a,o=n.children,s=-1,c=o.length,u=n.value&&(r-e)/n.value;++s<c;)(a=o[s]).y0=t,a.y1=i,a.x0=e,a.x1=e+=a.value*u}var hy={depth:-1},Xd={},Df={};function dy(n){return n.id}function py(n){return n.parentId}function Wd(n){let e=n.length;if(e<2)return"";for(;--e>1&&!jf(n,e););return n.slice(0,e)}function jf(n,e){if(n[e]==="/"){let t=0;for(;e>0&&n[--e]==="\\";)++t;if((1&t)==0)return!0}return!1}function gy(n,e){return n.parent===e.parent?1:2}function Lf(n){var e=n.children;return e?e[0]:n.t}function qf(n){var e=n.children;return e?e[e.length-1]:n.t}function vy(n,e,t){var r=t/(e.i-n.i);e.c-=r,e.s+=t,n.c+=r,e.z+=t,e.m+=t}function my(n,e,t){return n.a.parent===e.parent?n.a:t}function zs(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function $s(n,e,t,r,i){for(var a,o=n.children,s=-1,c=o.length,u=n.value&&(i-t)/n.value;++s<c;)(a=o[s]).x0=e,a.x1=r,a.y0=t,a.y1=t+=a.value*u}zs.prototype=Object.create(Nr.prototype);var Zd=(1+Math.sqrt(5))/2;function Kd(n,e,t,r,i,a){for(var o,s,c,u,f,d,l,g,x,y,w,b=[],S=e.children,A=0,E=0,I=S.length,N=e.value;A<I;){c=i-t,u=a-r;do f=S[E++].value;while(!f&&E<I);for(d=l=f,w=f*f*(y=Math.max(u/c,c/u)/(N*n)),x=Math.max(l/w,w/d);E<I;++E){if(f+=s=S[E].value,s<d&&(d=s),s>l&&(l=s),w=f*f*y,(g=Math.max(l/w,w/d))>x){f-=s;break}x=g}b.push(o={value:f,dice:c<u,children:S.slice(A,E)}),o.dice?Aa(o,t,r,i,N?r+=u*f/N:a):$s(o,t,r,N?t+=c*f/N:i,a),N-=f,A=E}return b}var Jd=function n(e){function t(r,i,a,o,s){Kd(e,r,i,a,o,s)}return t.ratio=function(r){return n((r=+r)>1?r:1)},t}(Zd),yy=function n(e){function t(r,i,a,o,s){if((c=r._squarify)&&c.ratio===e)for(var c,u,f,d,l,g=-1,x=c.length,y=r.value;++g<x;){for(f=(u=c[g]).children,d=u.value=0,l=f.length;d<l;++d)u.value+=f[d].value;u.dice?Aa(u,i,a,o,y?a+=(s-a)*u.value/y:s):$s(u,i,a,y?i+=(o-i)*u.value/y:o,s),y-=u.value}else r._squarify=c=Kd(e,r,i,a,o,s),c.ratio=e}return t.ratio=function(r){return n((r=+r)>1?r:1)},t}(Zd);function _y(n,e,t){return(e[0]-n[0])*(t[1]-n[1])-(e[1]-n[1])*(t[0]-n[0])}function by(n,e){return n[0]-e[0]||n[1]-e[1]}function Qd(n){const e=n.length,t=[0,1];let r,i=2;for(r=2;r<e;++r){for(;i>1&&_y(n[t[i-2]],n[t[i-1]],n[r])<=0;)--i;t[i++]=r}return t.slice(0,i)}var le=Math.random,xy=function n(e){function t(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return e()*i+r}}return t.source=n,t}(le),wy=function n(e){function t(r,i){return arguments.length<2&&(i=r,r=0),r=Math.floor(r),i=Math.floor(i)-r,function(){return Math.floor(e()*i+r)}}return t.source=n,t}(le),Ff=function n(e){function t(r,i){var a,o;return r=r==null?0:+r,i=i==null?1:+i,function(){var s;if(a!=null)s=a,a=null;else do a=2*e()-1,s=2*e()-1,o=a*a+s*s;while(!o||o>1);return r+i*s*Math.sqrt(-2*Math.log(o)/o)}}return t.source=n,t}(le),My=function n(e){var t=Ff.source(e);function r(){var i=t.apply(this,arguments);return function(){return Math.exp(i())}}return r.source=n,r}(le),n1=function n(e){function t(r){return(r=+r)<=0?()=>0:function(){for(var i=0,a=r;a>1;--a)i+=e();return i+a*e()}}return t.source=n,t}(le),Ey=function n(e){var t=n1.source(e);function r(i){if((i=+i)==0)return e;var a=t(i);return function(){return a()/i}}return r.source=n,r}(le),Ty=function n(e){function t(r){return function(){return-Math.log1p(-e())/r}}return t.source=n,t}(le),Ay=function n(e){function t(r){if((r=+r)<0)throw new RangeError("invalid alpha");return r=1/-r,function(){return Math.pow(1-e(),r)}}return t.source=n,t}(le),Sy=function n(e){function t(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+r)}}return t.source=n,t}(le),e1=function n(e){function t(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return r===0?()=>1/0:r===1?()=>1:(r=Math.log1p(-r),function(){return 1+Math.floor(Math.log1p(-e())/r)})}return t.source=n,t}(le),Uf=function n(e){var t=Ff.source(e)();function r(i,a){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(a=a==null?1:+a,i===1)return()=>-Math.log1p(-e())*a;var o=(i<1?i+1:i)-1/3,s=1/(3*Math.sqrt(o)),c=i<1?()=>Math.pow(e(),1/i):()=>1;return function(){do{do var u=t(),f=1+s*u;while(f<=0);f*=f*f;var d=1-e()}while(d>=1-.0331*u*u*u*u&&Math.log(d)>=.5*u*u+o*(1-f+Math.log(f)));return o*f*c()*a}}return r.source=n,r}(le),t1=function n(e){var t=Uf.source(e);function r(i,a){var o=t(i),s=t(a);return function(){var c=o();return c===0?0:c/(c+s())}}return r.source=n,r}(le),r1=function n(e){var t=e1.source(e),r=t1.source(e);function i(a,o){return a=+a,(o=+o)>=1?()=>a:o<=0?()=>0:function(){for(var s=0,c=a,u=o;c*u>16&&c*(1-u)>16;){var f=Math.floor((c+1)*u),d=r(f,c-f+1)();d<=u?(s+=f,c-=f,u=(u-d)/(1-d)):(c=f-1,u/=d)}for(var l=u<.5,g=t(l?u:1-u),x=g(),y=0;x<=c;++y)x+=g();return s+(l?y:c-y)}}return i.source=n,i}(le),Cy=function n(e){function t(r,i,a){var o;return(r=+r)==0?o=s=>-Math.log(s):(r=1/r,o=s=>Math.pow(s,r)),i=i==null?0:+i,a=a==null?1:+a,function(){return i+a*o(-Math.log1p(-e()))}}return t.source=n,t}(le),ky=function n(e){function t(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*Math.tan(Math.PI*e())}}return t.source=n,t}(le),Iy=function n(e){function t(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){var a=e();return r+i*Math.log(a/(1-a))}}return t.source=n,t}(le),Ny=function n(e){var t=Uf.source(e),r=r1.source(e);function i(a){return function(){for(var o=0,s=a;s>16;){var c=Math.floor(.875*s),u=t(c)();if(u>s)return o+r(c-1,s/u)();o+=c,s-=u}for(var f=-Math.log1p(-e()),d=0;f<=s;++d)f-=Math.log1p(-e());return o+d}}return i.source=n,i}(le);const i1=1/4294967296;function Ye(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n)}return this}function Pt(n,e){switch(arguments.length){case 0:break;case 1:typeof n=="function"?this.interpolator(n):this.range(n);break;default:this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e)}return this}const Yf=Symbol("implicit");function Hf(){var n=new Tt,e=[],t=[],r=Yf;function i(a){let o=n.get(a);if(o===void 0){if(r!==Yf)return r;n.set(a,o=e.push(a)-1)}return t[o%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new Tt;for(const o of a)n.has(o)||n.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Hf(e,t).unknown(r)},Ye.apply(i,arguments),i}function Gf(){var n,e,t=Hf().unknown(void 0),r=t.domain,i=t.range,a=0,o=1,s=!1,c=0,u=0,f=.5;function d(){var l=r().length,g=o<a,x=g?o:a,y=g?a:o;n=(y-x)/Math.max(1,l-c+2*u),s&&(n=Math.floor(n)),x+=(y-x-n*(l-c))*f,e=n*(1-c),s&&(x=Math.round(x),e=Math.round(e));var w=st(l).map(function(b){return x+n*b});return i(g?w.reverse():w)}return delete t.unknown,t.domain=function(l){return arguments.length?(r(l),d()):r()},t.range=function(l){return arguments.length?([a,o]=l,a=+a,o=+o,d()):[a,o]},t.rangeRound=function(l){return[a,o]=l,a=+a,o=+o,s=!0,d()},t.bandwidth=function(){return e},t.step=function(){return n},t.round=function(l){return arguments.length?(s=!!l,d()):s},t.padding=function(l){return arguments.length?(c=Math.min(1,u=+l),d()):c},t.paddingInner=function(l){return arguments.length?(c=Math.min(1,l),d()):c},t.paddingOuter=function(l){return arguments.length?(u=+l,d()):u},t.align=function(l){return arguments.length?(f=Math.max(0,Math.min(1,l)),d()):f},t.copy=function(){return Gf(r(),[a,o]).round(s).paddingInner(c).paddingOuter(u).align(f)},Ye.apply(d(),arguments)}function a1(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return a1(e())},n}function Ps(n){return+n}var o1=[0,1];function Ae(n){return n}function Xf(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function By(n,e,t){var r=n[0],i=n[1],a=e[0],o=e[1];return i<r?(r=Xf(i,r),a=t(o,a)):(r=Xf(r,i),a=t(a,o)),function(s){return a(r(s))}}function zy(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Xf(n[o],n[o+1]),a[o]=t(e[o],e[o+1]);return function(s){var c=Ze(n,s,1,r)-1;return a[c](i[c](s))}}function Sa(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Os(){var n,e,t,r,i,a,o=o1,s=o1,c=Wt,u=Ae;function f(){var l=Math.min(o.length,s.length);return u!==Ae&&(u=function(g,x){var y;return g>x&&(y=g,g=x,x=y),function(w){return Math.max(g,Math.min(x,w))}}(o[0],o[l-1])),r=l>2?zy:By,i=a=null,d}function d(l){return l==null||isNaN(l=+l)?t:(i||(i=r(o.map(n),s,c)))(n(u(l)))}return d.invert=function(l){return u(e((a||(a=r(s,o.map(n),Fe)))(l)))},d.domain=function(l){return arguments.length?(o=Array.from(l,Ps),f()):o.slice()},d.range=function(l){return arguments.length?(s=Array.from(l),f()):s.slice()},d.rangeRound=function(l){return s=Array.from(l),c=To,f()},d.clamp=function(l){return arguments.length?(u=!!l||Ae,f()):u!==Ae},d.interpolate=function(l){return arguments.length?(c=l,f()):c},d.unknown=function(l){return arguments.length?(t=l,d):t},function(l,g){return n=l,e=g,f()}}function Wf(){return Os()(Ae,Ae)}function s1(n,e,t,r){var i,a=cr(n,e,t);switch((r=ai(r??",f")).type){case"s":var o=Math.max(Math.abs(n),Math.abs(e));return r.precision!=null||isNaN(i=g0(a,o))||(r.precision=i),p.formatPrefix(r,o);case"":case"e":case"g":case"p":case"r":r.precision!=null||isNaN(i=v0(a,Math.max(Math.abs(n),Math.abs(e))))||(r.precision=i-(r.type==="e"));break;case"f":case"%":r.precision!=null||isNaN(i=p0(a))||(r.precision=i-2*(r.type==="%"))}return p.format(r)}function er(n){var e=n.domain;return n.ticks=function(t){var r=e();return St(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return s1(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r,i,a=e(),o=0,s=a.length-1,c=a[o],u=a[s],f=10;for(u<c&&(i=c,c=u,u=i,i=o,o=s,s=i);f-- >0;){if((i=Ct(c,u,t))===r)return a[o]=c,a[s]=u,e(a);if(i>0)c=Math.floor(c/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,u=Math.floor(u*i)/i}r=i}return n},n}function u1(n,e){var t,r=0,i=(n=n.slice()).length-1,a=n[r],o=n[i];return o<a&&(t=r,r=i,i=t,t=a,a=o,o=t),n[r]=e.floor(a),n[i]=e.ceil(o),n}function c1(n){return Math.log(n)}function f1(n){return Math.exp(n)}function $y(n){return-Math.log(-n)}function Py(n){return-Math.exp(-n)}function Oy(n){return isFinite(n)?+("1e"+n):n<0?0:n}function l1(n){return(e,t)=>-n(-e,t)}function Zf(n){const e=n(c1,f1),t=e.domain;let r,i,a=10;function o(){return r=function(s){return s===Math.E?Math.log:s===10&&Math.log10||s===2&&Math.log2||(s=Math.log(s),c=>Math.log(c)/s)}(a),i=function(s){return s===10?Oy:s===Math.E?Math.exp:c=>Math.pow(s,c)}(a),t()[0]<0?(r=l1(r),i=l1(i),n($y,Py)):n(c1,f1),e}return e.base=function(s){return arguments.length?(a=+s,o()):a},e.domain=function(s){return arguments.length?(t(s),o()):t()},e.ticks=s=>{const c=t();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let l,g,x=r(u),y=r(f);const w=s==null?10:+s;let b=[];if(!(a%1)&&y-x<w){if(x=Math.floor(x),y=Math.ceil(y),u>0){for(;x<=y;++x)for(l=1;l<a;++l)if(g=x<0?l/i(-x):l*i(x),!(g<u)){if(g>f)break;b.push(g)}}else for(;x<=y;++x)for(l=a-1;l>=1;--l)if(g=x>0?l/i(-x):l*i(x),!(g<u)){if(g>f)break;b.push(g)}2*b.length<w&&(b=St(u,f,w))}else b=St(x,y,Math.min(y-x,w)).map(i);return d?b.reverse():b},e.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(a%1||(c=ai(c)).precision!=null||(c.trim=!0),c=p.format(c)),s===1/0)return c;const u=Math.max(1,a*s/e.ticks().length);return f=>{let d=f/i(Math.round(r(f)));return d*a<a-.5&&(d*=a),d<=u?c(f):""}},e.nice=()=>t(u1(t(),{floor:s=>i(Math.floor(r(s))),ceil:s=>i(Math.ceil(r(s)))})),e}function h1(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function d1(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function Kf(n){var e=1,t=n(h1(e),d1(e));return t.constant=function(r){return arguments.length?n(h1(e=+r),d1(e)):e},er(t)}function p1(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function Vy(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function Ry(n){return n<0?-n*n:n*n}function Jf(n){var e=n(Ae,Ae),t=1;return e.exponent=function(r){return arguments.length?(t=+r)==1?n(Ae,Ae):t===.5?n(Vy,Ry):n(p1(t),p1(1/t)):t},er(e)}function Qf(){var n=Jf(Os());return n.copy=function(){return Sa(n,Qf()).exponent(n.exponent())},Ye.apply(n,arguments),n}function g1(n){return Math.sign(n)*n*n}const nl=new Date,el=new Date;function Jn(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const c=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o&&s>0))return c;let u;do c.push(u=new Date(+a)),e(a,s),n(a);while(u<a&&a<o);return c},i.filter=a=>Jn(o=>{if(o>=o)for(;n(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),t&&(i.count=(a,o)=>(nl.setTime(+a),el.setTime(+o),n(nl),n(el),Math.floor(t(nl,el))),i.every=a=>(a=Math.floor(a),isFinite(a)&&a>0?a>1?i.filter(r?o=>r(o)%a==0:o=>i.count(0,o)%a==0):i:null)),i}const pi=Jn(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);pi.every=n=>(n=Math.floor(n),isFinite(n)&&n>0?n>1?Jn(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):pi:null);const v1=pi.range,Ca=1e3,He=6e4,Ot=60*He,Vt=24*Ot,tl=7*Vt,m1=30*Vt,rl=365*Vt,Rt=Jn(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*Ca)},(n,e)=>(e-n)/Ca,n=>n.getUTCSeconds()),y1=Rt.range,Vs=Jn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Ca)},(n,e)=>{n.setTime(+n+e*He)},(n,e)=>(e-n)/He,n=>n.getMinutes()),Dy=Vs.range,Rs=Jn(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*He)},(n,e)=>(e-n)/He,n=>n.getUTCMinutes()),jy=Rs.range,Ds=Jn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*Ca-n.getMinutes()*He)},(n,e)=>{n.setTime(+n+e*Ot)},(n,e)=>(e-n)/Ot,n=>n.getHours()),Ly=Ds.range,js=Jn(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*Ot)},(n,e)=>(e-n)/Ot,n=>n.getUTCHours()),qy=js.range,gi=Jn(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*He)/Vt,n=>n.getDate()-1),Fy=gi.range,ka=Jn(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Vt,n=>n.getUTCDate()-1),Uy=ka.range,il=Jn(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Vt,n=>Math.floor(n/Vt)),Yy=il.range;function zr(n){return Jn(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*He)/tl)}const vi=zr(0),Ia=zr(1),_1=zr(2),b1=zr(3),$r=zr(4),x1=zr(5),w1=zr(6),M1=vi.range,Hy=Ia.range,Gy=_1.range,Xy=b1.range,Wy=$r.range,Zy=x1.range,Ky=w1.range;function Pr(n){return Jn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/tl)}const mi=Pr(0),Na=Pr(1),E1=Pr(2),T1=Pr(3),Or=Pr(4),A1=Pr(5),S1=Pr(6),C1=mi.range,Jy=Na.range,Qy=E1.range,n_=T1.range,e_=Or.range,t_=A1.range,r_=S1.range,Ls=Jn(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+12*(e.getFullYear()-n.getFullYear()),n=>n.getMonth()),i_=Ls.range,qs=Jn(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+12*(e.getUTCFullYear()-n.getUTCFullYear()),n=>n.getUTCMonth()),a_=qs.range,yt=Jn(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());yt.every=n=>isFinite(n=Math.floor(n))&&n>0?Jn(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)}):null;const o_=yt.range,_t=Jn(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());_t.every=n=>isFinite(n=Math.floor(n))&&n>0?Jn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null;const s_=_t.range;function k1(n,e,t,r,i,a){const o=[[Rt,1,Ca],[Rt,5,5e3],[Rt,15,15e3],[Rt,30,3e4],[a,1,He],[a,5,5*He],[a,15,15*He],[a,30,30*He],[i,1,Ot],[i,3,3*Ot],[i,6,6*Ot],[i,12,12*Ot],[r,1,Vt],[r,2,2*Vt],[t,1,tl],[e,1,m1],[e,3,3*m1],[n,1,rl]];function s(c,u,f){const d=Math.abs(u-c)/f,l=ln(([,,y])=>y).right(o,d);if(l===o.length)return n.every(cr(c/rl,u/rl,f));if(l===0)return pi.every(Math.max(cr(c,u,f),1));const[g,x]=o[d/o[l-1][2]<o[l][2]/d?l-1:l];return g.every(x)}return[function(c,u,f){const d=u<c;d&&([c,u]=[u,c]);const l=f&&typeof f.range=="function"?f:s(c,u,f),g=l?l.range(c,+u+1):[];return d?g.reverse():g},s]}const[I1,N1]=k1(_t,qs,mi,il,js,Rs),[B1,z1]=k1(yt,Ls,vi,gi,Ds,Vs);function al(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function ol(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Ba(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function $1(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,o=n.shortDays,s=n.months,c=n.shortMonths,u=za(i),f=$a(i),d=za(a),l=$a(a),g=za(o),x=$a(o),y=za(s),w=$a(s),b=za(c),S=$a(c),A={a:function(U){return o[U.getDay()]},A:function(U){return a[U.getDay()]},b:function(U){return c[U.getMonth()]},B:function(U){return s[U.getMonth()]},c:null,d:j1,e:j1,f:I_,g:j_,G:q_,H:S_,I:C_,j:k_,L:L1,m:N_,M:B_,p:function(U){return i[+(U.getHours()>=12)]},q:function(U){return 1+~~(U.getMonth()/3)},Q:G1,s:X1,S:z_,u:$_,U:P_,V:O_,w:V_,W:R_,x:null,X:null,y:D_,Y:L_,Z:F_,"%":H1},E={a:function(U){return o[U.getUTCDay()]},A:function(U){return a[U.getUTCDay()]},b:function(U){return c[U.getUTCMonth()]},B:function(U){return s[U.getUTCMonth()]},c:null,d:F1,e:F1,f:G_,g:r2,G:a2,H:U_,I:Y_,j:H_,L:U1,m:X_,M:W_,p:function(U){return i[+(U.getUTCHours()>=12)]},q:function(U){return 1+~~(U.getUTCMonth()/3)},Q:G1,s:X1,S:Z_,u:K_,U:J_,V:Q_,w:n2,W:e2,x:null,X:null,y:t2,Y:i2,Z:o2,"%":H1},I={a:function(U,O,V){var j=g.exec(O.slice(V));return j?(U.w=x.get(j[0].toLowerCase()),V+j[0].length):-1},A:function(U,O,V){var j=d.exec(O.slice(V));return j?(U.w=l.get(j[0].toLowerCase()),V+j[0].length):-1},b:function(U,O,V){var j=b.exec(O.slice(V));return j?(U.m=S.get(j[0].toLowerCase()),V+j[0].length):-1},B:function(U,O,V){var j=y.exec(O.slice(V));return j?(U.m=w.get(j[0].toLowerCase()),V+j[0].length):-1},c:function(U,O,V){return W(U,e,O,V)},d:R1,e:R1,f:M_,g:V1,G:O1,H:D1,I:D1,j:__,L:w_,m:y_,M:b_,p:function(U,O,V){var j=u.exec(O.slice(V));return j?(U.p=f.get(j[0].toLowerCase()),V+j[0].length):-1},q:m_,Q:T_,s:A_,S:x_,u:h_,U:d_,V:p_,w:l_,W:g_,x:function(U,O,V){return W(U,t,O,V)},X:function(U,O,V){return W(U,r,O,V)},y:V1,Y:O1,Z:v_,"%":E_};function N(U,O){return function(V){var j,Z,B,L=[],X=-1,K=0,Q=U.length;for(V instanceof Date||(V=new Date(+V));++X<Q;)U.charCodeAt(X)===37&&(L.push(U.slice(K,X)),(Z=P1[j=U.charAt(++X)])!=null?j=U.charAt(++X):Z=j==="e"?" ":"0",(B=O[j])&&(j=B(V,Z)),L.push(j),K=X+1);return L.push(U.slice(K,X)),L.join("")}}function F(U,O){return function(V){var j,Z,B=Ba(1900,void 0,1);if(W(B,U,V+="",0)!=V.length)return null;if("Q"in B)return new Date(B.Q);if("s"in B)return new Date(1e3*B.s+("L"in B?B.L:0));if(O&&!("Z"in B)&&(B.Z=0),"p"in B&&(B.H=B.H%12+12*B.p),B.m===void 0&&(B.m="q"in B?B.q:0),"V"in B){if(B.V<1||B.V>53)return null;"w"in B||(B.w=1),"Z"in B?(Z=(j=ol(Ba(B.y,0,1))).getUTCDay(),j=Z>4||Z===0?Na.ceil(j):Na(j),j=ka.offset(j,7*(B.V-1)),B.y=j.getUTCFullYear(),B.m=j.getUTCMonth(),B.d=j.getUTCDate()+(B.w+6)%7):(Z=(j=al(Ba(B.y,0,1))).getDay(),j=Z>4||Z===0?Ia.ceil(j):Ia(j),j=gi.offset(j,7*(B.V-1)),B.y=j.getFullYear(),B.m=j.getMonth(),B.d=j.getDate()+(B.w+6)%7)}else("W"in B||"U"in B)&&("w"in B||(B.w="u"in B?B.u%7:"W"in B?1:0),Z="Z"in B?ol(Ba(B.y,0,1)).getUTCDay():al(Ba(B.y,0,1)).getDay(),B.m=0,B.d="W"in B?(B.w+6)%7+7*B.W-(Z+5)%7:B.w+7*B.U-(Z+6)%7);return"Z"in B?(B.H+=B.Z/100|0,B.M+=B.Z%100,ol(B)):al(B)}}function W(U,O,V,j){for(var Z,B,L=0,X=O.length,K=V.length;L<X;){if(j>=K)return-1;if((Z=O.charCodeAt(L++))===37){if(Z=O.charAt(L++),!(B=I[Z in P1?O.charAt(L++):Z])||(j=B(U,V,j))<0)return-1}else if(Z!=V.charCodeAt(j++))return-1}return j}return A.x=N(t,A),A.X=N(r,A),A.c=N(e,A),E.x=N(t,E),E.X=N(r,E),E.c=N(e,E),{format:function(U){var O=N(U+="",A);return O.toString=function(){return U},O},parse:function(U){var O=F(U+="",!1);return O.toString=function(){return U},O},utcFormat:function(U){var O=N(U+="",E);return O.toString=function(){return U},O},utcParse:function(U){var O=F(U+="",!0);return O.toString=function(){return U},O}}}var yi,P1={"-":"",_:" ",0:"0"},fe=/^\s*\d+/,u_=/^%/,c_=/[\\^$*+?|[\]().{}]/g;function Vn(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function f_(n){return n.replace(c_,"\\$&")}function za(n){return new RegExp("^(?:"+n.map(f_).join("|")+")","i")}function $a(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function l_(n,e,t){var r=fe.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function h_(n,e,t){var r=fe.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function d_(n,e,t){var r=fe.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function p_(n,e,t){var r=fe.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function g_(n,e,t){var r=fe.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function O1(n,e,t){var r=fe.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function V1(n,e,t){var r=fe.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function v_(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function m_(n,e,t){var r=fe.exec(e.slice(t,t+1));return r?(n.q=3*r[0]-3,t+r[0].length):-1}function y_(n,e,t){var r=fe.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function R1(n,e,t){var r=fe.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function __(n,e,t){var r=fe.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function D1(n,e,t){var r=fe.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function b_(n,e,t){var r=fe.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function x_(n,e,t){var r=fe.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function w_(n,e,t){var r=fe.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function M_(n,e,t){var r=fe.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function E_(n,e,t){var r=u_.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function T_(n,e,t){var r=fe.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function A_(n,e,t){var r=fe.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function j1(n,e){return Vn(n.getDate(),e,2)}function S_(n,e){return Vn(n.getHours(),e,2)}function C_(n,e){return Vn(n.getHours()%12||12,e,2)}function k_(n,e){return Vn(1+gi.count(yt(n),n),e,3)}function L1(n,e){return Vn(n.getMilliseconds(),e,3)}function I_(n,e){return L1(n,e)+"000"}function N_(n,e){return Vn(n.getMonth()+1,e,2)}function B_(n,e){return Vn(n.getMinutes(),e,2)}function z_(n,e){return Vn(n.getSeconds(),e,2)}function $_(n){var e=n.getDay();return e===0?7:e}function P_(n,e){return Vn(vi.count(yt(n)-1,n),e,2)}function q1(n){var e=n.getDay();return e>=4||e===0?$r(n):$r.ceil(n)}function O_(n,e){return n=q1(n),Vn($r.count(yt(n),n)+(yt(n).getDay()===4),e,2)}function V_(n){return n.getDay()}function R_(n,e){return Vn(Ia.count(yt(n)-1,n),e,2)}function D_(n,e){return Vn(n.getFullYear()%100,e,2)}function j_(n,e){return Vn((n=q1(n)).getFullYear()%100,e,2)}function L_(n,e){return Vn(n.getFullYear()%1e4,e,4)}function q_(n,e){var t=n.getDay();return Vn((n=t>=4||t===0?$r(n):$r.ceil(n)).getFullYear()%1e4,e,4)}function F_(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Vn(e/60|0,"0",2)+Vn(e%60,"0",2)}function F1(n,e){return Vn(n.getUTCDate(),e,2)}function U_(n,e){return Vn(n.getUTCHours(),e,2)}function Y_(n,e){return Vn(n.getUTCHours()%12||12,e,2)}function H_(n,e){return Vn(1+ka.count(_t(n),n),e,3)}function U1(n,e){return Vn(n.getUTCMilliseconds(),e,3)}function G_(n,e){return U1(n,e)+"000"}function X_(n,e){return Vn(n.getUTCMonth()+1,e,2)}function W_(n,e){return Vn(n.getUTCMinutes(),e,2)}function Z_(n,e){return Vn(n.getUTCSeconds(),e,2)}function K_(n){var e=n.getUTCDay();return e===0?7:e}function J_(n,e){return Vn(mi.count(_t(n)-1,n),e,2)}function Y1(n){var e=n.getUTCDay();return e>=4||e===0?Or(n):Or.ceil(n)}function Q_(n,e){return n=Y1(n),Vn(Or.count(_t(n),n)+(_t(n).getUTCDay()===4),e,2)}function n2(n){return n.getUTCDay()}function e2(n,e){return Vn(Na.count(_t(n)-1,n),e,2)}function t2(n,e){return Vn(n.getUTCFullYear()%100,e,2)}function r2(n,e){return Vn((n=Y1(n)).getUTCFullYear()%100,e,2)}function i2(n,e){return Vn(n.getUTCFullYear()%1e4,e,4)}function a2(n,e){var t=n.getUTCDay();return Vn((n=t>=4||t===0?Or(n):Or.ceil(n)).getUTCFullYear()%1e4,e,4)}function o2(){return"+0000"}function H1(){return"%"}function G1(n){return+n}function X1(n){return Math.floor(+n/1e3)}function W1(n){return yi=$1(n),p.timeFormat=yi.format,p.timeParse=yi.parse,p.utcFormat=yi.utcFormat,p.utcParse=yi.utcParse,yi}p.timeFormat=void 0,p.timeParse=void 0,p.utcFormat=void 0,p.utcParse=void 0,W1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Z1="%Y-%m-%dT%H:%M:%S.%LZ",s2=Date.prototype.toISOString?function(n){return n.toISOString()}:p.utcFormat(Z1),u2=s2,c2=+new Date("2000-01-01T00:00:00.000Z")?function(n){var e=new Date(n);return isNaN(e)?null:e}:p.utcParse(Z1),f2=c2;function l2(n){return new Date(n)}function h2(n){return n instanceof Date?+n:+new Date(+n)}function sl(n,e,t,r,i,a,o,s,c,u){var f=Wf(),d=f.invert,l=f.domain,g=u(".%L"),x=u(":%S"),y=u("%I:%M"),w=u("%I %p"),b=u("%a %d"),S=u("%b %d"),A=u("%B"),E=u("%Y");function I(N){return(c(N)<N?g:s(N)<N?x:o(N)<N?y:a(N)<N?w:r(N)<N?i(N)<N?b:S:t(N)<N?A:E)(N)}return f.invert=function(N){return new Date(d(N))},f.domain=function(N){return arguments.length?l(Array.from(N,h2)):l().map(l2)},f.ticks=function(N){var F=l();return n(F[0],F[F.length-1],N??10)},f.tickFormat=function(N,F){return F==null?I:u(F)},f.nice=function(N){var F=l();return N&&typeof N.range=="function"||(N=e(F[0],F[F.length-1],N??10)),N?l(u1(F,N)):f},f.copy=function(){return Sa(f,sl(n,e,t,r,i,a,o,s,c,u))},f}function Fs(){var n,e,t,r,i,a=0,o=1,s=Ae,c=!1;function u(d){return d==null||isNaN(d=+d)?i:s(t===0?.5:(d=(r(d)-n)*t,c?Math.max(0,Math.min(1,d)):d))}function f(d){return function(l){var g,x;return arguments.length?([g,x]=l,s=d(g,x),u):[s(0),s(1)]}}return u.domain=function(d){return arguments.length?([a,o]=d,n=r(a=+a),e=r(o=+o),t=n===e?0:1/(e-n),u):[a,o]},u.clamp=function(d){return arguments.length?(c=!!d,u):c},u.interpolator=function(d){return arguments.length?(s=d,u):s},u.range=f(Wt),u.rangeRound=f(To),u.unknown=function(d){return arguments.length?(i=d,u):i},function(d){return r=d,n=d(a),e=d(o),t=n===e?0:1/(e-n),u}}function tr(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function ul(){var n=Jf(Fs());return n.copy=function(){return tr(n,ul()).exponent(n.exponent())},Pt.apply(n,arguments)}function Us(){var n,e,t,r,i,a,o,s=0,c=.5,u=1,f=1,d=Ae,l=!1;function g(y){return isNaN(y=+y)?o:(y=.5+((y=+a(y))-e)*(f*y<f*e?r:i),d(l?Math.max(0,Math.min(1,y)):y))}function x(y){return function(w){var b,S,A;return arguments.length?([b,S,A]=w,d=fh(y,[b,S,A]),g):[d(0),d(.5),d(1)]}}return g.domain=function(y){return arguments.length?([s,c,u]=y,n=a(s=+s),e=a(c=+c),t=a(u=+u),r=n===e?0:.5/(e-n),i=e===t?0:.5/(t-e),f=e<n?-1:1,g):[s,c,u]},g.clamp=function(y){return arguments.length?(l=!!y,g):l},g.interpolator=function(y){return arguments.length?(d=y,g):d},g.range=x(Wt),g.rangeRound=x(To),g.unknown=function(y){return arguments.length?(o=y,g):o},function(y){return a=y,n=y(s),e=y(c),t=y(u),r=n===e?0:.5/(e-n),i=e===t?0:.5/(t-e),f=e<n?-1:1,g}}function cl(){var n=Jf(Us());return n.copy=function(){return tr(n,cl()).exponent(n.exponent())},Pt.apply(n,arguments)}function Cn(n){for(var e=n.length/6|0,t=new Array(e),r=0;r<e;)t[r]="#"+n.slice(6*r,6*++r);return t}var d2=Cn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),p2=Cn("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),g2=Cn("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),v2=Cn("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),m2=Cn("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),y2=Cn("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),_2=Cn("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),b2=Cn("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),x2=Cn("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),w2=Cn("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Un=n=>Wl(n[n.length-1]),K1=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Cn),M2=Un(K1),J1=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Cn),E2=Un(J1),Q1=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Cn),T2=Un(Q1),np=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Cn),A2=Un(np),ep=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Cn),S2=Un(ep),tp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Cn),C2=Un(tp),rp=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Cn),k2=Un(rp),ip=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Cn),I2=Un(ip),ap=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Cn),N2=Un(ap),op=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Cn),B2=Un(op),sp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Cn),z2=Un(sp),up=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Cn),$2=Un(up),cp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Cn),P2=Un(cp),fp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Cn),O2=Un(fp),lp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Cn),V2=Un(lp),hp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Cn),R2=Un(hp),dp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Cn),D2=Un(dp),pp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Cn),j2=Un(pp),gp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Cn),L2=Un(gp),vp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Cn),q2=Un(vp),mp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Cn),F2=Un(mp),yp=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Cn),U2=Un(yp),_p=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Cn),Y2=Un(_p),bp=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Cn),H2=Un(bp),xp=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Cn),G2=Un(xp),wp=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Cn),X2=Un(wp),Mp=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Cn),W2=Un(Mp),Z2=So(nt(300,.5,0),nt(-240,.5,1)),K2=So(nt(-100,.75,.35),nt(80,1.5,.8)),J2=So(nt(260,.75,.35),nt(80,1.5,.8)),Ys=nt(),Hs=Gr(),Q2=Math.PI/3,nb=2*Math.PI/3;function Gs(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}var eb=Gs(Cn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),tb=Gs(Cn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),rb=Gs(Cn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ib=Gs(Cn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function An(n){return function(){return n}}const Ep=Math.abs,ge=Math.atan2,Dt=Math.cos,ab=Math.max,_i=Math.min,Ie=Math.sin,Yn=Math.sqrt,ve=1e-12,rr=Math.PI,Xs=rr/2,ir=2*rr;function Tp(n){return n>=1?Xs:n<=-1?-Xs:Math.asin(n)}function Pa(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new ta(e)}function ob(n){return n.innerRadius}function sb(n){return n.outerRadius}function ub(n){return n.startAngle}function cb(n){return n.endAngle}function fb(n){return n&&n.padAngle}function Ws(n,e,t,r,i,a,o){var s=n-t,c=e-r,u=(o?a:-a)/Yn(s*s+c*c),f=u*c,d=-u*s,l=n+f,g=e+d,x=t+f,y=r+d,w=(l+x)/2,b=(g+y)/2,S=x-l,A=y-g,E=S*S+A*A,I=i-a,N=l*y-x*g,F=(A<0?-1:1)*Yn(ab(0,I*I*E-N*N)),W=(N*A-S*F)/E,U=(-N*S-A*F)/E,O=(N*A+S*F)/E,V=(-N*S+A*F)/E,j=W-w,Z=U-b,B=O-w,L=V-b;return j*j+Z*Z>B*B+L*L&&(W=O,U=V),{cx:W,cy:U,x01:-f,y01:-d,x11:W*(i/I-1),y11:U*(i/I-1)}}var lb=Array.prototype.slice;function Zs(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Ap(n){this._context=n}function Ks(n){return new Ap(n)}function fl(n){return n[0]}function ll(n){return n[1]}function hl(n,e){var t=An(!0),r=null,i=Ks,a=null,o=Pa(s);function s(c){var u,f,d,l=(c=Zs(c)).length,g=!1;for(r==null&&(a=i(d=o())),u=0;u<=l;++u)!(u<l&&t(f=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+n(f,u,c),+e(f,u,c));if(d)return a=null,d+""||null}return n=typeof n=="function"?n:n===void 0?fl:An(n),e=typeof e=="function"?e:e===void 0?ll:An(e),s.x=function(c){return arguments.length?(n=typeof c=="function"?c:An(+c),s):n},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:An(+c),s):e},s.defined=function(c){return arguments.length?(t=typeof c=="function"?c:An(!!c),s):t},s.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),s):r},s}function Sp(n,e,t){var r=null,i=An(!0),a=null,o=Ks,s=null,c=Pa(u);function u(d){var l,g,x,y,w,b=(d=Zs(d)).length,S=!1,A=new Array(b),E=new Array(b);for(a==null&&(s=o(w=c())),l=0;l<=b;++l){if(!(l<b&&i(y=d[l],l,d))===S)if(S=!S)g=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),x=l-1;x>=g;--x)s.point(A[x],E[x]);s.lineEnd(),s.areaEnd()}S&&(A[l]=+n(y,l,d),E[l]=+e(y,l,d),s.point(r?+r(y,l,d):A[l],t?+t(y,l,d):E[l]))}if(w)return s=null,w+""||null}function f(){return hl().defined(i).curve(o).context(a)}return n=typeof n=="function"?n:n===void 0?fl:An(+n),e=typeof e=="function"?e:An(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?ll:An(+t),u.x=function(d){return arguments.length?(n=typeof d=="function"?d:An(+d),r=null,u):n},u.x0=function(d){return arguments.length?(n=typeof d=="function"?d:An(+d),u):n},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:An(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:An(+d),t=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:An(+d),u):e},u.y1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:An(+d),u):t},u.lineX0=u.lineY0=function(){return f().x(n).y(e)},u.lineY1=function(){return f().x(n).y(t)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:An(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,a!=null&&(s=o(a)),u):o},u.context=function(d){return arguments.length?(d==null?a=s=null:s=o(a=d),u):a},u}function hb(n,e){return e<n?-1:e>n?1:e>=n?0:NaN}function db(n){return n}Ap.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e)}}};var Cp=dl(Ks);function kp(n){this._curve=n}function dl(n){function e(t){return new kp(n(t))}return e._curve=n,e}function Oa(n){var e=n.curve;return n.angle=n.x,delete n.x,n.radius=n.y,delete n.y,n.curve=function(t){return arguments.length?e(dl(t)):e()._curve},n}function Ip(){return Oa(hl().curve(Cp))}function Np(){var n=Sp().curve(Cp),e=n.curve,t=n.lineX0,r=n.lineX1,i=n.lineY0,a=n.lineY1;return n.angle=n.x,delete n.x,n.startAngle=n.x0,delete n.x0,n.endAngle=n.x1,delete n.x1,n.radius=n.y,delete n.y,n.innerRadius=n.y0,delete n.y0,n.outerRadius=n.y1,delete n.y1,n.lineStartAngle=function(){return Oa(t())},delete n.lineX0,n.lineEndAngle=function(){return Oa(r())},delete n.lineX1,n.lineInnerRadius=function(){return Oa(i())},delete n.lineY0,n.lineOuterRadius=function(){return Oa(a())},delete n.lineY1,n.curve=function(o){return arguments.length?e(dl(o)):e()._curve},n}function Va(n,e){return[(e=+e)*Math.cos(n-=Math.PI/2),e*Math.sin(n)]}kp.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(n,e){this._curve.point(e*Math.sin(n),e*-Math.cos(n))}};class Bp{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}class pb{constructor(e){this._context=e}lineStart(){this._point=0}lineEnd(){}point(e,t){if(e=+e,t=+t,this._point===0)this._point=1;else{const r=Va(this._x0,this._y0),i=Va(this._x0,this._y0=(this._y0+t)/2),a=Va(e,this._y0),o=Va(e,t);this._context.moveTo(...r),this._context.bezierCurveTo(...i,...a,...o)}this._x0=e,this._y0=t}}function zp(n){return new Bp(n,!0)}function $p(n){return new Bp(n,!1)}function gb(n){return new pb(n)}function vb(n){return n.source}function mb(n){return n.target}function Js(n){let e=vb,t=mb,r=fl,i=ll,a=null,o=null,s=Pa(c);function c(){let u;const f=lb.call(arguments),d=e.apply(this,f),l=t.apply(this,f);if(a==null&&(o=n(u=s())),o.lineStart(),f[0]=d,o.point(+r.apply(this,f),+i.apply(this,f)),f[0]=l,o.point(+r.apply(this,f),+i.apply(this,f)),o.lineEnd(),u)return o=null,u+""||null}return c.source=function(u){return arguments.length?(e=u,c):e},c.target=function(u){return arguments.length?(t=u,c):t},c.x=function(u){return arguments.length?(r=typeof u=="function"?u:An(+u),c):r},c.y=function(u){return arguments.length?(i=typeof u=="function"?u:An(+u),c):i},c.context=function(u){return arguments.length?(u==null?a=o=null:o=n(a=u),c):a},c}const yb=Yn(3);var Pp={draw(n,e){const t=.59436*Yn(e+_i(e/28,.75)),r=t/2,i=r*yb;n.moveTo(0,t),n.lineTo(0,-t),n.moveTo(-i,-r),n.lineTo(i,r),n.moveTo(-i,r),n.lineTo(i,-r)}},Qs={draw(n,e){const t=Yn(e/rr);n.moveTo(t,0),n.arc(0,0,t,0,ir)}},Op={draw(n,e){const t=Yn(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}};const Vp=Yn(1/3),_b=2*Vp;var Rp={draw(n,e){const t=Yn(e/_b),r=t*Vp;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},Dp={draw(n,e){const t=.62625*Yn(e);n.moveTo(0,-t),n.lineTo(t,0),n.lineTo(0,t),n.lineTo(-t,0),n.closePath()}},jp={draw(n,e){const t=.87559*Yn(e-_i(e/7,2));n.moveTo(-t,0),n.lineTo(t,0),n.moveTo(0,t),n.lineTo(0,-t)}},Lp={draw(n,e){const t=Yn(e),r=-t/2;n.rect(r,r,t,t)}},qp={draw(n,e){const t=.4431*Yn(e);n.moveTo(t,t),n.lineTo(t,-t),n.lineTo(-t,-t),n.lineTo(-t,t),n.closePath()}};const Fp=Ie(rr/10)/Ie(7*rr/10),bb=Ie(ir/10)*Fp,xb=-Dt(ir/10)*Fp;var Up={draw(n,e){const t=Yn(.8908130915292852*e),r=bb*t,i=xb*t;n.moveTo(0,-t),n.lineTo(r,i);for(let a=1;a<5;++a){const o=ir*a/5,s=Dt(o),c=Ie(o);n.lineTo(c*t,-s*t),n.lineTo(s*r-c*i,c*r+s*i)}n.closePath()}};const pl=Yn(3);var Yp={draw(n,e){const t=-Yn(e/(3*pl));n.moveTo(0,2*t),n.lineTo(-pl*t,-t),n.lineTo(pl*t,-t),n.closePath()}};const wb=Yn(3);var Hp={draw(n,e){const t=.6824*Yn(e),r=t/2,i=t*wb/2;n.moveTo(0,-t),n.lineTo(i,r),n.lineTo(-i,r),n.closePath()}};const Ge=-.5,Xe=Yn(3)/2,gl=1/Yn(12),Mb=3*(gl/2+1);var Gp={draw(n,e){const t=Yn(e/Mb),r=t/2,i=t*gl,a=r,o=t*gl+t,s=-a,c=o;n.moveTo(r,i),n.lineTo(a,o),n.lineTo(s,c),n.lineTo(Ge*r-Xe*i,Xe*r+Ge*i),n.lineTo(Ge*a-Xe*o,Xe*a+Ge*o),n.lineTo(Ge*s-Xe*c,Xe*s+Ge*c),n.lineTo(Ge*r+Xe*i,Ge*i-Xe*r),n.lineTo(Ge*a+Xe*o,Ge*o-Xe*a),n.lineTo(Ge*s+Xe*c,Ge*c-Xe*s),n.closePath()}},vl={draw(n,e){const t=.6189*Yn(e-_i(e/6,1.7));n.moveTo(-t,-t),n.lineTo(t,t),n.moveTo(-t,t),n.lineTo(t,-t)}};const Xp=[Qs,Op,Rp,Lp,Up,Yp,Gp],Eb=[Qs,jp,vl,Hp,Pp,qp,Dp];function ar(){}function nu(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function eu(n){this._context=n}function Wp(n){this._context=n}function Zp(n){this._context=n}function Kp(n,e){this._basis=new eu(n),this._beta=e}eu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nu(this,n,e)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}},Wp.prototype={areaStart:ar,areaEnd:ar,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:nu(this,n,e)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}},Zp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:nu(this,n,e)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}},Kp.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,e=this._y,t=n.length-1;if(t>0)for(var r,i=n[0],a=e[0],o=n[t]-i,s=e[t]-a,c=-1;++c<=t;)r=c/t,this._basis.point(this._beta*n[c]+(1-this._beta)*(i+r*o),this._beta*e[c]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(n,e){this._x.push(+n),this._y.push(+e)}};var Tb=function n(e){function t(r){return e===1?new eu(r):new Kp(r,e)}return t.beta=function(r){return n(+r)},t}(.85);function tu(n,e,t){n._context.bezierCurveTo(n._x1+n._k*(n._x2-n._x0),n._y1+n._k*(n._y2-n._y0),n._x2+n._k*(n._x1-e),n._y2+n._k*(n._y1-t),n._x2,n._y2)}function ml(n,e){this._context=n,this._k=(1-e)/6}ml.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:tu(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2,this._x1=n,this._y1=e;break;case 2:this._point=3;default:tu(this,n,e)}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ab=function n(e){function t(r){return new ml(r,e)}return t.tension=function(r){return n(+r)},t}(0);function yl(n,e){this._context=n,this._k=(1-e)/6}yl.prototype={areaStart:ar,areaEnd:ar,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x3=n,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=e);break;case 2:this._point=3,this._x5=n,this._y5=e;break;default:tu(this,n,e)}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Sb=function n(e){function t(r){return new yl(r,e)}return t.tension=function(r){return n(+r)},t}(0);function _l(n,e){this._context=n,this._k=(1-e)/6}_l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tu(this,n,e)}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Cb=function n(e){function t(r){return new _l(r,e)}return t.tension=function(r){return n(+r)},t}(0);function bl(n,e,t){var r=n._x1,i=n._y1,a=n._x2,o=n._y2;if(n._l01_a>ve){var s=2*n._l01_2a+3*n._l01_a*n._l12_a+n._l12_2a,c=3*n._l01_a*(n._l01_a+n._l12_a);r=(r*s-n._x0*n._l12_2a+n._x2*n._l01_2a)/c,i=(i*s-n._y0*n._l12_2a+n._y2*n._l01_2a)/c}if(n._l23_a>ve){var u=2*n._l23_2a+3*n._l23_a*n._l12_a+n._l12_2a,f=3*n._l23_a*(n._l23_a+n._l12_a);a=(a*u+n._x1*n._l23_2a-e*n._l12_2a)/f,o=(o*u+n._y1*n._l23_2a-t*n._l12_2a)/f}n._context.bezierCurveTo(r,i,a,o,n._x2,n._y2)}function Jp(n,e){this._context=n,this._alpha=e}Jp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){if(n=+n,e=+e,this._point){var t=this._x2-n,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3;default:bl(this,n,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var kb=function n(e){function t(r){return e?new Jp(r,e):new ml(r,0)}return t.alpha=function(r){return n(+r)},t}(.5);function Qp(n,e){this._context=n,this._alpha=e}Qp.prototype={areaStart:ar,areaEnd:ar,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(n,e){if(n=+n,e=+e,this._point){var t=this._x2-n,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=n,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=e);break;case 2:this._point=3,this._x5=n,this._y5=e;break;default:bl(this,n,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ib=function n(e){function t(r){return e?new Qp(r,e):new yl(r,0)}return t.alpha=function(r){return n(+r)},t}(.5);function ng(n,e){this._context=n,this._alpha=e}ng.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){if(n=+n,e=+e,this._point){var t=this._x2-n,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bl(this,n,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Nb=function n(e){function t(r){return e?new ng(r,e):new _l(r,0)}return t.alpha=function(r){return n(+r)},t}(.5);function eg(n){this._context=n}function tg(n){return n<0?-1:1}function rg(n,e,t){var r=n._x1-n._x0,i=e-n._x1,a=(n._y1-n._y0)/(r||i<0&&-0),o=(t-n._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(tg(a)+tg(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function ig(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function xl(n,e,t){var r=n._x0,i=n._y0,a=n._x1,o=n._y1,s=(a-r)/3;n._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*t,a,o)}function ru(n){this._context=n}function ag(n){this._context=new og(n)}function og(n){this._context=n}function sg(n){this._context=n}function ug(n){var e,t,r=n.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=n[0]+2*n[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*n[e]+2*n[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*n[r-1]+n[r],e=1;e<r;++e)t=i[e]/a[e-1],a[e]-=t,o[e]-=t*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(n[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*n[e+1]-i[e+1];return[i,a]}function iu(n,e){this._context=n,this._t=e}function bi(n,e){if((i=n.length)>1)for(var t,r,i,a=1,o=n[e[0]],s=o.length;a<i;++a)for(r=o,o=n[e[a]],t=0;t<s;++t)o[t][1]+=o[t][0]=isNaN(r[t][1])?r[t][0]:r[t][1]}function xi(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function Bb(n,e){return n[e]}function zb(n){const e=[];return e.key=n,e}function cg(n){var e=n.map($b);return xi(n).sort(function(t,r){return e[t]-e[r]})}function $b(n){for(var e,t=-1,r=0,i=n.length,a=-1/0;++t<i;)(e=+n[t][1])>a&&(a=e,r=t);return r}function fg(n){var e=n.map(lg);return xi(n).sort(function(t,r){return e[t]-e[r]})}function lg(n){for(var e,t=0,r=-1,i=n.length;++r<i;)(e=+n[r][1])&&(t+=e);return t}eg.prototype={areaStart:ar,areaEnd:ar,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}},ru.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xl(this,this._t0,ig(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(e=+e,(n=+n)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,xl(this,ig(this,t=rg(this,n,e)),t);break;default:xl(this,this._t0,t=rg(this,n,e))}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}},(ag.prototype=Object.create(ru.prototype)).point=function(n,e){ru.prototype.point.call(this,e,n)},og.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,a){this._context.bezierCurveTo(e,n,r,t,a,i)}},sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=ug(n),i=ug(e),a=0,o=1;o<t;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],n[o],e[o]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}},iu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}}this._x=n,this._y=e}};var au=n=>()=>n;function Pb(n,{sourceEvent:e,target:t,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function bt(n,e,t){this.k=n,this.x=e,this.y=t}bt.prototype={constructor:bt,scale:function(n){return n===1?this:new bt(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new bt(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ou=new bt(1,0,0);function hg(n){for(;!n.__zoom;)if(!(n=n.parentNode))return ou;return n.__zoom}function wl(n){n.stopImmediatePropagation()}function Ra(n){n.preventDefault(),n.stopImmediatePropagation()}function Ob(n){return!(n.ctrlKey&&n.type!=="wheel"||n.button)}function Vb(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n).hasAttribute("viewBox")?[[(n=n.viewBox.baseVal).x,n.y],[n.x+n.width,n.y+n.height]]:[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]:[[0,0],[n.clientWidth,n.clientHeight]]}function dg(){return this.__zoom||ou}function Rb(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function Db(){return navigator.maxTouchPoints||"ontouchstart"in this}function jb(n,e,t){var r=n.invertX(e[0][0])-t[0][0],i=n.invertX(e[1][0])-t[1][0],a=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}hg.prototype=bt.prototype,p.Adder=Hn,p.Delaunay=Oc,p.FormatSpecifier=Ho,p.InternMap=Tt,p.InternSet=Ke,p.Node=Nr,p.Path=ta,p.Voronoi=Wh,p.ZoomTransform=bt,p.active=function(n,e){var t,r,i=n.__transition;if(i){for(r in e=e==null?null:e+"",i)if((t=i[r]).state>lc&&t.name===e)return new dt([[n]],uv,e,+r)}return null},p.arc=function(){var n=ob,e=sb,t=An(0),r=null,i=ub,a=cb,o=fb,s=null,c=Pa(u);function u(){var f,d,l=+n.apply(this,arguments),g=+e.apply(this,arguments),x=i.apply(this,arguments)-Xs,y=a.apply(this,arguments)-Xs,w=Ep(y-x),b=y>x;if(s||(s=f=c()),g<l&&(d=g,g=l,l=d),g>ve)if(w>ir-ve)s.moveTo(g*Dt(x),g*Ie(x)),s.arc(0,0,g,x,y,!b),l>ve&&(s.moveTo(l*Dt(y),l*Ie(y)),s.arc(0,0,l,y,x,b));else{var S,A,E=x,I=y,N=x,F=y,W=w,U=w,O=o.apply(this,arguments)/2,V=O>ve&&(r?+r.apply(this,arguments):Yn(l*l+g*g)),j=_i(Ep(g-l)/2,+t.apply(this,arguments)),Z=j,B=j;if(V>ve){var L=Tp(V/l*Ie(O)),X=Tp(V/g*Ie(O));(W-=2*L)>ve?(N+=L*=b?1:-1,F-=L):(W=0,N=F=(x+y)/2),(U-=2*X)>ve?(E+=X*=b?1:-1,I-=X):(U=0,E=I=(x+y)/2)}var K=g*Dt(E),Q=g*Ie(E),rn=l*Dt(F),sn=l*Ie(F);if(j>ve){var an,hn=g*Dt(I),En=g*Ie(I),vn=l*Dt(N),_n=l*Ie(N);if(w<rr)if(an=function(xt,ot,su,Sn,Dn,or,wt,Lb){var pg=su-xt,gg=Sn-ot,vg=wt-Dn,mg=Lb-or,Da=mg*pg-vg*gg;if(!(Da*Da<ve))return[xt+(Da=(vg*(ot-or)-mg*(xt-Dn))/Da)*pg,ot+Da*gg]}(K,Q,vn,_n,hn,En,rn,sn)){var Ln=K-an[0],Tn=Q-an[1],Kn=hn-an[0],Oe=En-an[1],at=1/Ie(function(xt){return xt>1?0:xt<-1?rr:Math.acos(xt)}((Ln*Kn+Tn*Oe)/(Yn(Ln*Ln+Tn*Tn)*Yn(Kn*Kn+Oe*Oe)))/2),jt=Yn(an[0]*an[0]+an[1]*an[1]);Z=_i(j,(l-jt)/(at-1)),B=_i(j,(g-jt)/(at+1))}else Z=B=0}U>ve?B>ve?(S=Ws(vn,_n,K,Q,g,B,b),A=Ws(hn,En,rn,sn,g,B,b),s.moveTo(S.cx+S.x01,S.cy+S.y01),B<j?s.arc(S.cx,S.cy,B,ge(S.y01,S.x01),ge(A.y01,A.x01),!b):(s.arc(S.cx,S.cy,B,ge(S.y01,S.x01),ge(S.y11,S.x11),!b),s.arc(0,0,g,ge(S.cy+S.y11,S.cx+S.x11),ge(A.cy+A.y11,A.cx+A.x11),!b),s.arc(A.cx,A.cy,B,ge(A.y11,A.x11),ge(A.y01,A.x01),!b))):(s.moveTo(K,Q),s.arc(0,0,g,E,I,!b)):s.moveTo(K,Q),l>ve&&W>ve?Z>ve?(S=Ws(rn,sn,hn,En,l,-Z,b),A=Ws(K,Q,vn,_n,l,-Z,b),s.lineTo(S.cx+S.x01,S.cy+S.y01),Z<j?s.arc(S.cx,S.cy,Z,ge(S.y01,S.x01),ge(A.y01,A.x01),!b):(s.arc(S.cx,S.cy,Z,ge(S.y01,S.x01),ge(S.y11,S.x11),!b),s.arc(0,0,l,ge(S.cy+S.y11,S.cx+S.x11),ge(A.cy+A.y11,A.cx+A.x11),b),s.arc(A.cx,A.cy,Z,ge(A.y11,A.x11),ge(A.y01,A.x01),!b))):s.arc(0,0,l,F,N,b):s.lineTo(rn,sn)}else s.moveTo(0,0);if(s.closePath(),f)return s=null,f+""||null}return u.centroid=function(){var f=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-rr/2;return[Dt(d)*f,Ie(d)*f]},u.innerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:An(+f),u):n},u.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:An(+f),u):e},u.cornerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:An(+f),u):t},u.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:An(+f),u):r},u.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:An(+f),u):i},u.endAngle=function(f){return arguments.length?(a=typeof f=="function"?f:An(+f),u):a},u.padAngle=function(f){return arguments.length?(o=typeof f=="function"?f:An(+f),u):o},u.context=function(f){return arguments.length?(s=f??null,u):s},u},p.area=Sp,p.areaRadial=Np,p.ascending=$,p.autoType=function(n){for(var e in n){var t,r,i=n[e].trim();if(i)if(i==="true")i=!0;else if(i==="false")i=!1;else if(i==="NaN")i=NaN;else if(isNaN(t=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;rm&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=t;else i=null;n[e]=i}return n},p.axisBottom=function(n){return Ht(Yt,n)},p.axisLeft=function(n){return Ht(pr,n)},p.axisRight=function(n){return Ht(Ut,n)},p.axisTop=function(n){return Ht(dr,n)},p.bin=Za,p.bisect=Ze,p.bisectCenter=Re,p.bisectLeft=We,p.bisectRight=Mt,p.bisector=ln,p.blob=function(n,e){return fetch(n,e).then(im)},p.blur=function(n,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let t=n.length;if(!((t=Math.floor(t))>=0))throw new RangeError("invalid length");if(!t||!e)return n;const r=sr(e),i=n.slice();return r(n,i,0,t,1),r(i,n,0,t,1),r(n,i,0,t,1),n},p.blur2=Vr,p.blurImage=ja,p.brush=function(){return Ec(fv)},p.brushSelection=function(n){var e=n.__brush;return e?e.dim.output(e.selection):null},p.brushX=function(){return Ec(Oo)},p.brushY=function(){return Ec(Vo)},p.buffer=function(n,e){return fetch(n,e).then(am)},p.chord=function(){return Sc(!1,!1)},p.chordDirected=function(){return Sc(!0,!1)},p.chordTranspose=function(){return Sc(!1,!0)},p.cluster=function(){var n=ny,e=1,t=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(l){var g=l.children;g?(l.x=function(x){return x.reduce(ey,0)/x.length}(g),l.y=function(x){return 1+x.reduce(ty,0)}(g)):(l.x=o?s+=n(l,o):0,l.y=0,o=l)});var c=function(l){for(var g;g=l.children;)l=g[0];return l}(a),u=function(l){for(var g;g=l.children;)l=g[g.length-1];return l}(a),f=c.x-n(c,u)/2,d=u.x+n(u,c)/2;return a.eachAfter(r?function(l){l.x=(l.x-a.x)*e,l.y=(a.y-l.y)*t}:function(l){l.x=(l.x-f)/(d-f)*e,l.y=(1-(a.y?l.y/a.y:1))*t})}return i.separation=function(a){return arguments.length?(n=a,i):n},i.size=function(a){return arguments.length?(r=!1,e=+a[0],t=+a[1],i):r?null:[e,t]},i.nodeSize=function(a){return arguments.length?(r=!0,e=+a[0],t=+a[1],i):r?[e,t]:null},i},p.color=Xt,p.contourDensity=function(){var n=Iv,e=Nv,t=Bv,r=960,i=500,a=20,o=2,s=3*a,c=r+2*s>>o,u=i+2*s>>o,f=Kt(20);function d(S){var A=new Float32Array(c*u),E=Math.pow(2,-o),I=-1;for(const Z of S){var N=(n(Z,++I,S)+s)*E,F=(e(Z,I,S)+s)*E,W=+t(Z,I,S);if(W&&N>=0&&N<c&&F>=0&&F<u){var U=Math.floor(N),O=Math.floor(F),V=N-U-.5,j=F-O-.5;A[U+O*c]+=(1-V)*(1-j)*W,A[U+1+O*c]+=V*(1-j)*W,A[U+1+(O+1)*c]+=V*j*W,A[U+(O+1)*c]+=(1-V)*j*W}}return Vr({data:A,width:c,height:u},a*E),A}function l(S){var A=d(S),E=f(A),I=Math.pow(2,2*o);return Array.isArray(E)||(E=St(Number.MIN_VALUE,fr(A)/I,E)),Nc().size([c,u]).thresholds(E.map(N=>N*I))(A).map((N,F)=>(N.value=+E[F],g(N)))}function g(S){return S.coordinates.forEach(x),S}function x(S){S.forEach(y)}function y(S){S.forEach(w)}function w(S){S[0]=S[0]*Math.pow(2,o)-s,S[1]=S[1]*Math.pow(2,o)-s}function b(){return c=r+2*(s=3*a)>>o,u=i+2*s>>o,l}return l.contours=function(S){var A=d(S),E=Nc().size([c,u]),I=Math.pow(2,2*o),N=F=>{F=+F;var W=g(E.contour(A,F*I));return W.value=F,W};return Object.defineProperty(N,"max",{get:()=>fr(A)/I}),N},l.x=function(S){return arguments.length?(n=typeof S=="function"?S:Kt(+S),l):n},l.y=function(S){return arguments.length?(e=typeof S=="function"?S:Kt(+S),l):e},l.weight=function(S){return arguments.length?(t=typeof S=="function"?S:Kt(+S),l):t},l.size=function(S){if(!arguments.length)return[r,i];var A=+S[0],E=+S[1];if(!(A>=0&&E>=0))throw new Error("invalid size");return r=A,i=E,b()},l.cellSize=function(S){if(!arguments.length)return 1<<o;if(!((S=+S)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(S)/Math.LN2),b()},l.thresholds=function(S){return arguments.length?(f=typeof S=="function"?S:Array.isArray(S)?Kt(qh.call(S)):Kt(S),l):f},l.bandwidth=function(S){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((S=+S)>=0))throw new Error("invalid bandwidth");return a=(Math.sqrt(4*S*S+1)-1)/2,b()},l},p.contours=Nc,p.count=Lt,p.create=function(n){return q(Ur(n).call(document.documentElement))},p.creator=Ur,p.cross=function(...n){const e=typeof n[n.length-1]=="function"&&function(o){return s=>o(...s)}(n.pop()),t=(n=n.map(fu)).map(uu),r=n.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||t.some(cu))return a;for(;;){a.push(i.map((s,c)=>n[c][s]));let o=r;for(;++i[o]===t[o];){if(o===0)return e?a.map(e):a;i[o--]=0}}},p.csv=sm,p.csvFormat=Hv,p.csvFormatBody=Gv,p.csvFormatRow=Wv,p.csvFormatRows=Xv,p.csvFormatValue=Zv,p.csvParse=Qh,p.csvParseRows=Yv,p.cubehelix=nt,p.cumsum=function(n,e){var t=0,r=0;return Float64Array.from(n,e===void 0?i=>t+=+i||0:i=>t+=+e(i,r++,n)||0)},p.curveBasis=function(n){return new eu(n)},p.curveBasisClosed=function(n){return new Wp(n)},p.curveBasisOpen=function(n){return new Zp(n)},p.curveBumpX=zp,p.curveBumpY=$p,p.curveBundle=Tb,p.curveCardinal=Ab,p.curveCardinalClosed=Sb,p.curveCardinalOpen=Cb,p.curveCatmullRom=kb,p.curveCatmullRomClosed=Ib,p.curveCatmullRomOpen=Nb,p.curveLinear=Ks,p.curveLinearClosed=function(n){return new eg(n)},p.curveMonotoneX=function(n){return new ru(n)},p.curveMonotoneY=function(n){return new ag(n)},p.curveNatural=function(n){return new sg(n)},p.curveStep=function(n){return new iu(n,.5)},p.curveStepAfter=function(n){return new iu(n,1)},p.curveStepBefore=function(n){return new iu(n,0)},p.descending=un,p.deviation=Rr,p.difference=function(n,...e){n=new Ke(n);for(const t of e)for(const r of t)n.delete(r);return n},p.disjoint=function(n,e){const t=e[Symbol.iterator](),r=new Ke;for(const i of n){if(r.has(i))return!1;let a,o;for(;({value:a,done:o}=t.next())&&!o;){if(Object.is(i,a))return!1;r.add(a)}}return!0},p.dispatch=ut,p.drag=function(){var n,e,t,r,i=Mn,a=ne,o=Be,s=qe,c={},u=ut("start","drag","end"),f=0,d=0;function l(E){E.on("mousedown.drag",g).filter(s).on("touchstart.drag",w).on("touchmove.drag",b,nn).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(E,I){if(!r&&i.call(this,E,I)){var N=A(this,a.call(this,E,I),E,I,"mouse");N&&(q(E.view).on("mousemove.drag",x,cn).on("mouseup.drag",y,cn),dn(E.view),fn(E),t=!1,n=E.clientX,e=E.clientY,N("start",E))}}function x(E){if(on(E),!t){var I=E.clientX-n,N=E.clientY-e;t=I*I+N*N>d}c.mouse("drag",E)}function y(E){q(E.view).on("mousemove.drag mouseup.drag",null),Rn(E.view,t),on(E),c.mouse("end",E)}function w(E,I){if(i.call(this,E,I)){var N,F,W=E.changedTouches,U=a.call(this,E,I),O=W.length;for(N=0;N<O;++N)(F=A(this,U,E,I,W[N].identifier,W[N]))&&(fn(E),F("start",E,W[N]))}}function b(E){var I,N,F=E.changedTouches,W=F.length;for(I=0;I<W;++I)(N=c[F[I].identifier])&&(on(E),N("drag",E,F[I]))}function S(E){var I,N,F=E.changedTouches,W=F.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),I=0;I<W;++I)(N=c[F[I].identifier])&&(fn(E),N("end",E,F[I]))}function A(E,I,N,F,W,U){var O,V,j,Z=u.copy(),B=J(U||N,I);if((j=o.call(E,new bn("beforestart",{sourceEvent:N,target:l,identifier:W,active:f,x:B[0],y:B[1],dx:0,dy:0,dispatch:Z}),F))!=null)return O=j.x-B[0]||0,V=j.y-B[1]||0,function L(X,K,Q){var rn,sn=B;switch(X){case"start":c[W]=L,rn=f++;break;case"end":delete c[W],--f;case"drag":B=J(Q||K,I),rn=f}Z.call(X,E,new bn(X,{sourceEvent:K,subject:j,target:l,identifier:W,active:rn,x:B[0]+O,y:B[1]+V,dx:B[0]-sn[0],dy:B[1]-sn[1],dispatch:Z}),F)}}return l.filter=function(E){return arguments.length?(i=typeof E=="function"?E:Nn(!!E),l):i},l.container=function(E){return arguments.length?(a=typeof E=="function"?E:Nn(E),l):a},l.subject=function(E){return arguments.length?(o=typeof E=="function"?E:Nn(E),l):o},l.touchable=function(E){return arguments.length?(s=typeof E=="function"?E:Nn(!!E),l):s},l.on=function(){var E=u.on.apply(u,arguments);return E===u?l:E},l.clickDistance=function(E){return arguments.length?(d=(E=+E)*E,l):Math.sqrt(d)},l},p.dragDisable=dn,p.dragEnable=Rn,p.dsv=function(n,e,t,r){arguments.length===3&&typeof t=="function"&&(r=t,t=void 0);var i=qo(n);return Fo(e,t).then(function(a){return i.parse(a,r)})},p.dsvFormat=qo,p.easeBack=Ch,p.easeBackIn=tv,p.easeBackInOut=Ch,p.easeBackOut=rv,p.easeBounce=na,p.easeBounceIn=function(n){return 1-na(1-n)},p.easeBounceInOut=function(n){return((n*=2)<=1?1-na(1-n):na(n-1)+1)/2},p.easeBounceOut=na,p.easeCircle=Sh,p.easeCircleIn=function(n){return 1-Math.sqrt(1-n*n)},p.easeCircleInOut=Sh,p.easeCircleOut=function(n){return Math.sqrt(1- --n*n)},p.easeCubic=vc,p.easeCubicIn=function(n){return n*n*n},p.easeCubicInOut=vc,p.easeCubicOut=function(n){return--n*n*n+1},p.easeElastic=kh,p.easeElasticIn=iv,p.easeElasticInOut=av,p.easeElasticOut=kh,p.easeExp=Ah,p.easeExpIn=function(n){return Zt(1-+n)},p.easeExpInOut=Ah,p.easeExpOut=function(n){return 1-Zt(n)},p.easeLinear=n=>+n,p.easePoly=wh,p.easePolyIn=Hg,p.easePolyInOut=wh,p.easePolyOut=Gg,p.easeQuad=xh,p.easeQuadIn=function(n){return n*n},p.easeQuadInOut=xh,p.easeQuadOut=function(n){return n*(2-n)},p.easeSin=Th,p.easeSinIn=function(n){return+n==1?1:1-Math.cos(n*Eh)},p.easeSinInOut=Th,p.easeSinOut=function(n){return Math.sin(n*Eh)},p.every=function(n,e){if(typeof e!="function")throw new TypeError("test is not a function");let t=-1;for(const r of n)if(!e(r,++t,n))return!1;return!0},p.extent=Et,p.fcumsum=function(n,e){const t=new Hn;let r=-1;return Float64Array.from(n,e===void 0?i=>t.add(+i||0):i=>t.add(+e(i,++r,n)||0))},p.filter=function(n,e){if(typeof e!="function")throw new TypeError("test is not a function");const t=[];let r=-1;for(const i of n)e(i,++r,n)&&t.push(i);return t},p.flatGroup=function(n,...e){return Ha(Ya(n,...e),e)},p.flatRollup=function(n,e,...t){return Ha(Ga(n,e,...t),t)},p.forceCenter=function(n,e){var t,r=1;function i(){var a,o,s=t.length,c=0,u=0;for(a=0;a<s;++a)c+=(o=t[a]).x,u+=o.y;for(c=(c/s-n)*r,u=(u/s-e)*r,a=0;a<s;++a)(o=t[a]).x-=c,o.y-=u}return n==null&&(n=0),e==null&&(e=0),i.initialize=function(a){t=a},i.x=function(a){return arguments.length?(n=+a,i):n},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(r=+a,i):r},i},p.forceCollide=function(n){var e,t,r,i=1,a=1;function o(){for(var u,f,d,l,g,x,y,w=e.length,b=0;b<a;++b)for(f=Uo(e,gm,vm).visitAfter(s),u=0;u<w;++u)d=e[u],x=t[d.index],y=x*x,l=d.x+d.vx,g=d.y+d.vy,f.visit(S);function S(A,E,I,N,F){var W=A.data,U=A.r,O=x+U;if(!W)return E>l+O||N<l-O||I>g+O||F<g-O;if(W.index>d.index){var V=l-W.x-W.vx,j=g-W.y-W.vy,Z=V*V+j*j;Z<O*O&&(V===0&&(Z+=(V=Jt(r))*V),j===0&&(Z+=(j=Jt(r))*j),Z=(O-(Z=Math.sqrt(Z)))/Z*i,d.vx+=(V*=Z)*(O=(U*=U)/(y+U)),d.vy+=(j*=Z)*O,W.vx-=V*(O=1-O),W.vy-=j*O)}}}function s(u){if(u.data)return u.r=t[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function c(){if(e){var u,f,d=e.length;for(t=new Array(d),u=0;u<d;++u)f=e[u],t[f.index]=+n(f,u,e)}}return typeof n!="function"&&(n=ee(n==null?1:+n)),o.initialize=function(u,f){e=u,r=f,c()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(n=typeof u=="function"?u:ee(+u),c(),o):n},o},p.forceLink=function(n){var e,t,r,i,a,o,s=mm,c=function(y){return 1/Math.min(i[y.source.index],i[y.target.index])},u=ee(30),f=1;function d(y){for(var w=0,b=n.length;w<f;++w)for(var S,A,E,I,N,F,W,U=0;U<b;++U)A=(S=n[U]).source,I=(E=S.target).x+E.vx-A.x-A.vx||Jt(o),N=E.y+E.vy-A.y-A.vy||Jt(o),I*=F=((F=Math.sqrt(I*I+N*N))-t[U])/F*y*e[U],N*=F,E.vx-=I*(W=a[U]),E.vy-=N*W,A.vx+=I*(W=1-W),A.vy+=N*W}function l(){if(r){var y,w,b=r.length,S=n.length,A=new Map(r.map((E,I)=>[s(E,I,r),E]));for(y=0,i=new Array(b);y<S;++y)(w=n[y]).index=y,typeof w.source!="object"&&(w.source=i0(A,w.source)),typeof w.target!="object"&&(w.target=i0(A,w.target)),i[w.source.index]=(i[w.source.index]||0)+1,i[w.target.index]=(i[w.target.index]||0)+1;for(y=0,a=new Array(S);y<S;++y)w=n[y],a[y]=i[w.source.index]/(i[w.source.index]+i[w.target.index]);e=new Array(S),g(),t=new Array(S),x()}}function g(){if(r)for(var y=0,w=n.length;y<w;++y)e[y]=+c(n[y],y,n)}function x(){if(r)for(var y=0,w=n.length;y<w;++y)t[y]=+u(n[y],y,n)}return n==null&&(n=[]),d.initialize=function(y,w){r=y,o=w,l()},d.links=function(y){return arguments.length?(n=y,l(),d):n},d.id=function(y){return arguments.length?(s=y,d):s},d.iterations=function(y){return arguments.length?(f=+y,d):f},d.strength=function(y){return arguments.length?(c=typeof y=="function"?y:ee(+y),g(),d):c},d.distance=function(y){return arguments.length?(u=typeof y=="function"?y:ee(+y),x(),d):u},d},p.forceManyBody=function(){var n,e,t,r,i,a=ee(-30),o=1,s=1/0,c=.81;function u(g){var x,y=n.length,w=Uo(n,bm,xm).visitAfter(d);for(r=g,x=0;x<y;++x)e=n[x],w.visit(l)}function f(){if(n){var g,x,y=n.length;for(i=new Array(y),g=0;g<y;++g)x=n[g],i[x.index]=+a(x,g,n)}}function d(g){var x,y,w,b,S,A=0,E=0;if(g.length){for(w=b=S=0;S<4;++S)(x=g[S])&&(y=Math.abs(x.value))&&(A+=x.value,E+=y,w+=y*x.x,b+=y*x.y);g.x=w/E,g.y=b/E}else{(x=g).x=x.data.x,x.y=x.data.y;do A+=i[x.data.index];while(x=x.next)}g.value=A}function l(g,x,y,w){if(!g.value)return!0;var b=g.x-e.x,S=g.y-e.y,A=w-x,E=b*b+S*S;if(A*A/c<E)return E<s&&(b===0&&(E+=(b=Jt(t))*b),S===0&&(E+=(S=Jt(t))*S),E<o&&(E=Math.sqrt(o*E)),e.vx+=b*g.value*r/E,e.vy+=S*g.value*r/E),!0;if(!(g.length||E>=s)){(g.data!==e||g.next)&&(b===0&&(E+=(b=Jt(t))*b),S===0&&(E+=(S=Jt(t))*S),E<o&&(E=Math.sqrt(o*E)));do g.data!==e&&(A=i[g.data.index]*r/E,e.vx+=b*A,e.vy+=S*A);while(g=g.next)}}return u.initialize=function(g,x){n=g,t=x,f()},u.strength=function(g){return arguments.length?(a=typeof g=="function"?g:ee(+g),f(),u):a},u.distanceMin=function(g){return arguments.length?(o=g*g,u):Math.sqrt(o)},u.distanceMax=function(g){return arguments.length?(s=g*g,u):Math.sqrt(s)},u.theta=function(g){return arguments.length?(c=g*g,u):Math.sqrt(c)},u},p.forceRadial=function(n,e,t){var r,i,a,o=ee(.1);function s(u){for(var f=0,d=r.length;f<d;++f){var l=r[f],g=l.x-e||1e-6,x=l.y-t||1e-6,y=Math.sqrt(g*g+x*x),w=(a[f]-y)*i[f]*u/y;l.vx+=g*w,l.vy+=x*w}}function c(){if(r){var u,f=r.length;for(i=new Array(f),a=new Array(f),u=0;u<f;++u)a[u]=+n(r[u],u,r),i[u]=isNaN(a[u])?0:+o(r[u],u,r)}}return typeof n!="function"&&(n=ee(+n)),e==null&&(e=0),t==null&&(t=0),s.initialize=function(u){r=u,c()},s.strength=function(u){return arguments.length?(o=typeof u=="function"?u:ee(+u),c(),s):o},s.radius=function(u){return arguments.length?(n=typeof u=="function"?u:ee(+u),c(),s):n},s.x=function(u){return arguments.length?(e=+u,s):e},s.y=function(u){return arguments.length?(t=+u,s):t},s},p.forceSimulation=function(n){var e,t=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,c=No(d),u=ut("tick","end"),f=function(){let y=1;return()=>(y=(ym*y+_m)%a0)/a0}();function d(){l(),u.call("tick",e),t<r&&(c.stop(),u.call("end",e))}function l(y){var w,b,S=n.length;y===void 0&&(y=1);for(var A=0;A<y;++A)for(t+=(a-t)*i,s.forEach(function(E){E(t)}),w=0;w<S;++w)(b=n[w]).fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return e}function g(){for(var y,w=0,b=n.length;w<b;++w){if((y=n[w]).index=w,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var S=10*Math.sqrt(.5+w),A=w*wm;y.x=S*Math.cos(A),y.y=S*Math.sin(A)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function x(y){return y.initialize&&y.initialize(n,f),y}return n==null&&(n=[]),g(),e={tick:l,restart:function(){return c.restart(d),e},stop:function(){return c.stop(),e},nodes:function(y){return arguments.length?(n=y,g(),s.forEach(x),e):n},alpha:function(y){return arguments.length?(t=+y,e):t},alphaMin:function(y){return arguments.length?(r=+y,e):r},alphaDecay:function(y){return arguments.length?(i=+y,e):+i},alphaTarget:function(y){return arguments.length?(a=+y,e):a},velocityDecay:function(y){return arguments.length?(o=1-y,e):1-o},randomSource:function(y){return arguments.length?(f=y,s.forEach(x),e):f},force:function(y,w){return arguments.length>1?(w==null?s.delete(y):s.set(y,x(w)),e):s.get(y)},find:function(y,w,b){var S,A,E,I,N,F=0,W=n.length;for(b==null?b=1/0:b*=b,F=0;F<W;++F)(E=(S=y-(I=n[F]).x)*S+(A=w-I.y)*A)<b&&(N=I,b=E);return N},on:function(y,w){return arguments.length>1?(u.on(y,w),e):u.on(y)}}},p.forceX=function(n){var e,t,r,i=ee(.1);function a(s){for(var c,u=0,f=e.length;u<f;++u)(c=e[u]).vx+=(r[u]-c.x)*t[u]*s}function o(){if(e){var s,c=e.length;for(t=new Array(c),r=new Array(c),s=0;s<c;++s)t[s]=isNaN(r[s]=+n(e[s],s,e))?0:+i(e[s],s,e)}}return typeof n!="function"&&(n=ee(n==null?0:+n)),a.initialize=function(s){e=s,o()},a.strength=function(s){return arguments.length?(i=typeof s=="function"?s:ee(+s),o(),a):i},a.x=function(s){return arguments.length?(n=typeof s=="function"?s:ee(+s),o(),a):n},a},p.forceY=function(n){var e,t,r,i=ee(.1);function a(s){for(var c,u=0,f=e.length;u<f;++u)(c=e[u]).vy+=(r[u]-c.y)*t[u]*s}function o(){if(e){var s,c=e.length;for(t=new Array(c),r=new Array(c),s=0;s<c;++s)t[s]=isNaN(r[s]=+n(e[s],s,e))?0:+i(e[s],s,e)}}return typeof n!="function"&&(n=ee(n==null?0:+n)),a.initialize=function(s){e=s,o()},a.strength=function(s){return arguments.length?(i=typeof s=="function"?s:ee(+s),o(),a):i},a.y=function(s){return arguments.length?(n=typeof s=="function"?s:ee(+s),o(),a):n},a},p.formatDefaultLocale=d0,p.formatLocale=h0,p.formatSpecifier=ai,p.fsum=function(n,e){const t=new Hn;if(e===void 0)for(let r of n)(r=+r)&&t.add(r);else{let r=-1;for(let i of n)(i=+e(i,++r,n))&&t.add(i)}return+t},p.geoAlbers=Id,p.geoAlbersUsa=function(){var n,e,t,r,i,a,o=Id(),s=Ss().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=Ss().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(l,g){a=[l,g]}};function f(l){var g=l[0],x=l[1];return a=null,t.point(g,x),a||(r.point(g,x),a)||(i.point(g,x),a)}function d(){return n=e=null,f}return f.invert=function(l){var g=o.scale(),x=o.translate(),y=(l[0]-x[0])/g,w=(l[1]-x[1])/g;return(w>=.12&&w<.234&&y>=-.425&&y<-.214?s:w>=.166&&w<.234&&y>=-.214&&y<-.115?c:o).invert(l)},f.stream=function(l){return n&&e===l?n:(g=[o.stream(e=l),s.stream(l),c.stream(l)],x=g.length,n={point:function(y,w){for(var b=-1;++b<x;)g[b].point(y,w)},sphere:function(){for(var y=-1;++y<x;)g[y].sphere()},lineStart:function(){for(var y=-1;++y<x;)g[y].lineStart()},lineEnd:function(){for(var y=-1;++y<x;)g[y].lineEnd()},polygonStart:function(){for(var y=-1;++y<x;)g[y].polygonStart()},polygonEnd:function(){for(var y=-1;++y<x;)g[y].polygonEnd()}});var g,x},f.precision=function(l){return arguments.length?(o.precision(l),s.precision(l),c.precision(l),d()):o.precision()},f.scale=function(l){return arguments.length?(o.scale(l),s.scale(.35*l),c.scale(l),f.translate(o.translate())):o.scale()},f.translate=function(l){if(!arguments.length)return o.translate();var g=o.scale(),x=+l[0],y=+l[1];return t=o.translate(l).clipExtent([[x-.455*g,y-.238*g],[x+.455*g,y+.238*g]]).stream(u),r=s.translate([x-.307*g,y+.201*g]).clipExtent([[x-.425*g+xn,y+.12*g+xn],[x-.214*g-xn,y+.234*g-xn]]).stream(u),i=c.translate([x-.205*g,y+.212*g]).clipExtent([[x-.214*g+xn,y+.166*g+xn],[x-.115*g-xn,y+.234*g-xn]]).stream(u),d()},f.fitExtent=function(l,g){return As(f,l,g)},f.fitSize=function(l,g){return wf(f,l,g)},f.fitWidth=function(l,g){return Mf(f,l,g)},f.fitHeight=function(l,g){return Ef(f,l,g)},f.scale(1070)},p.geoArea=function(n){return Qo=new Hn,tt(n,pt),2*Qo},p.geoAzimuthalEqualArea=function(){return mt(Sf).scale(124.75).clipAngle(179.999)},p.geoAzimuthalEqualAreaRaw=Sf,p.geoAzimuthalEquidistant=function(){return mt(Cf).scale(79.4188).clipAngle(179.999)},p.geoAzimuthalEquidistantRaw=Cf,p.geoBounds=function(n){var e,t,r,i,a,o,s;if($e=Zn=-(Xn=ke=1/0),Qt=[],tt(n,$t),t=Qt.length){for(Qt.sort(km),e=1,a=[r=Qt[0]];e<t;++e)$0(r,(i=Qt[e])[0])||$0(r,i[1])?(Pe(r[0],i[1])>Pe(r[0],r[1])&&(r[1]=i[1]),Pe(i[0],r[1])>Pe(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[t=a.length-1];e<=t;r=i,++e)i=a[e],(s=Pe(r[1],i[0]))>o&&(o=s,Xn=i[0],Zn=r[1])}return Qt=zt=null,Xn===1/0||ke===1/0?[[NaN,NaN],[NaN,NaN]]:[[Xn,ke],[Zn,$e]]},p.geoCentroid=function(n){ua=is=as=os=ss=us=cs=fs=0,Zc=new Hn,Kc=new Hn,Jc=new Hn,tt(n,rt);var e=+Zc,t=+Kc,r=+Jc,i=qc(e,t,r);return i<oa&&(e=us,t=cs,r=fs,is<xn&&(e=as,t=os,r=ss),(i=qc(e,t,r))<oa)?[NaN,NaN]:[xe(t,e)*Fn,we(r/i)*Fn]},p.geoCircle=function(){var n,e,t=ci([0,0]),r=ci(90),i=ci(6),a={point:function(s,c){n.push(s=e(s,c)),s[0]*=Fn,s[1]*=Fn}};function o(){var s=t.apply(this,arguments),c=r.apply(this,arguments)*wn,u=i.apply(this,arguments)*wn;return n=[],e=rf(-s[0]*wn,-s[1]*wn,0).invert,q0(a,c,u,1),s={type:"Polygon",coordinates:[n]},n=e=null,s}return o.center=function(s){return arguments.length?(t=typeof s=="function"?s:ci([+s[0],+s[1]]),o):t},o.radius=function(s){return arguments.length?(r=typeof s=="function"?s:ci(+s),o):r},o.precision=function(s){return arguments.length?(i=typeof s=="function"?s:ci(+s),o):i},o},p.geoClipAntimeridian=of,p.geoClipCircle=W0,p.geoClipExtent=function(){var n,e,t,r=0,i=0,a=960,o=500;return t={stream:function(s){return n&&e===s?n:n=vs(r,i,a,o)(e=s)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],a=+s[1][0],o=+s[1][1],n=e=null,t):[[r,i],[a,o]]}}},p.geoClipRectangle=vs,p.geoConicConformal=function(){return Af(zd).scale(109.5).parallels([30,30])},p.geoConicConformalRaw=zd,p.geoConicEqualArea=Ss,p.geoConicEqualAreaRaw=kd,p.geoConicEquidistant=function(){return Af($d).scale(131.154).center([0,13.9389])},p.geoConicEquidistantRaw=$d,p.geoContains=function(n,e){return(n&&K0.hasOwnProperty(n.type)?K0[n.type]:ys)(n,e)},p.geoDistance=ms,p.geoEqualEarth=function(){return mt(kf).scale(177.158)},p.geoEqualEarthRaw=kf,p.geoEquirectangular=function(){return mt(ba).scale(152.63)},p.geoEquirectangularRaw=ba,p.geoGnomonic=function(){return mt(If).scale(144.049).clipAngle(60)},p.geoGnomonicRaw=If,p.geoGraticule=ad,p.geoGraticule10=function(){return ad()()},p.geoIdentity=function(){var n,e,t,r,i,a,o,s=1,c=0,u=0,f=1,d=1,l=0,g=null,x=1,y=1,w=ma({point:function(E,I){var N=A([E,I]);this.stream.point(N[0],N[1])}}),b=la;function S(){return x=s*f,y=s*d,a=o=null,A}function A(E){var I=E[0]*x,N=E[1]*y;if(l){var F=N*n-I*e;I=I*n+N*e,N=F}return[I+c,N+u]}return A.invert=function(E){var I=E[0]-c,N=E[1]-u;if(l){var F=N*n+I*e;I=I*n-N*e,N=F}return[I/x,N/y]},A.stream=function(E){return a&&o===E?a:a=w(b(o=E))},A.postclip=function(E){return arguments.length?(b=E,g=t=r=i=null,S()):b},A.clipExtent=function(E){return arguments.length?(b=E==null?(g=t=r=i=null,la):vs(g=+E[0][0],t=+E[0][1],r=+E[1][0],i=+E[1][1]),S()):g==null?null:[[g,t],[r,i]]},A.scale=function(E){return arguments.length?(s=+E,S()):s},A.translate=function(E){return arguments.length?(c=+E[0],u=+E[1],S()):[c,u]},A.angle=function(E){return arguments.length?(e=gn(l=E%360*wn),n=yn(l),S()):l*Fn},A.reflectX=function(E){return arguments.length?(f=E?-1:1,S()):f<0},A.reflectY=function(E){return arguments.length?(d=E?-1:1,S()):d<0},A.fitExtent=function(E,I){return As(A,E,I)},A.fitSize=function(E,I){return wf(A,E,I)},A.fitWidth=function(E,I){return Mf(A,E,I)},A.fitHeight=function(E,I){return Ef(A,E,I)},A},p.geoInterpolate=function(n,e){var t=n[0]*wn,r=n[1]*wn,i=e[0]*wn,a=e[1]*wn,o=yn(r),s=gn(r),c=yn(a),u=gn(a),f=o*yn(t),d=o*gn(t),l=c*yn(i),g=c*gn(i),x=2*we(ce(_0(a-r)+o*c*_0(i-t))),y=gn(x),w=x?function(b){var S=gn(b*=x)/y,A=gn(x-b)/y,E=A*f+S*l,I=A*d+S*g,N=A*s+S*u;return[xe(I,E)*Fn,xe(N,ce(E*E+I*I))*Fn]}:function(){return[t*Fn,r*Fn]};return w.distance=x,w},p.geoLength=Z0,p.geoMercator=function(){return Bd(_a).scale(961/be)},p.geoMercatorRaw=_a,p.geoNaturalEarth1=function(){return mt(Nf).scale(175.295)},p.geoNaturalEarth1Raw=Nf,p.geoOrthographic=function(){return mt(Bf).scale(249.5).clipAngle(90+xn)},p.geoOrthographicRaw=Bf,p.geoPath=function(n,e){let t,r,i=3,a=4.5;function o(s){return s&&(typeof a=="function"&&r.pointRadius(+a.apply(this,arguments)),tt(s,t(r))),r.result()}return o.area=function(s){return tt(s,t(cd)),cd.result()},o.measure=function(s){return tt(s,t(bd)),bd.result()},o.bounds=function(s){return tt(s,t(xs)),xs.result()},o.centroid=function(s){return tt(s,t(gd)),gd.result()},o.projection=function(s){return arguments.length?(t=s==null?(n=null,la):(n=s).stream,o):n},o.context=function(s){return arguments.length?(r=s==null?(e=null,new Ed(i)):new vd(e=s),typeof a!="function"&&r.pointRadius(a),o):e},o.pointRadius=function(s){return arguments.length?(a=typeof s=="function"?s:(r.pointRadius(+s),+s),o):a},o.digits=function(s){if(!arguments.length)return i;if(s==null)i=null;else{const c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);i=c}return e===null&&(r=new Ed(i)),o},o.projection(n).digits(i).context(e)},p.geoProjection=mt,p.geoProjectionMutator=Tf,p.geoRotation=L0,p.geoStereographic=function(){return mt(zf).scale(250).clipAngle(142)},p.geoStereographicRaw=zf,p.geoStream=tt,p.geoTransform=function(n){return{stream:ma(n)}},p.geoTransverseMercator=function(){var n=Bd($f),e=n.center,t=n.rotate;return n.center=function(r){return arguments.length?e([-r[1],r[0]]):[(r=e())[1],-r[0]]},n.rotate=function(r){return arguments.length?t([r[0],r[1],r.length>2?r[2]+90:90]):[(r=t())[0],r[1],r[2]-90]},t([0,0,90]).scale(159.155)},p.geoTransverseMercatorRaw=$f,p.gray=function(n,e){return new Qe(n,0,0,e??1)},p.greatest=te,p.greatestIndex=function(n,e=$){if(e.length===1)return Ii(n,e);let t,r=-1,i=-1;for(const a of n)++i,(r<0?e(a,a)===0:e(a,t)>0)&&(t=a,r=i);return r},p.group=Ua,p.groupSort=function(n,e,t){return(e.length!==2?Ti(Ei(n,e,t),([r,i],[a,o])=>$(i,o)||$(r,a)):Ti(Ua(n,t),([r,i],[a,o])=>e(i,o)||$(r,a))).map(([r])=>r)},p.groups=Ya,p.hcl=xo,p.hierarchy=Pf,p.histogram=Za,p.hsl=yo,p.html=lm,p.image=function(n,e){return new Promise(function(t,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){t(i)},i.src=n})},p.index=function(n,...e){return qt(n,At,Xa,e)},p.indexes=function(n,...e){return qt(n,Array.from,Xa,e)},p.interpolate=Wt,p.interpolateArray=function(n,e){return(Zl(e)?ic:Kl)(n,e)},p.interpolateBasis=Yl,p.interpolateBasisClosed=Hl,p.interpolateBlues=U2,p.interpolateBrBG=M2,p.interpolateBuGn=B2,p.interpolateBuPu=z2,p.interpolateCividis=function(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-n*(35.34-n*(2381.73-n*(6402.7-n*(7024.72-2710.57*n)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+n*(170.73+n*(52.82-n*(131.46-n*(176.58-67.37*n)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+n*(442.36-n*(2482.43-n*(6167.24-n*(6614.94-2475.67*n)))))))+")"},p.interpolateCool=J2,p.interpolateCubehelix=Tg,p.interpolateCubehelixDefault=Z2,p.interpolateCubehelixLong=So,p.interpolateDate=Jl,p.interpolateDiscrete=function(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}},p.interpolateGnBu=$2,p.interpolateGreens=Y2,p.interpolateGreys=H2,p.interpolateHcl=Mg,p.interpolateHclLong=Eg,p.interpolateHsl=xg,p.interpolateHslLong=wg,p.interpolateHue=function(n,e){var t=Eo(+n,+e);return function(r){var i=t(r);return i-360*Math.floor(i/360)}},p.interpolateInferno=rb,p.interpolateLab=function(n,e){var t=ue((n=bo(n)).l,(e=bo(e)).l),r=ue(n.a,e.a),i=ue(n.b,e.b),a=ue(n.opacity,e.opacity);return function(o){return n.l=t(o),n.a=r(o),n.b=i(o),n.opacity=a(o),n+""}},p.interpolateMagma=tb,p.interpolateNumber=Fe,p.interpolateNumberArray=ic,p.interpolateObject=Ql,p.interpolateOrRd=P2,p.interpolateOranges=W2,p.interpolatePRGn=E2,p.interpolatePiYG=T2,p.interpolatePlasma=ib,p.interpolatePuBu=V2,p.interpolatePuBuGn=O2,p.interpolatePuOr=A2,p.interpolatePuRd=R2,p.interpolatePurples=G2,p.interpolateRainbow=function(n){(n<0||n>1)&&(n-=Math.floor(n));var e=Math.abs(n-.5);return Ys.h=360*n-100,Ys.s=1.5-1.5*e,Ys.l=.8-.9*e,Ys+""},p.interpolateRdBu=S2,p.interpolateRdGy=C2,p.interpolateRdPu=D2,p.interpolateRdYlBu=k2,p.interpolateRdYlGn=I2,p.interpolateReds=X2,p.interpolateRgb=Gi,p.interpolateRgbBasis=Wl,p.interpolateRgbBasisClosed=bg,p.interpolateRound=To,p.interpolateSinebow=function(n){var e;return n=(.5-n)*Math.PI,Hs.r=255*(e=Math.sin(n))*e,Hs.g=255*(e=Math.sin(n+Q2))*e,Hs.b=255*(e=Math.sin(n+nb))*e,Hs+""},p.interpolateSpectral=N2,p.interpolateString=sc,p.interpolateTransformCss=rh,p.interpolateTransformSvg=ih,p.interpolateTurbo=function(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+n*(1172.33-n*(10793.56-n*(33300.12-n*(38394.49-14825.05*n)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+n*(557.33+n*(1225.33-n*(3574.96-n*(1073.77+707.56*n)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+n*(3211.1-n*(15327.97-n*(27814-n*(22569.18-6838.66*n)))))))+")"},p.interpolateViridis=eb,p.interpolateWarm=K2,p.interpolateYlGn=L2,p.interpolateYlGnBu=j2,p.interpolateYlOrBr=q2,p.interpolateYlOrRd=F2,p.interpolateZoom=oh,p.interrupt=xr,p.intersection=function(n,...e){n=new Ke(n),e=e.map(yu);n:for(const t of n)for(const r of e)if(!r.has(t)){n.delete(t);continue n}return n},p.interval=function(n,e,t){var r=new Qi,i=e;return e==null?(r.restart(n,e,t),r):(r._restart=r.restart,r.restart=function(a,o,s){o=+o,s=s==null?Ji():+s,r._restart(function c(u){u+=i,r._restart(c,i+=o,s),a(u)},o,s)},r.restart(n,e,t),r)},p.isoFormat=u2,p.isoParse=f2,p.json=function(n,e){return fetch(n,e).then(cm)},p.lab=bo,p.lch=function(n,e,t,r){return arguments.length===1?Rl(n):new lt(t,e,n,r??1)},p.least=function(n,e=$){let t,r=!1;if(e.length===1){let i;for(const a of n){const o=e(a);(r?$(o,i)<0:$(o,o)===0)&&(t=a,i=o,r=!0)}}else for(const i of n)(r?e(i,t)<0:e(i,i)===0)&&(t=i,r=!0);return t},p.leastIndex=Ja,p.line=hl,p.lineRadial=Ip,p.link=Js,p.linkHorizontal=function(){return Js(zp)},p.linkRadial=function(){const n=Js(gb);return n.angle=n.x,delete n.x,n.radius=n.y,delete n.y,n},p.linkVertical=function(){return Js($p)},p.local=en,p.map=function(n,e){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(n,(t,r)=>e(t,r,n))},p.matcher=jn,p.max=fr,p.maxIndex=Ii,p.mean=function(n,e){let t=0,r=0;if(e===void 0)for(let i of n)i!=null&&(i=+i)>=i&&(++t,r+=i);else{let i=-1;for(let a of n)(a=e(a,++i,n))!=null&&(a=+a)>=a&&(++t,r+=a)}if(t)return r/t},p.median=function(n,e){return hr(n,.5,e)},p.medianIndex=function(n,e){return Ni(n,.5,e)},p.merge=qr,p.min=Dr,p.minIndex=jr,p.mode=function(n,e){const t=new Tt;if(e===void 0)for(let a of n)a!=null&&a>=a&&t.set(a,(t.get(a)||0)+1);else{let a=-1;for(let o of n)(o=e(o,++a,n))!=null&&o>=o&&t.set(o,(t.get(o)||0)+1)}let r,i=0;for(const[a,o]of t)o>i&&(i=o,r=a);return r},p.namespace=vr,p.namespaces=Fr,p.nice=Ci,p.now=Ji,p.pack=function(){var n=null,e=1,t=1,r=Br;function i(a){const o=Of();return a.x=e/2,a.y=t/2,n?a.eachBefore(Yd(n)).eachAfter(Rf(r,.5,o)).eachBefore(Hd(1)):a.eachBefore(Yd(ly)).eachAfter(Rf(Br,1,o)).eachAfter(Rf(r,a.r/Math.min(e,t),o)).eachBefore(Hd(Math.min(e,t)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(n=Is(a),i):n},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:di(+a),i):r},i},p.packEnclose=function(n){return Rd(n,Of())},p.packSiblings=function(n){return Ud(n,Of()),n},p.pairs=function(n,e=gu){const t=[];let r,i=!1;for(const a of n)i&&t.push(e(r,a)),r=a,i=!0;return t},p.partition=function(){var n=1,e=1,t=0,r=!1;function i(a){var o=a.height+1;return a.x0=a.y0=t,a.x1=n,a.y1=e/o,a.eachBefore(function(s,c){return function(u){u.children&&Aa(u,u.x0,s*(u.depth+1)/c,u.x1,s*(u.depth+2)/c);var f=u.x0,d=u.y0,l=u.x1-t,g=u.y1-t;l<f&&(f=l=(f+l)/2),g<d&&(d=g=(d+g)/2),u.x0=f,u.y0=d,u.x1=l,u.y1=g}}(e,o)),r&&a.eachBefore(Gd),a}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(n=+a[0],e=+a[1],i):[n,e]},i.padding=function(a){return arguments.length?(t=+a,i):t},i},p.path=Ic,p.pathRound=function(n=3){return new ta(+n)},p.permute=Wa,p.pie=function(){var n=db,e=hb,t=null,r=An(0),i=An(ir),a=An(0);function o(s){var c,u,f,d,l,g=(s=Zs(s)).length,x=0,y=new Array(g),w=new Array(g),b=+r.apply(this,arguments),S=Math.min(ir,Math.max(-ir,i.apply(this,arguments)-b)),A=Math.min(Math.abs(S)/g,a.apply(this,arguments)),E=A*(S<0?-1:1);for(c=0;c<g;++c)(l=w[y[c]=c]=+n(s[c],c,s))>0&&(x+=l);for(e!=null?y.sort(function(I,N){return e(w[I],w[N])}):t!=null&&y.sort(function(I,N){return t(s[I],s[N])}),c=0,f=x?(S-g*E)/x:0;c<g;++c,b=d)u=y[c],d=b+((l=w[u])>0?l*f:0)+E,w[u]={data:s[u],index:c,value:l,startAngle:b,endAngle:d,padAngle:A};return w}return o.value=function(s){return arguments.length?(n=typeof s=="function"?s:An(+s),o):n},o.sortValues=function(s){return arguments.length?(e=s,t=null,o):e},o.sort=function(s){return arguments.length?(t=s,e=null,o):t},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:An(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:An(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:An(+s),o):a},o},p.piecewise=fh,p.pointRadial=Va,p.pointer=J,p.pointers=function(n,e){return n.target&&(n=tn(n),e===void 0&&(e=n.currentTarget),n=n.touches||[n]),Array.from(n,t=>J(t,e))},p.polygonArea=function(n){for(var e,t=-1,r=n.length,i=n[r-1],a=0;++t<r;)e=i,i=n[t],a+=e[1]*i[0]-e[0]*i[1];return a/2},p.polygonCentroid=function(n){for(var e,t,r=-1,i=n.length,a=0,o=0,s=n[i-1],c=0;++r<i;)e=s,s=n[r],c+=t=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*t,o+=(e[1]+s[1])*t;return[a/(c*=3),o/c]},p.polygonContains=function(n,e){for(var t,r,i=n.length,a=n[i-1],o=e[0],s=e[1],c=a[0],u=a[1],f=!1,d=0;d<i;++d)t=(a=n[d])[0],(r=a[1])>s!=u>s&&o<(c-t)*(s-r)/(u-r)+t&&(f=!f),c=t,u=r;return f},p.polygonHull=function(n){if((t=n.length)<3)return null;var e,t,r=new Array(t),i=new Array(t);for(e=0;e<t;++e)r[e]=[+n[e][0],+n[e][1],e];for(r.sort(by),e=0;e<t;++e)i[e]=[r[e][0],-r[e][1]];var a=Qd(r),o=Qd(i),s=o[0]===a[0],c=o[o.length-1]===a[a.length-1],u=[];for(e=a.length-1;e>=0;--e)u.push(n[r[a[e]][2]]);for(e=+s;e<o.length-c;++e)u.push(n[r[o[e]][2]]);return u},p.polygonLength=function(n){for(var e,t,r=-1,i=n.length,a=n[i-1],o=a[0],s=a[1],c=0;++r<i;)e=o,t=s,e-=o=(a=n[r])[0],t-=s=a[1],c+=Math.hypot(e,t);return c},p.precisionFixed=p0,p.precisionPrefix=g0,p.precisionRound=v0,p.quadtree=Uo,p.quantile=hr,p.quantileIndex=Ni,p.quantileSorted=Ka,p.quantize=function(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n(r/(e-1));return t},p.quickselect=Lr,p.radialArea=Np,p.radialLine=Ip,p.randomBates=Ey,p.randomBernoulli=Sy,p.randomBeta=t1,p.randomBinomial=r1,p.randomCauchy=ky,p.randomExponential=Ty,p.randomGamma=Uf,p.randomGeometric=e1,p.randomInt=wy,p.randomIrwinHall=n1,p.randomLcg=function(n=Math.random()){let e=0|(0<=n&&n<1?n/i1:Math.abs(n));return()=>(e=1664525*e+1013904223|0,i1*(e>>>0))},p.randomLogNormal=My,p.randomLogistic=Iy,p.randomNormal=Ff,p.randomPareto=Ay,p.randomPoisson=Ny,p.randomUniform=xy,p.randomWeibull=Cy,p.range=st,p.rank=function(n,e=$){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let t=Array.from(n);const r=new Float64Array(t.length);e.length!==2&&(t=t.map(e),e=$);const i=(s,c)=>e(t[s],t[c]);let a,o;return(n=Uint32Array.from(t,(s,c)=>c)).sort(e===$?(s,c)=>Ft(t[s],t[c]):Ai(i)),n.forEach((s,c)=>{const u=i(s,a===void 0?s:a);u>=0?((a===void 0||u>0)&&(a=s,o=c),r[s]=o):r[s]=NaN}),r},p.reduce=function(n,e,t){if(typeof e!="function")throw new TypeError("reducer is not a function");const r=n[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if({done:i,value:t}=r.next(),i)return;++o}for(;{done:i,value:a}=r.next(),!i;)t=e(t,a,++o,n);return t},p.reverse=function(n){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(n).reverse()},p.rgb=Gr,p.ribbon=function(){return Lh()},p.ribbonArrow=function(){return Lh(Mv)},p.rollup=Ei,p.rollups=Ga,p.scaleBand=Gf,p.scaleDiverging=function n(){var e=er(Us()(Ae));return e.copy=function(){return tr(e,n())},Pt.apply(e,arguments)},p.scaleDivergingLog=function n(){var e=Zf(Us()).domain([.1,1,10]);return e.copy=function(){return tr(e,n()).base(e.base())},Pt.apply(e,arguments)},p.scaleDivergingPow=cl,p.scaleDivergingSqrt=function(){return cl.apply(null,arguments).exponent(.5)},p.scaleDivergingSymlog=function n(){var e=Kf(Us());return e.copy=function(){return tr(e,n()).constant(e.constant())},Pt.apply(e,arguments)},p.scaleIdentity=function n(e){var t;function r(i){return i==null||isNaN(i=+i)?t:i}return r.invert=r,r.domain=r.range=function(i){return arguments.length?(e=Array.from(i,Ps),r):e.slice()},r.unknown=function(i){return arguments.length?(t=i,r):t},r.copy=function(){return n(e).unknown(t)},e=arguments.length?Array.from(e,Ps):[0,1],er(r)},p.scaleImplicit=Yf,p.scaleLinear=function n(){var e=Wf();return e.copy=function(){return Sa(e,n())},Ye.apply(e,arguments),er(e)},p.scaleLog=function n(){const e=Zf(Os()).domain([1,10]);return e.copy=()=>Sa(e,n()).base(e.base()),Ye.apply(e,arguments),e},p.scaleOrdinal=Hf,p.scalePoint=function(){return a1(Gf.apply(null,arguments).paddingInner(1))},p.scalePow=Qf,p.scaleQuantile=function n(){var e,t=[],r=[],i=[];function a(){var s=0,c=Math.max(1,r.length);for(i=new Array(c-1);++s<c;)i[s-1]=Ka(t,s/c);return o}function o(s){return s==null||isNaN(s=+s)?e:r[Ze(i,s)]}return o.invertExtent=function(s){var c=r.indexOf(s);return c<0?[NaN,NaN]:[c>0?i[c-1]:t[0],c<i.length?i[c]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let c of s)c==null||isNaN(c=+c)||t.push(c);return t.sort($),a()},o.range=function(s){return arguments.length?(r=Array.from(s),a()):r.slice()},o.unknown=function(s){return arguments.length?(e=s,o):e},o.quantiles=function(){return i.slice()},o.copy=function(){return n().domain(t).range(r).unknown(e)},Ye.apply(o,arguments)},p.scaleQuantize=function n(){var e,t=0,r=1,i=1,a=[.5],o=[0,1];function s(u){return u!=null&&u<=u?o[Ze(a,u,0,i)]:e}function c(){var u=-1;for(a=new Array(i);++u<i;)a[u]=((u+1)*r-(u-i)*t)/(i+1);return s}return s.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,c()):[t,r]},s.range=function(u){return arguments.length?(i=(o=Array.from(u)).length-1,c()):o.slice()},s.invertExtent=function(u){var f=o.indexOf(u);return f<0?[NaN,NaN]:f<1?[t,a[0]]:f>=i?[a[i-1],r]:[a[f-1],a[f]]},s.unknown=function(u){return arguments.length&&(e=u),s},s.thresholds=function(){return a.slice()},s.copy=function(){return n().domain([t,r]).range(o).unknown(e)},Ye.apply(er(s),arguments)},p.scaleRadial=function n(){var e,t=Wf(),r=[0,1],i=!1;function a(o){var s=function(c){return Math.sign(c)*Math.sqrt(Math.abs(c))}(t(o));return isNaN(s)?e:i?Math.round(s):s}return a.invert=function(o){return t.invert(g1(o))},a.domain=function(o){return arguments.length?(t.domain(o),a):t.domain()},a.range=function(o){return arguments.length?(t.range((r=Array.from(o,Ps)).map(g1)),a):r.slice()},a.rangeRound=function(o){return a.range(o).round(!0)},a.round=function(o){return arguments.length?(i=!!o,a):i},a.clamp=function(o){return arguments.length?(t.clamp(o),a):t.clamp()},a.unknown=function(o){return arguments.length?(e=o,a):e},a.copy=function(){return n(t.domain(),r).round(i).clamp(t.clamp()).unknown(e)},Ye.apply(a,arguments),er(a)},p.scaleSequential=function n(){var e=er(Fs()(Ae));return e.copy=function(){return tr(e,n())},Pt.apply(e,arguments)},p.scaleSequentialLog=function n(){var e=Zf(Fs()).domain([1,10]);return e.copy=function(){return tr(e,n()).base(e.base())},Pt.apply(e,arguments)},p.scaleSequentialPow=ul,p.scaleSequentialQuantile=function n(){var e=[],t=Ae;function r(i){if(i!=null&&!isNaN(i=+i))return t((Ze(e,i,1)-1)/(e.length-1))}return r.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let a of i)a==null||isNaN(a=+a)||e.push(a);return e.sort($),r},r.interpolator=function(i){return arguments.length?(t=i,r):t},r.range=function(){return e.map((i,a)=>t(a/(e.length-1)))},r.quantiles=function(i){return Array.from({length:i+1},(a,o)=>hr(e,o/i))},r.copy=function(){return n(t).domain(e)},Pt.apply(r,arguments)},p.scaleSequentialSqrt=function(){return ul.apply(null,arguments).exponent(.5)},p.scaleSequentialSymlog=function n(){var e=Kf(Fs());return e.copy=function(){return tr(e,n()).constant(e.constant())},Pt.apply(e,arguments)},p.scaleSqrt=function(){return Qf.apply(null,arguments).exponent(.5)},p.scaleSymlog=function n(){var e=Kf(Os());return e.copy=function(){return Sa(e,n()).constant(e.constant())},Ye.apply(e,arguments)},p.scaleThreshold=function n(){var e,t=[.5],r=[0,1],i=1;function a(o){return o!=null&&o<=o?r[Ze(t,o,0,i)]:e}return a.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,r.length-1),a):t.slice()},a.range=function(o){return arguments.length?(r=Array.from(o),i=Math.min(t.length,r.length-1),a):r.slice()},a.invertExtent=function(o){var s=r.indexOf(o);return[t[s-1],t[s]]},a.unknown=function(o){return arguments.length?(e=o,a):e},a.copy=function(){return n().domain(t).range(r).unknown(e)},Ye.apply(a,arguments)},p.scaleTime=function(){return Ye.apply(sl(B1,z1,yt,Ls,vi,gi,Ds,Vs,Rt,p.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},p.scaleUtc=function(){return Ye.apply(sl(I1,N1,_t,qs,mi,ka,js,Rs,Rt,p.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},p.scan=function(n,e){const t=Ja(n,e);return t<0?void 0:t},p.schemeAccent=p2,p.schemeBlues=yp,p.schemeBrBG=K1,p.schemeBuGn=op,p.schemeBuPu=sp,p.schemeCategory10=d2,p.schemeDark2=g2,p.schemeGnBu=up,p.schemeGreens=_p,p.schemeGreys=bp,p.schemeOrRd=cp,p.schemeOranges=Mp,p.schemePRGn=J1,p.schemePaired=v2,p.schemePastel1=m2,p.schemePastel2=y2,p.schemePiYG=Q1,p.schemePuBu=lp,p.schemePuBuGn=fp,p.schemePuOr=np,p.schemePuRd=hp,p.schemePurples=xp,p.schemeRdBu=ep,p.schemeRdGy=tp,p.schemeRdPu=dp,p.schemeRdYlBu=rp,p.schemeRdYlGn=ip,p.schemeReds=wp,p.schemeSet1=_2,p.schemeSet2=b2,p.schemeSet3=x2,p.schemeSpectral=ap,p.schemeTableau10=w2,p.schemeYlGn=gp,p.schemeYlGnBu=pp,p.schemeYlOrBr=vp,p.schemeYlOrRd=mp,p.select=q,p.selectAll=function(n){return typeof n=="string"?new P([document.querySelectorAll(n)],[document.documentElement]):new P([Oi(n)],R)},p.selection=D,p.selector=kt,p.selectorAll=Vi,p.shuffle=vu,p.shuffler=Qa,p.some=function(n,e){if(typeof e!="function")throw new TypeError("test is not a function");let t=-1;for(const r of n)if(e(r,++t,n))return!0;return!1},p.sort=Ti,p.stack=function(){var n=An([]),e=xi,t=bi,r=Bb;function i(a){var o,s,c=Array.from(n.apply(this,arguments),zb),u=c.length,f=-1;for(const d of a)for(o=0,++f;o<u;++o)(c[o][f]=[0,+r(d,c[o].key,f,a)]).data=d;for(o=0,s=Zs(e(c));o<u;++o)c[s[o]].index=o;return t(c,s),c}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:An(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:An(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?xi:typeof a=="function"?a:An(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??bi,i):t},i},p.stackOffsetDiverging=function(n,e){if((s=n.length)>0)for(var t,r,i,a,o,s,c=0,u=n[e[0]].length;c<u;++c)for(a=o=0,t=0;t<s;++t)(i=(r=n[e[t]][c])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)},p.stackOffsetExpand=function(n,e){if((r=n.length)>0){for(var t,r,i,a=0,o=n[0].length;a<o;++a){for(i=t=0;t<r;++t)i+=n[t][a][1]||0;if(i)for(t=0;t<r;++t)n[t][a][1]/=i}bi(n,e)}},p.stackOffsetNone=bi,p.stackOffsetSilhouette=function(n,e){if((t=n.length)>0){for(var t,r=0,i=n[e[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<t;++o)s+=n[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}bi(n,e)}},p.stackOffsetWiggle=function(n,e){if((i=n.length)>0&&(r=(t=n[e[0]]).length)>0){for(var t,r,i,a=0,o=1;o<r;++o){for(var s=0,c=0,u=0;s<i;++s){for(var f=n[e[s]],d=f[o][1]||0,l=(d-(f[o-1][1]||0))/2,g=0;g<s;++g){var x=n[e[g]];l+=(x[o][1]||0)-(x[o-1][1]||0)}c+=d,u+=l*d}t[o-1][1]+=t[o-1][0]=a,c&&(a-=u/c)}t[o-1][1]+=t[o-1][0]=a,bi(n,e)}},p.stackOrderAppearance=cg,p.stackOrderAscending=fg,p.stackOrderDescending=function(n){return fg(n).reverse()},p.stackOrderInsideOut=function(n){var e,t,r=n.length,i=n.map(lg),a=cg(n),o=0,s=0,c=[],u=[];for(e=0;e<r;++e)t=a[e],o<s?(o+=i[t],c.push(t)):(s+=i[t],u.push(t));return u.reverse().concat(c)},p.stackOrderNone=xi,p.stackOrderReverse=function(n){return xi(n).reverse()},p.stratify=function(){var n,e=dy,t=py;function r(i){var a,o,s,c,u,f,d,l,g=Array.from(i),x=e,y=t,w=new Map;if(n!=null){const b=g.map((E,I)=>function(N){N=`${N}`;let F=N.length;return jf(N,F-1)&&!jf(N,F-2)&&(N=N.slice(0,-1)),N[0]==="/"?N:`/${N}`}(n(E,I,i))),S=b.map(Wd),A=new Set(b).add("");for(const E of S)A.has(E)||(A.add(E),b.push(E),S.push(Wd(E)),g.push(Df));x=(E,I)=>b[I],y=(E,I)=>S[I]}for(s=0,a=g.length;s<a;++s)o=g[s],f=g[s]=new Nr(o),(d=x(o,s,i))!=null&&(d+="")&&(l=f.id=d,w.set(l,w.has(l)?Xd:f)),(d=y(o,s,i))!=null&&(d+="")&&(f.parent=d);for(s=0;s<a;++s)if(d=(f=g[s]).parent){if(!(u=w.get(d)))throw new Error("missing: "+d);if(u===Xd)throw new Error("ambiguous: "+d);u.children?u.children.push(f):u.children=[f],f.parent=u}else{if(c)throw new Error("multiple roots");c=f}if(!c)throw new Error("no root");if(n!=null){for(;c.data===Df&&c.children.length===1;)c=c.children[0],--a;for(let b=g.length-1;b>=0&&(f=g[b]).data===Df;--b)f.data=null}if(c.parent=hy,c.eachBefore(function(b){b.depth=b.parent.depth+1,--a}).eachBefore(Pd),c.parent=null,a>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(e=Is(i),r):e},r.parentId=function(i){return arguments.length?(t=Is(i),r):t},r.path=function(i){return arguments.length?(n=Is(i),r):n},r},p.style=ct,p.subset=function(n,e){return eo(e,n)},p.sum=function(n,e){let t=0;if(e===void 0)for(let r of n)(r=+r)&&(t+=r);else{let r=-1;for(let i of n)(i=+e(i,++r,n))&&(t+=i)}return t},p.superset=eo,p.svg=hm,p.symbol=function(n,e){let t=null,r=Pa(i);function i(){let a;if(t||(t=a=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),a)return t=null,a+""||null}return n=typeof n=="function"?n:An(n||Qs),e=typeof e=="function"?e:An(e===void 0?64:+e),i.type=function(a){return arguments.length?(n=typeof a=="function"?a:An(a),i):n},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:An(+a),i):e},i.context=function(a){return arguments.length?(t=a??null,i):t},i},p.symbolAsterisk=Pp,p.symbolCircle=Qs,p.symbolCross=Op,p.symbolDiamond=Rp,p.symbolDiamond2=Dp,p.symbolPlus=jp,p.symbolSquare=Lp,p.symbolSquare2=qp,p.symbolStar=Up,p.symbolTimes=vl,p.symbolTriangle=Yp,p.symbolTriangle2=Hp,p.symbolWye=Gp,p.symbolX=vl,p.symbols=Xp,p.symbolsFill=Xp,p.symbolsStroke=Eb,p.text=Fo,p.thresholdFreedmanDiaconis=function(n,e,t){const r=Lt(n),i=hr(n,.75)-hr(n,.25);return r&&i?Math.ceil((t-e)/(2*i*Math.pow(r,-1/3))):1},p.thresholdScott=function(n,e,t){const r=Lt(n),i=Rr(n);return r&&i?Math.ceil((t-e)*Math.cbrt(r)/(3.49*i)):1},p.thresholdSturges=ki,p.tickFormat=s1,p.tickIncrement=Ct,p.tickStep=cr,p.ticks=St,p.timeDay=gi,p.timeDays=Fy,p.timeFormatDefaultLocale=W1,p.timeFormatLocale=$1,p.timeFriday=x1,p.timeFridays=Zy,p.timeHour=Ds,p.timeHours=Ly,p.timeInterval=Jn,p.timeMillisecond=pi,p.timeMilliseconds=v1,p.timeMinute=Vs,p.timeMinutes=Dy,p.timeMonday=Ia,p.timeMondays=Hy,p.timeMonth=Ls,p.timeMonths=i_,p.timeSaturday=w1,p.timeSaturdays=Ky,p.timeSecond=Rt,p.timeSeconds=y1,p.timeSunday=vi,p.timeSundays=M1,p.timeThursday=$r,p.timeThursdays=Wy,p.timeTickInterval=z1,p.timeTicks=B1,p.timeTuesday=_1,p.timeTuesdays=Gy,p.timeWednesday=b1,p.timeWednesdays=Xy,p.timeWeek=vi,p.timeWeeks=M1,p.timeYear=yt,p.timeYears=o_,p.timeout=fc,p.timer=No,p.timerFlush=dh,p.transition=_h,p.transpose=no,p.tree=function(){var n=gy,e=1,t=1,r=null;function i(c){var u=function(b){for(var S,A,E,I,N,F=new zs(b,0),W=[F];S=W.pop();)if(E=S._.children)for(S.children=new Array(N=E.length),I=N-1;I>=0;--I)W.push(A=S.children[I]=new zs(E[I],I)),A.parent=S;return(F.parent=new zs(null,0)).children=[F],F}(c);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(s);else{var f=c,d=c,l=c;c.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>l.depth&&(l=b)});var g=f===d?1:n(f,d)/2,x=g-f.x,y=e/(d.x+g+x),w=t/(l.depth||1);c.eachBefore(function(b){b.x=(b.x+x)*y,b.y=b.depth*w})}return c}function a(c){var u=c.children,f=c.parent.children,d=c.i?f[c.i-1]:null;if(u){(function(g){for(var x,y=0,w=0,b=g.children,S=b.length;--S>=0;)(x=b[S]).z+=y,x.m+=y,y+=x.s+(w+=x.c)})(c);var l=(u[0].z+u[u.length-1].z)/2;d?(c.z=d.z+n(c._,d._),c.m=c.z-l):c.z=l}else d&&(c.z=d.z+n(c._,d._));c.parent.A=function(g,x,y){if(x){for(var w,b=g,S=g,A=x,E=b.parent.children[0],I=b.m,N=S.m,F=A.m,W=E.m;A=qf(A),b=Lf(b),A&&b;)E=Lf(E),(S=qf(S)).a=g,(w=A.z+F-b.z-I+n(A._,b._))>0&&(vy(my(A,g,y),g,w),I+=w,N+=w),F+=A.m,I+=b.m,W+=E.m,N+=S.m;A&&!qf(S)&&(S.t=A,S.m+=F-N),b&&!Lf(E)&&(E.t=b,E.m+=I-W,y=g)}return y}(c,d,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function s(c){c.x*=e,c.y=c.depth*t}return i.separation=function(c){return arguments.length?(n=c,i):n},i.size=function(c){return arguments.length?(r=!1,e=+c[0],t=+c[1],i):r?null:[e,t]},i.nodeSize=function(c){return arguments.length?(r=!0,e=+c[0],t=+c[1],i):r?[e,t]:null},i},p.treemap=function(){var n=Jd,e=!1,t=1,r=1,i=[0],a=Br,o=Br,s=Br,c=Br,u=Br;function f(l){return l.x0=l.y0=0,l.x1=t,l.y1=r,l.eachBefore(d),i=[0],e&&l.eachBefore(Gd),l}function d(l){var g=i[l.depth],x=l.x0+g,y=l.y0+g,w=l.x1-g,b=l.y1-g;w<x&&(x=w=(x+w)/2),b<y&&(y=b=(y+b)/2),l.x0=x,l.y0=y,l.x1=w,l.y1=b,l.children&&(g=i[l.depth+1]=a(l)/2,x+=u(l)-g,y+=o(l)-g,(w-=s(l)-g)<x&&(x=w=(x+w)/2),(b-=c(l)-g)<y&&(y=b=(y+b)/2),n(l,x,y,w,b))}return f.round=function(l){return arguments.length?(e=!!l,f):e},f.size=function(l){return arguments.length?(t=+l[0],r=+l[1],f):[t,r]},f.tile=function(l){return arguments.length?(n=Od(l),f):n},f.padding=function(l){return arguments.length?f.paddingInner(l).paddingOuter(l):f.paddingInner()},f.paddingInner=function(l){return arguments.length?(a=typeof l=="function"?l:di(+l),f):a},f.paddingOuter=function(l){return arguments.length?f.paddingTop(l).paddingRight(l).paddingBottom(l).paddingLeft(l):f.paddingTop()},f.paddingTop=function(l){return arguments.length?(o=typeof l=="function"?l:di(+l),f):o},f.paddingRight=function(l){return arguments.length?(s=typeof l=="function"?l:di(+l),f):s},f.paddingBottom=function(l){return arguments.length?(c=typeof l=="function"?l:di(+l),f):c},f.paddingLeft=function(l){return arguments.length?(u=typeof l=="function"?l:di(+l),f):u},f},p.treemapBinary=function(n,e,t,r,i){var a,o,s=n.children,c=s.length,u=new Array(c+1);for(u[0]=o=a=0;a<c;++a)u[a+1]=o+=s[a].value;(function f(d,l,g,x,y,w,b){if(d>=l-1){var S=s[d];return S.x0=x,S.y0=y,S.x1=w,void(S.y1=b)}for(var A=u[d],E=g/2+A,I=d+1,N=l-1;I<N;){var F=I+N>>>1;u[F]<E?I=F+1:N=F}E-u[I-1]<u[I]-E&&d+1<I&&--I;var W=u[I]-A,U=g-W;if(w-x>b-y){var O=g?(x*U+w*W)/g:w;f(d,I,W,x,y,O,b),f(I,l,U,O,y,w,b)}else{var V=g?(y*U+b*W)/g:b;f(d,I,W,x,y,w,V),f(I,l,U,x,V,w,b)}})(0,c,n.value,e,t,r,i)},p.treemapDice=Aa,p.treemapResquarify=yy,p.treemapSlice=$s,p.treemapSliceDice=function(n,e,t,r,i){(1&n.depth?$s:Aa)(n,e,t,r,i)},p.treemapSquarify=Jd,p.tsv=um,p.tsvFormat=Jv,p.tsvFormatBody=Qv,p.tsvFormatRow=em,p.tsvFormatRows=nm,p.tsvFormatValue=tm,p.tsvParse=n0,p.tsvParseRows=Kv,p.union=function(...n){const e=new Ke;for(const t of n)for(const r of t)e.add(r);return e},p.unixDay=il,p.unixDays=Yy,p.utcDay=ka,p.utcDays=Uy,p.utcFriday=A1,p.utcFridays=t_,p.utcHour=js,p.utcHours=qy,p.utcMillisecond=pi,p.utcMilliseconds=v1,p.utcMinute=Rs,p.utcMinutes=jy,p.utcMonday=Na,p.utcMondays=Jy,p.utcMonth=qs,p.utcMonths=a_,p.utcSaturday=S1,p.utcSaturdays=r_,p.utcSecond=Rt,p.utcSeconds=y1,p.utcSunday=mi,p.utcSundays=C1,p.utcThursday=Or,p.utcThursdays=e_,p.utcTickInterval=N1,p.utcTicks=I1,p.utcTuesday=E1,p.utcTuesdays=Qy,p.utcWednesday=T1,p.utcWednesdays=n_,p.utcWeek=mi,p.utcWeeks=C1,p.utcYear=_t,p.utcYears=s_,p.variance=wi,p.version="7.8.4",p.window=fo,p.xml=fm,p.zip=function(){return no(arguments)},p.zoom=function(){var n,e,t,r=Ob,i=Vb,a=jb,o=Rb,s=Db,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],f=250,d=oh,l=ut("start","zoom","end"),g=500,x=150,y=0,w=10;function b(B){B.property("__zoom",dg).on("wheel.zoom",W,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",O).filter(s).on("touchstart.zoom",V).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(B,L){return(L=Math.max(c[0],Math.min(c[1],L)))===B.k?B:new bt(L,B.x,B.y)}function A(B,L,X){var K=L[0]-X[0]*B.k,Q=L[1]-X[1]*B.k;return K===B.x&&Q===B.y?B:new bt(B.k,K,Q)}function E(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function I(B,L,X,K){B.on("start.zoom",function(){N(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(K).end()}).tween("zoom",function(){var Q=this,rn=arguments,sn=N(Q,rn).event(K),an=i.apply(Q,rn),hn=X==null?E(an):typeof X=="function"?X.apply(Q,rn):X,En=Math.max(an[1][0]-an[0][0],an[1][1]-an[0][1]),vn=Q.__zoom,_n=typeof L=="function"?L.apply(Q,rn):L,Ln=d(vn.invert(hn).concat(En/vn.k),_n.invert(hn).concat(En/_n.k));return function(Tn){if(Tn===1)Tn=_n;else{var Kn=Ln(Tn),Oe=En/Kn[2];Tn=new bt(Oe,hn[0]-Kn[0]*Oe,hn[1]-Kn[1]*Oe)}sn.zoom(null,Tn)}})}function N(B,L,X){return!X&&B.__zooming||new F(B,L)}function F(B,L){this.that=B,this.args=L,this.active=0,this.sourceEvent=null,this.extent=i.apply(B,L),this.taps=0}function W(B,...L){if(r.apply(this,arguments)){var X=N(this,L).event(B),K=this.__zoom,Q=Math.max(c[0],Math.min(c[1],K.k*Math.pow(2,o.apply(this,arguments)))),rn=J(B);if(X.wheel)X.mouse[0][0]===rn[0]&&X.mouse[0][1]===rn[1]||(X.mouse[1]=K.invert(X.mouse[0]=rn)),clearTimeout(X.wheel);else{if(K.k===Q)return;X.mouse=[rn,K.invert(rn)],xr(this),X.start()}Ra(B),X.wheel=setTimeout(function(){X.wheel=null,X.end()},x),X.zoom("mouse",a(A(S(K,Q),X.mouse[0],X.mouse[1]),X.extent,u))}}function U(B,...L){if(!t&&r.apply(this,arguments)){var X=B.currentTarget,K=N(this,L,!0).event(B),Q=q(B.view).on("mousemove.zoom",function(hn){if(Ra(hn),!K.moved){var En=hn.clientX-sn,vn=hn.clientY-an;K.moved=En*En+vn*vn>y}K.event(hn).zoom("mouse",a(A(K.that.__zoom,K.mouse[0]=J(hn,X),K.mouse[1]),K.extent,u))},!0).on("mouseup.zoom",function(hn){Q.on("mousemove.zoom mouseup.zoom",null),Rn(hn.view,K.moved),Ra(hn),K.event(hn).end()},!0),rn=J(B,X),sn=B.clientX,an=B.clientY;dn(B.view),wl(B),K.mouse=[rn,this.__zoom.invert(rn)],xr(this),K.start()}}function O(B,...L){if(r.apply(this,arguments)){var X=this.__zoom,K=J(B.changedTouches?B.changedTouches[0]:B,this),Q=X.invert(K),rn=X.k*(B.shiftKey?.5:2),sn=a(A(S(X,rn),K,Q),i.apply(this,L),u);Ra(B),f>0?q(this).transition().duration(f).call(I,sn,K,B):q(this).call(b.transform,sn,K,B)}}function V(B,...L){if(r.apply(this,arguments)){var X,K,Q,rn,sn=B.touches,an=sn.length,hn=N(this,L,B.changedTouches.length===an).event(B);for(wl(B),K=0;K<an;++K)rn=[rn=J(Q=sn[K],this),this.__zoom.invert(rn),Q.identifier],hn.touch0?hn.touch1||hn.touch0[2]===rn[2]||(hn.touch1=rn,hn.taps=0):(hn.touch0=rn,X=!0,hn.taps=1+!!n);n&&(n=clearTimeout(n)),X&&(hn.taps<2&&(e=rn[0],n=setTimeout(function(){n=null},g)),xr(this),hn.start())}}function j(B,...L){if(this.__zooming){var X,K,Q,rn,sn=N(this,L).event(B),an=B.changedTouches,hn=an.length;for(Ra(B),X=0;X<hn;++X)Q=J(K=an[X],this),sn.touch0&&sn.touch0[2]===K.identifier?sn.touch0[0]=Q:sn.touch1&&sn.touch1[2]===K.identifier&&(sn.touch1[0]=Q);if(K=sn.that.__zoom,sn.touch1){var En=sn.touch0[0],vn=sn.touch0[1],_n=sn.touch1[0],Ln=sn.touch1[1],Tn=(Tn=_n[0]-En[0])*Tn+(Tn=_n[1]-En[1])*Tn,Kn=(Kn=Ln[0]-vn[0])*Kn+(Kn=Ln[1]-vn[1])*Kn;K=S(K,Math.sqrt(Tn/Kn)),Q=[(En[0]+_n[0])/2,(En[1]+_n[1])/2],rn=[(vn[0]+Ln[0])/2,(vn[1]+Ln[1])/2]}else{if(!sn.touch0)return;Q=sn.touch0[0],rn=sn.touch0[1]}sn.zoom("touch",a(A(K,Q,rn),sn.extent,u))}}function Z(B,...L){if(this.__zooming){var X,K,Q=N(this,L).event(B),rn=B.changedTouches,sn=rn.length;for(wl(B),t&&clearTimeout(t),t=setTimeout(function(){t=null},g),X=0;X<sn;++X)K=rn[X],Q.touch0&&Q.touch0[2]===K.identifier?delete Q.touch0:Q.touch1&&Q.touch1[2]===K.identifier&&delete Q.touch1;if(Q.touch1&&!Q.touch0&&(Q.touch0=Q.touch1,delete Q.touch1),Q.touch0)Q.touch0[1]=this.__zoom.invert(Q.touch0[0]);else if(Q.end(),Q.taps===2&&(K=J(K,this),Math.hypot(e[0]-K[0],e[1]-K[1])<w)){var an=q(this).on("dblclick.zoom");an&&an.apply(this,arguments)}}}return b.transform=function(B,L,X,K){var Q=B.selection?B.selection():B;Q.property("__zoom",dg),B!==Q?I(B,L,X,K):Q.interrupt().each(function(){N(this,arguments).event(K).start().zoom(null,typeof L=="function"?L.apply(this,arguments):L).end()})},b.scaleBy=function(B,L,X,K){b.scaleTo(B,function(){return this.__zoom.k*(typeof L=="function"?L.apply(this,arguments):L)},X,K)},b.scaleTo=function(B,L,X,K){b.transform(B,function(){var Q=i.apply(this,arguments),rn=this.__zoom,sn=X==null?E(Q):typeof X=="function"?X.apply(this,arguments):X,an=rn.invert(sn),hn=typeof L=="function"?L.apply(this,arguments):L;return a(A(S(rn,hn),sn,an),Q,u)},X,K)},b.translateBy=function(B,L,X,K){b.transform(B,function(){return a(this.__zoom.translate(typeof L=="function"?L.apply(this,arguments):L,typeof X=="function"?X.apply(this,arguments):X),i.apply(this,arguments),u)},null,K)},b.translateTo=function(B,L,X,K,Q){b.transform(B,function(){var rn=i.apply(this,arguments),sn=this.__zoom,an=K==null?E(rn):typeof K=="function"?K.apply(this,arguments):K;return a(ou.translate(an[0],an[1]).scale(sn.k).translate(typeof L=="function"?-L.apply(this,arguments):-L,typeof X=="function"?-X.apply(this,arguments):-X),rn,u)},K,Q)},F.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active==1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,L){return this.mouse&&B!=="mouse"&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return--this.active==0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var L=q(this.that).datum();l.call(B,this.that,new Pb(B,{sourceEvent:this.sourceEvent,target:b,type:B,transform:this.that.__zoom,dispatch:l}),L)}},b.wheelDelta=function(B){return arguments.length?(o=typeof B=="function"?B:au(+B),b):o},b.filter=function(B){return arguments.length?(r=typeof B=="function"?B:au(!!B),b):r},b.touchable=function(B){return arguments.length?(s=typeof B=="function"?B:au(!!B),b):s},b.extent=function(B){return arguments.length?(i=typeof B=="function"?B:au([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),b):i},b.scaleExtent=function(B){return arguments.length?(c[0]=+B[0],c[1]=+B[1],b):[c[0],c[1]]},b.translateExtent=function(B){return arguments.length?(u[0][0]=+B[0][0],u[1][0]=+B[1][0],u[0][1]=+B[0][1],u[1][1]=+B[1][1],b):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},b.constrain=function(B){return arguments.length?(a=B,b):a},b.duration=function(B){return arguments.length?(f=+B,b):f},b.interpolate=function(B){return arguments.length?(d=B,b):d},b.on=function(){var B=l.on.apply(l,arguments);return B===l?b:B},b.clickDistance=function(B){return arguments.length?(y=(B=+B)*B,b):Math.sqrt(y)},b.tapDistance=function(B){return arguments.length?(w=+B,b):w},b},p.zoomIdentity=ou,p.zoomTransform=hg}),function(p,$){typeof exports=="object"&&typeof module<"u"?$(exports):typeof define=="function"&&define.amd?define(["exports"],$):$(p.d3=p.d3||{})}(this,function(p){"use strict";function $(){function h(v,m){const M=Math.max(...v.map(_=>(_[0].x=0,_.slice(1).forEach((T,C)=>{const z=_[C];T.x=z.x+m(z,T)}),_[_.length-1].x)));return v.forEach(_=>{const T=_[_.length-1].x/2;_.forEach(C=>{C.x=(C.x-T)/M+.5})}),v}return h}function un(){let h=ln;function v(m,M){m.forEach(C=>C.forEach(z=>z.degree=z.children.length+(z.data?0:-3))),m.forEach(C=>C.forEach(z=>z.children.forEach(k=>++k.degree))),m[0][0].x=0,m[0].slice(1).forEach((C,z)=>{const k=m[0][z];C.x=k.x+M(k,C)}),m.slice(0,m.length-1).forEach((C,z)=>{const k=m[z+1];h(C,k),k.map((R,P)=>[R,P]).sort(([R,P],[D,q])=>R.degree===D.degree?P-q:D.degree-R.degree).forEach(([R,P])=>{k.slice(P+1).reduce((D,q)=>(q.x=Math.max(q.x,D.x+M(D,q)),q),R),k.slice(0,P).reverse().reduce((D,q)=>(q.x=Math.min(q.x,D.x-M(q,D)),q),R)})});const _=Math.min(...m.map(C=>Math.min(...C.map(z=>z.x)))),T=Math.max(...m.map(C=>Math.max(...C.map(z=>z.x))))-_;return m.forEach(C=>C.forEach(z=>z.x=(z.x-_)/T)),m.forEach(C=>C.forEach(z=>delete z.degree)),m}return v}function ln(h,v){v.forEach(m=>{m.x=0,m._count=0}),h.forEach(m=>m.children.forEach(M=>M.x+=(m.x-M.x)/++M._count)),v.forEach(m=>delete m._count)}let pn=1e-60,kn,Pn;do pn+=pn,kn=1+.1*pn,Pn=1+.2*pn;while(kn<=1||Pn<=1);var Ve=pn;function Mt(h,v,m){let M,_;for(let T=1;T<=m;T+=1){h[T][T]=1/h[T][T],_=-h[T][T];for(let C=1;C<T;C+=1)h[C][T]*=_;if(M=T+1,m<M)break;for(let C=M;C<=m;C+=1){_=h[T][C],h[T][C]=0;for(let z=1;z<=T;z+=1)h[z][C]+=_*h[z][T]}}}var We=Mt;function Re(h,v,m,M){let _,T;for(_=1;_<=m;_+=1){T=0;for(let C=1;C<_;C+=1)T+=h[C][_]*M[C];M[_]=(M[_]-T)/h[_][_]}for(let C=1;C<=m;C+=1){_=m+1-C,M[_]/=h[_][_],T=-M[_];for(let z=1;z<_;z+=1)M[z]+=T*h[z][_]}}var Ze=Re;function Vr(h,v,m,M){let _,T,C;for(let z=1;z<=m;z+=1){if(M[1]=z,C=0,_=z-1,_<1){if(C=h[z][z]-C,C<=0)break;h[z][z]=Math.sqrt(C)}else{for(let k=1;k<=_;k+=1){T=h[k][z];for(let R=1;R<k;R+=1)T-=h[R][z]*h[R][k];T/=h[k][k],h[k][z]=T,C+=T*T}if(C=h[z][z]-C,C<=0)break;h[z][z]=Math.sqrt(C)}M[1]=0}}var ja=Vr;function Bn(h,v,m,M,_,T,C,z,k,R,P,D,q,G=0,en,H,tn){let J,nn,cn,fn,on,dn,Rn,Nn,bn,Mn,ne,Be,qe,re;const Se=Math.min(M,P);let On=2*M+Se*(Se+5)/2+2*P+1;for(let Y=1;Y<=M;Y+=1)H[Y]=v[Y];for(let Y=M+1;Y<=On;Y+=1)H[Y]=0;for(let Y=1;Y<=P;Y+=1)q[Y]=0,T[Y]=0;const ze=[];if(tn[1]===0){if(ja(h,m,M,ze),ze[1]!==0){tn[1]=2;return}Ze(h,m,M,v),We(h,m,M)}else{for(let Y=1;Y<=M;Y+=1){_[Y]=0;for(let mn=1;mn<=Y;mn+=1)_[Y]+=h[mn][Y]*v[mn]}for(let Y=1;Y<=M;Y+=1){v[Y]=0;for(let mn=Y;mn<=M;mn+=1)v[Y]+=h[Y][mn]*_[mn]}}C[1]=0;for(let Y=1;Y<=M;Y+=1){_[Y]=v[Y],C[1]+=H[Y]*_[Y],H[Y]=0;for(let mn=Y+1;mn<=M;mn+=1)h[mn][Y]=0}C[1]=-C[1]/2,tn[1]=0;const ie=M,ae=ie+M,qn=ae+Se,oe=qn+Se+1,ft=oe+Se*(Se+1)/2,Yi=ft+P;for(let Y=1;Y<=P;Y+=1){dn=0;for(let mn=1;mn<=M;mn+=1)dn+=z[mn][Y]*z[mn][Y];H[Yi+Y]=Math.sqrt(dn)}fn=G,en[1]=0,en[2]=0;function Hu(){en[1]+=1,On=ft;for(let Y=1;Y<=P;Y+=1){On+=1,dn=-k[Y];for(let mn=1;mn<=M;mn+=1)dn+=z[mn][Y]*_[mn];if(Math.abs(dn)<Ve&&(dn=0),Y>D)H[On]=dn;else if(H[On]=-Math.abs(dn),dn>0){for(let mn=1;mn<=M;mn+=1)z[mn][Y]=-z[mn][Y];k[Y]=-k[Y]}}for(let Y=1;Y<=fn;Y+=1)H[ft+q[Y]]=0;cn=0,on=0;for(let Y=1;Y<=P;Y+=1)H[ft+Y]<on*H[Yi+Y]&&(cn=Y,on=H[ft+Y]/H[Yi+Y]);if(cn===0){for(let Y=1;Y<=fn;Y+=1)T[q[Y]]=H[qn+Y];return 999}return 0}function Gu(){for(let Y=1;Y<=M;Y+=1){dn=0;for(let mn=1;mn<=M;mn+=1)dn+=h[mn][Y]*z[mn][cn];H[Y]=dn}J=ie;for(let Y=1;Y<=M;Y+=1)H[J+Y]=0;for(let Y=fn+1;Y<=M;Y+=1)for(let mn=1;mn<=M;mn+=1)H[J+mn]=H[J+mn]+h[mn][Y]*H[Y];Be=!0;for(let Y=fn;Y>=1;Y-=1){dn=H[Y],On=oe+Y*(Y+3)/2,J=On-Y;for(let mn=Y+1;mn<=fn;mn+=1)dn-=H[On]*H[ae+mn],On+=mn;dn/=H[J],H[ae+Y]=dn,!(q[Y]<=D)&&(dn<=0||(Be=!1,nn=Y))}if(!Be){Rn=H[qn+nn]/H[ae+nn];for(let Y=1;Y<=fn;Y+=1)q[Y]<=D||H[ae+Y]<=0||(on=H[qn+Y]/H[ae+Y],on<Rn&&(Rn=on,nn=Y))}dn=0;for(let Y=ie+1;Y<=ie+M;Y+=1)dn+=H[Y]*H[Y];if(Math.abs(dn)<=Ve){if(Be)return tn[1]=1,999;for(let Y=1;Y<=fn;Y+=1)H[qn+Y]=H[qn+Y]-Rn*H[ae+Y];return H[qn+fn+1]=H[qn+fn+1]+Rn,700}dn=0;for(let Y=1;Y<=M;Y+=1)dn+=H[ie+Y]*z[Y][cn];Nn=-H[ft+cn]/dn,qe=!0,Be||Rn<Nn&&(Nn=Rn,qe=!1);for(let Y=1;Y<=M;Y+=1)_[Y]+=Nn*H[ie+Y],Math.abs(_[Y])<Ve&&(_[Y]=0);C[1]+=Nn*dn*(Nn/2+H[qn+fn+1]);for(let Y=1;Y<=fn;Y+=1)H[qn+Y]=H[qn+Y]-Nn*H[ae+Y];if(H[qn+fn+1]=H[qn+fn+1]+Nn,qe){fn+=1,q[fn]=cn,On=oe+(fn-1)*fn/2+1;for(let Y=1;Y<=fn-1;Y+=1)H[On]=H[Y],On+=1;if(fn===M)H[On]=H[M];else{for(let Y=M;Y>=fn+1;Y-=1)if(H[Y]!==0&&(bn=Math.max(Math.abs(H[Y-1]),Math.abs(H[Y])),Mn=Math.min(Math.abs(H[Y-1]),Math.abs(H[Y])),H[Y-1]>=0?on=Math.abs(bn*Math.sqrt(1+Mn*Mn/(bn*bn))):on=-Math.abs(bn*Math.sqrt(1+Mn*Mn/(bn*bn))),bn=H[Y-1]/on,Mn=H[Y]/on,bn!==1))if(bn===0){H[Y-1]=Mn*on;for(let mn=1;mn<=M;mn+=1)on=h[mn][Y-1],h[mn][Y-1]=h[mn][Y],h[mn][Y]=on}else{H[Y-1]=on,ne=Mn/(1+bn);for(let mn=1;mn<=M;mn+=1)on=bn*h[mn][Y-1]+Mn*h[mn][Y],h[mn][Y]=ne*(h[mn][Y-1]+on)-h[mn][Y],h[mn][Y-1]=on}H[On]=H[fn]}}else{dn=-k[cn];for(let Y=1;Y<=M;Y+=1)dn+=_[Y]*z[Y][cn];if(cn>D)H[ft+cn]=dn;else if(H[ft+cn]=-Math.abs(dn),dn>0){for(let Y=1;Y<=M;Y+=1)z[Y][cn]=-z[Y][cn];k[cn]=-k[cn]}return 700}return 0}function Xu(){if(On=oe+nn*(nn+1)/2+1,J=On+nn,H[J]===0||(bn=Math.max(Math.abs(H[J-1]),Math.abs(H[J])),Mn=Math.min(Math.abs(H[J-1]),Math.abs(H[J])),H[J-1]>=0?on=Math.abs(bn*Math.sqrt(1+Mn*Mn/(bn*bn))):on=-Math.abs(bn*Math.sqrt(1+Mn*Mn/(bn*bn))),bn=H[J-1]/on,Mn=H[J]/on,bn===1))return 798;if(bn===0){for(let Y=nn+1;Y<=fn;Y+=1)on=H[J-1],H[J-1]=H[J],H[J]=on,J+=Y;for(let Y=1;Y<=M;Y+=1)on=h[Y][nn],h[Y][nn]=h[Y][nn+1],h[Y][nn+1]=on}else{ne=Mn/(1+bn);for(let Y=nn+1;Y<=fn;Y+=1)on=bn*H[J-1]+Mn*H[J],H[J]=ne*(H[J-1]+on)-H[J],H[J-1]=on,J+=Y;for(let Y=1;Y<=M;Y+=1)on=bn*h[Y][nn]+Mn*h[Y][nn+1],h[Y][nn+1]=ne*(h[Y][nn]+on)-h[Y][nn+1],h[Y][nn]=on}return 0}function Wu(){J=On-nn;for(let Y=1;Y<=nn;Y+=1)H[J]=H[On],On+=1,J+=1;return H[qn+nn]=H[qn+nn+1],q[nn]=q[nn+1],nn+=1,nn<fn?797:0}function go(){return H[qn+fn]=H[qn+fn+1],H[qn+fn+1]=0,q[fn]=0,fn-=1,en[2]+=1,0}for(re=0;;){if(re=Hu(),re===999)return;for(;re=Gu(),re!==0;){if(re===999)return;if(re===700)if(nn===fn)go();else{for(;Xu(),re=Wu(),re===797;);go()}}}}var Qn=Bn;function De(h,v,m,M=[],_=0,T=[0,0]){const C=[],z=[],k=[],R=[],P=[],D=[];let q="";const G=h.length-1,en=m[1].length-1;if(!M)for(let J=1;J<=en;J+=1)M[J]=0;if(G!==h[1].length-1&&(q="Dmat is not symmetric!"),G!==v.length-1&&(q="Dmat and dvec are incompatible!"),G!==m.length-1&&(q="Amat and dvec are incompatible!"),en!==M.length-1&&(q="Amat and bvec are incompatible!"),(_>en||_<0)&&(q="Value of meq is invalid!"),q!=="")return{message:q};for(let J=1;J<=en;J+=1)z[J]=0,R[J]=0;const H=0,tn=Math.min(G,en);for(let J=1;J<=G;J+=1)k[J]=0;C[1]=0;for(let J=1;J<=2*G+tn*(tn+5)/2+2*en+1;J+=1)P[J]=0;for(let J=1;J<=2;J+=1)D[J]=0;return Qn(h,v,G,G,k,R,C,m,M,G,en,_,z,H,D,P,T),T[1]===1&&(q="constraints are inconsistent, no solution!"),T[1]===2&&(q="matrix D in quadratic function is not positive definite!"),{solution:k,Lagrangian:R,value:C,unconstrained_solution:v,iterations:D,iact:z,message:q}}var sr=De,Lt={solveQP:sr};const{solveQP:uu}=Lt;var cu=function(h,v,m,M,_=0,T=!1){const C=[null].concat(h.map(J=>[null].concat(J))),z=[null].concat(v.map(J=>-J)),k=[null].concat(m.length===0?new Array(h.length).fill([null]):m[0].map((J,nn)=>[null].concat(m.map(cn=>-cn[nn])))),R=[null].concat(M.map(J=>-J)),{solution:P,Lagrangian:D,value:q,unconstrained_solution:G,iterations:en,iact:H,message:tn}=uu(C,z,k,R,_,[,+T]);if(tn.length>0)throw new Error(tn);{P.shift(),D.shift(),G.shift(),H.push(0);const J=H.slice(1,H.indexOf(0)).map(on=>on-1),[,nn]=q,[,cn,fn]=en;return{solution:P,lagrangian:D,unconstrained:G,iterations:cn,inactive:fn,active:J,value:nn}}},fu=cu;function wi(h){const v={};let m=0;return h.forEach(M=>M.forEach(_=>v[_.id]=m++)),v}function Rr(h,v,m){const M=1+Math.max(...Object.values(v)),_=[],T=[];return h.forEach(C=>C.slice(0,C.length-1).forEach((z,k)=>{const R=C[k+1],P=v[z.id],D=v[R.id],q=new Array(M).fill(0);q[P]=1,q[D]=-1,_.push(q),T.push(-m(z,R))})),[_,T]}function Et(h,v,m,M){h[m][m]+=M,h[m][v]-=M,h[v][m]-=M,h[v][v]+=M}function Hn(h,v,m,M,_){h[M][M]+=_,h[M][m]-=2*_,h[M][v]+=_,h[m][M]-=2*_,h[m][m]+=4*_,h[m][v]-=2*_,h[v][M]+=_,h[v][m]-=2*_,h[v][v]+=_}function Tt(h,v,m,M,_=0){v.pop(),h.pop(),h.forEach(C=>C.pop()),m.forEach(C=>C.pop());const{solution:T}=fu(h,v,m,M,_);return T.push(0),T}function Ke(h,v,m){const M=Math.min(...m),_=Math.max(...m)-M;h.forEach(T=>T.forEach(C=>C.x=(m[v[C.id]]-M)/_))}function Mi(h){if(h<0||h>=1)throw new Error(`weight must be in [0, 1), but was ${h}`);return h}function La(){let h=.5;function v(m,M){const _=wi(m),T=Object.keys(_).length,[C,z]=Rr(m,_,M),k=new Array(T).fill(0),R=new Array(T).fill(null).map(()=>new Array(T).fill(0));m.forEach(D=>D.forEach(q=>{const G=_[q.id];q.children.forEach(en=>{const H=_[en.id];Et(R,G,H,1-h)})})),m.forEach(D=>D.forEach(q=>{const G=_[q.id];q.children.forEach(en=>{const H=_[en.id];en.children.forEach(tn=>{const J=_[tn.id];Hn(R,G,H,J,h)})})}));const P=Tt(R,k,C,z);return Ke(m,_,P),m}return v.weight=function(m){return arguments.length?(h=Mi(m),v):h},v}function qa(){function h(v,m){if(!v.every(D=>D.reduce((q,G)=>q+!!G.data,0)===1))throw new Error("coordTopological() only works with a topological ordering");const M={};let _=0;v.forEach(D=>D.forEach(q=>q.data||(M[q.id]=_++))),v.forEach(D=>D.forEach(q=>M[q.id]===void 0&&(M[q.id]=_)));const T=++_,[C,z]=Rr(v,M,m),k=new Array(T).fill(0),R=new Array(T).fill(null).map(()=>new Array(T).fill(0));v.forEach(D=>D.forEach(q=>{const G=M[q.id];q.children.forEach(en=>{if(!en.data){const H=M[en.id];en.children.forEach(tn=>{const J=M[tn.id];Hn(R,G,H,J,1)})}})}));const P=Tt(R,k,C,z);return Ke(v,M,P),v}return h}function Fa(){function h(v,m){const M=wi(v),_=Object.keys(M).length,[T,C]=Rr(v,M,m),z=new Array(_).fill(0),k=new Array(_).fill(null).map(()=>new Array(_).fill(0));v.forEach(P=>P.forEach(D=>{const q=M[D.id];D.children.forEach(G=>{const en=M[G.id];D.data&&Et(k,q,en,1),G.data&&Et(k,q,en,1)})})),v.forEach(P=>P.forEach(D=>{const q=M[D.id];D.children.forEach(G=>{if(!G.data){const en=M[G.id];G.children.forEach(H=>{const tn=M[H.id];Hn(k,q,en,tn,1)})}})}));const R=Tt(k,z,T,C);return Ke(v,M,R),v}return h}function At(){function h(m,M,_){const T=Math.max(...m.map(R=>Math.max(...R.map(P=>P.columnIndex+1))));let C=Array.from(Array(T).keys()).map((R,P)=>P).map(M),z=Array.from(Array(T).keys()).map((R,P)=>P).map(_);const k=Math.max(...m.map(R=>(R.forEach(P=>{P.x0=v(C,z,P.columnIndex),P.x1=P.x0+C[P.columnIndex]}),Math.max(...R.map(P=>P.x1)))));return m.forEach(R=>{R.forEach(P=>{P.x0=P.x0/k,P.x1=P.x1/k})}),m}return h;function v(m,M,_){let T=m.filter((z,k)=>k<_),C=M.filter((z,k)=>k<_);return T.concat(C).reduce((z,k)=>z+k,0)}}function Ua(){function h(v){v.forEach(m=>{m.forEach((M,_)=>M.columnIndex=_)})}return h}function Ya(){function h(v){const m=Math.max(...v.map(M=>M.length));v.forEach(M=>{const _=M.length,T=Math.floor((m-_)/2);M.forEach((C,z)=>C.columnIndex=T+z)})}return h}function Ha(){let h=!1;function v(m){if(m.length==0)return;const M=Math.max(...m.map(k=>k.length)),_=m.findIndex(k=>k.length===M);m[_].forEach((k,R)=>k.columnIndex=R);for(let k=_-1;k>=0;k--)T(m[k]);for(let k=_+1;k<m.length;k++)C(m[k]);function T(k){let R;if(k.length===M)R=k.map((P,D)=>D);else{const P=k.map((D,q)=>{if(D.children==null||D.children.length===0)return q;const G=D.children.map(en=>en.columnIndex);return h?G[Math.floor((G.length-1)/2)]:Math.min(...G)});R=z(P)}k.forEach((P,D)=>P.columnIndex=R[D])}function C(k){let R;if(k.length===M)R=k.map((P,D)=>D);else{const P=k.map((D,q)=>{if(D.parents==null||D.parents.length===0)return q;const G=D.parents.map(en=>en.columnIndex);return h?G[Math.floor((G.length-1)/2)]:Math.min(...G)});R=z(P)}k.forEach((P,D)=>P.columnIndex=R[D])}function z(k){if(!k.every(q=>isFinite(q)))throw"columnComplex: non-finite column index encountered";let R=-1;k=k.map(q=>(q<=R&&(q=R+1),R=q,q));const D=Math.max(...k)-(M-1);return D>0&&(k=k.map((q,G)=>Math.max(q-D,G))),k}}return v.center=function(m){return arguments.length?(h=m,v):h},v}function Ei(){let h=!1;function v(m){if(m.length==0)return;let M=[];m.forEach(z=>z.forEach(k=>{(k.parents==null||k.parents.length===0)&&M.push(k)}));let _=0;M.forEach(z=>{const k=T(z);z.columnIndex=_+(h?Math.floor((k-1)/2):0),C(z,_),_+=k});function T(z){return z.children.length===0?1:z.children.reduce((k,R)=>k+T(R),0)}function C(z,k){const R=z.children.map(T);let P=k;z.children.forEach((D,q)=>{D.columnIndex===void 0&&(D.columnIndex=P+(h?Math.floor((R[q]-1)/2):0),C(D,P),P+=R[q])})}}return v.center=function(m){return arguments.length?(h=m,v):h},v}function Ga(){const h=[];return this.eachChildLinks(v=>h.push(v)),h}function Xa(){return this.eachAfter(h=>{h.children.length?(h._leaves=Object.assign({},...h.children.map(v=>v._leaves)),h.value=Object.keys(h._leaves).length):(h._leaves={[h.id]:!0},h.value=1)}),this.each(h=>delete h._leaves),this}function qt(){if(this.id!==void 0)return!0;const h=this.roots().map(M=>M.descendants().map(_=>_.id)),v=h.map(()=>!1),m=[v.length-1];for(;m.length;){const M=m.pop();if(v[M])continue;const _={};v[M]=!0,h[M].forEach(T=>_[T]=!0),h.forEach((T,C)=>{T.some(z=>_[z])&&m.push(C)})}return v.every(M=>M)}function Wa(){return this.each(h=>{h.children.forEach(v=>(v._parents||(v._parents=[])).push(h))}),this.eachBefore(h=>{h.value=Math.max(0,...(h._parents||[]).map(v=>1+v.value))}),this.each(h=>delete h._parents),this}function Ti(){const h=[];return this.each(v=>h.push(v)),h}function Ai(h){const v=[];return this.eachBefore(m=>v.push(m)),v.reverse().forEach(h),this}function Ft(h){this.each(_=>_._num_before=0),this.each(_=>_.children.forEach(T=>++T._num_before));const v=this.roots();let m,M=0;for(;m=v.pop();)h(m,M++),m.children.forEach(_=>--_._num_before||v.push(_));return this.each(_=>delete _._num_before),this}function lu(h){const v={};let m=[],M=this.roots(),_=0;do{m=M.reverse(),M=[];let T;for(;T=m.pop();)v[T.id]||(v[T.id]=!0,h(T,_++),M.push(...T.children))}while(M.length)}function Si(h){if(this.id!==void 0){let v=0;this.children.forEach((m,M)=>h({source:this,target:m,data:this._childLinkData[M]},v++))}return this}function hu(h){const v=this.roots(),m={};let M,_=0;for(;M=v.pop();)m[M.id]||(m[M.id]=!0,h(M,_++),v.push(...M.children));return this}function du(h){let v=0;return this.each(m=>m.eachChildLinks(M=>h(M,v++))),this}function pu(h){const v={};return h.forEach(m=>v[m]=!0),v}function ur(h){const v={};return h.each(m=>v[m.id]=[m.data,pu(m.children.map(M=>M.id))]),v}function St(h,v){return Object.keys(h).length===Object.keys(v).length&&Object.keys(h).every(m=>v[m])}function Ct(h){const v=ur(this),m=ur(h);return Object.keys(v).length===Object.keys(m).length&&Object.entries(v).every(([M,[_,T]])=>{const C=m[M];if(!C)return!1;const[z,k]=C;return _===z&&St(T,k)})}const cr={};function Ci(h){try{this.each((v,m)=>{if(!h(v,m))throw cr})}catch(v){if(v===cr)return!1;throw v}return!0}function ki(){return this.eachAfter(h=>h.value=Math.max(0,...h.children.map(v=>1+v.value)))}function Za(){const h=[];return this.eachLinks(v=>h.push(v)),h}function fr(h,v){let m=v;return this.each((M,_)=>{m=h(m,M,_)}),m}function Ii(){return this.id===void 0?this.children.slice():[this]}function Dr(){return this.reduce(h=>h+1,0)}const jr={};function Lr(h){try{this.each(v=>{if(h(v))throw jr})}catch(v){if(v===jr)return!0;throw v}return!1}function lr(h){return this.eachAfter((v,m)=>{const M=+h(v.data,m);v._descendants=Object.assign({[v.id]:M},...v.children.map(_=>_._descendants)),v.value=Object.values(v._descendants).reduce((_,T)=>_+T)}),this.each(v=>delete v._descendants),this}function te(h,v){this.id=h,this.data=v,this.children=[],this._childLinkData=[]}function hr(){const h=[],v=[],m={};if(this.each(M=>{h.push(M);const _=new te(M.id,M.data);v.push(_),m[_.id]=_}),v.forEach((M,_)=>{const T=h[_];M.children=T.children.map(C=>m[C.id])}),this.id===void 0){const M=new te(void 0,void 0);M.children=this.children.map(_=>m[_.id])}else return m[this.id]}function Ka(){const h=[],v=[],m={},M=new te(void 0,void 0);return this.each(_=>{h.push(_);const T=new te(_.id,_.data);v.push(T),m[T.id]=T,_.children.length||M.children.push(T)}),v.forEach((_,T)=>{const C=h[T];C.children.map((z,k)=>{const R=m[z.id];R.children.push(_),R._childLinkData.push(C._childLinkData[k])})}),M.children.length>1?M:M.children[0]}te.prototype={constructor:te,childLinks:Ga,copy:hr,count:Xa,connected:qt,depth:Wa,descendants:Ti,each:hu,eachAfter:Ai,eachBefore:Ft,eachBreadth:lu,eachChildLinks:Si,eachLinks:du,equals:Ct,every:Ci,height:ki,links:Za,reduce:fr,reverse:Ka,roots:Ii,size:Dr,some:Lr,sum:lr};function Ni(h){if(h.id!==void 0)throw new Error("invalid format for verification");if(!h.children.length)throw new Error("no roots");const v={},m={};let M;function _(C){if(v[C.id])return!1;if(m[C.id])return M=C.id,[C.id];{m[C.id]=!0;let z=C.children.reduce((k,R)=>k||_(R),!1);return delete m[C.id],v[C.id]=!0,z&&M&&z.push(C.id),M===C.id&&(M=void 0),z}}const T=h.id===void 0?h.children.reduce((C,z)=>C||_(z),!1):_(h);if(T)throw new Error("dag contained a cycle: "+T.reverse().join(" -> "));if(h.each(C=>{if(C.id.indexOf("\0")>=0)throw new Error("node id contained null character");if(!C.data)throw new Error("node contained falsy data")}),h.links().some(({data:C})=>!C))throw new Error("dag had falsy link data")}function qr(){if(arguments.length)throw Error(`got arguments to dagStratify(${arguments}), but constructor takes no aruguments. These were probably meant as data which should be called as dagStratify()(...)`);let h=gu,v=st,m=Ja;function M(_){if(!_.length)throw new Error("can't stratify empty data");const T=_.map((k,R)=>{const P=h(k,R);try{return new te(P.toString(),k)}catch{throw Error(`node ids must have toString but got ${P} from ${k}`)}}),C={};T.forEach(k=>{if(C[k.id])throw new Error("found a duplicate id: "+k.id);C[k.id]=k});const z=new te(void 0,void 0);return T.forEach(k=>{const R=v(k.data)||[];R.forEach(P=>{const D=C[P];if(!D)throw new Error("missing id: "+P);return D.children.push(k),D._childLinkData.push(m(D.data,k.data)),D}),R.length||z.children.push(k)}),Ni(z),z.children.length>1?z:z.children[0]}return M.id=function(_){return arguments.length?(h=_,M):h},M.parentIds=function(_){return arguments.length?(v=_,M):v},M.linkData=function(_){return arguments.length?(m=_,M):m},M}function gu(h){return h.id}function st(h){return h.parentIds}function Ja(){return{}}function vu(){if(arguments.length)throw Error(`got arguments to dagConnect(${arguments}), but constructor takes no aruguments. These were probably meant as data which should be called as dagConnect()(...)`);let h=Qa,v=no,m=mu;function M(T,C){return m(C.linkData[T.id])}function _(T){if(!T.length)throw new Error("can't create graph from empty data");const C={};return T.forEach(z=>{const k=h(z),R=v(z);C[k]||(C[k]={id:k,parentIds:[],linkData:{}});const P=C[R]||(C[R]={id:R,parentIds:[],linkData:{}});P.parentIds.push(k),P.linkData[k]=z}),qr().linkData(M)(Object.values(C))}return _.sourceAccessor=function(T){return arguments.length?(h=T,_):h},_.targetAccessor=function(T){return arguments.length?(v=T,_):v},_.linkData=function(T){return arguments.length?(m=T,_):m},_}function Qa(h){return h[0]}function no(h){return h[1]}function mu(h){return h}function yu(){if(arguments.length)throw Error(`got arguments to dagHierarchy(${arguments}), but constructor takes no aruguments. These were probably meant as data which should be called as dagHierarchy()(...)`);let h=eo,v=to,m=_u;function M(..._){if(!_.length)throw new Error("must pass at least one node");const T={},C=[];function z(P){let D;try{D=h(P).toString()}catch{throw Error(`node ids must have toString but got ${h(P)} from ${P}`)}let q;if(!(q=T[D]))q=new te(D,P),C.push(q),T[D]=q;else if(P!==q.data)throw new Error("found a duplicate id: "+D);return q}const k=new te(void 0,void 0);let R;for(k.children=_.map(z);R=C.pop();)R.children=(v(R.data)||[]).map(z),R._childLinkData=R.children.map(P=>m(R.data,P.data));return Ni(k),k.children.length>1?k:k.children[0]}return M.id=function(_){return arguments.length?(h=_,M):h},M.children=function(_){return arguments.length?(v=_,M):v},M.linkData=function(_){return arguments.length?(m=_,M):m},M}function eo(h){return h.id}function to(h){return h.children}function _u(){return{}}function dr(h,v,m,M){this.feasible=m,this.evaluation=v,this.bounded=M,this._tableau=h}var Ut=dr;dr.prototype.generateSolutionSet=function(){for(var h={},v=this._tableau,m=v.varIndexByRow,M=v.variablesPerIndex,_=v.matrix,T=v.rhsColumn,C=v.height-1,z=Math.round(1/v.precision),k=1;k<=C;k+=1){var R=m[k],P=M[R];if(!(P===void 0||P.isSlack===!0)){var D=_[k][T];h[P.id]=Math.round((Number.EPSILON+D)*z)/z}}return h};function Yt(h,v,m,M,_){Ut.call(this,h,v,m,M),this.iter=_}var pr=Yt;Yt.prototype=Object.create(Ut.prototype),Yt.constructor=Yt;function Ne(h){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=h||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}var $n=Ne;Ne.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function Bi(h,v){this.priority=h,this.reducedCosts=new Array(v);for(var m=0;m<v;m+=1)this.reducedCosts[m]=0}Bi.prototype.copy=function(){var h=new Bi(this.priority,this.reducedCosts.length);return h.reducedCosts=this.reducedCosts.slice(),h},Ne.prototype.setOptionalObjective=function(h,v,m){var M=this.objectivesByPriority[h];if(M===void 0){var _=Math.max(this.width,v+1);M=new Bi(h,_),this.objectivesByPriority[h]=M,this.optionalObjectives.push(M),this.optionalObjectives.sort(function(T,C){return T.priority-C.priority})}M.reducedCosts[v]=m},Ne.prototype.initialize=function(h,v,m,M){this.variables=m,this.unrestrictedVars=M,this.width=h,this.height=v;for(var _=new Array(h),T=0;T<h;T++)_[T]=0;this.matrix=new Array(v);for(var C=0;C<v;C++)this.matrix[C]=_.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=h+v-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},Ne.prototype._resetMatrix=function(){var h=this.model.variables,v=this.model.constraints,m=h.length,M=v.length,_,T,C=this.matrix[0],z=this.model.isMinimization===!0?-1:1;for(_=0;_<m;_+=1){var k=h[_],R=k.priority,P=z*k.cost;R===0?C[_+1]=P:this.setOptionalObjective(R,_+1,P),T=h[_].index,this.rowByVarIndex[T]=-1,this.colByVarIndex[T]=_+1,this.varIndexByCol[_+1]=T}for(var D=1,q=0;q<M;q+=1){var G=v[q],en=G.index;this.rowByVarIndex[en]=D,this.colByVarIndex[en]=-1,this.varIndexByRow[D]=en;var H,tn,J,nn=G.terms,cn=nn.length,fn=this.matrix[D++];if(G.isUpperBound){for(H=0;H<cn;H+=1)tn=nn[H],J=this.colByVarIndex[tn.variable.index],fn[J]=tn.coefficient;fn[0]=G.rhs}else{for(H=0;H<cn;H+=1)tn=nn[H],J=this.colByVarIndex[tn.variable.index],fn[J]=-tn.coefficient;fn[0]=-G.rhs}}},Ne.prototype.setModel=function(h){this.model=h;var v=h.nVariables+1,m=h.nConstraints+1;return this.initialize(v,m,h.variables,h.unrestrictedVariables),this._resetMatrix(),this},Ne.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var h=this.lastElementIndex;return this.lastElementIndex+=1,h},Ne.prototype.density=function(){for(var h=0,v=this.matrix,m=0;m<this.height;m++)for(var M=v[m],_=0;_<this.width;_++)M[_]!==0&&(h+=1);return h/(this.height*this.width)},Ne.prototype.setEvaluation=function(){var h=Math.round(1/this.precision),v=this.matrix[this.costRowIndex][this.rhsColumn],m=Math.round((Number.EPSILON+v)*h)/h;this.evaluation=m,this.simplexIters===0&&(this.bestPossibleEval=m)},Ne.prototype.getSolution=function(){var h=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new pr(this,h,this.feasible,this.bounded,this.branchAndCutIterations):new Ut(this,h,this.feasible,this.bounded)},$n.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},$n.prototype.phase1=function(){for(var h=this.model.checkForCycles,v=[],m=this.matrix,M=this.rhsColumn,_=this.width-1,T=this.height-1,C,z=0;;){for(var k=0,R=-this.precision,P=1;P<=T;P++){C=this.unrestrictedVars[this.varIndexByRow[P]]===!0;var D=m[P][M];D<R&&(R=D,k=P)}if(k===0)return this.feasible=!0,z;for(var q=0,G=-1/0,en=m[0],H=m[k],tn=1;tn<=_;tn++){var J=H[tn];if(C=this.unrestrictedVars[this.varIndexByCol[tn]]===!0,C||J<-this.precision){var nn=-en[tn]/J;G<nn&&(G=nn,q=tn)}}if(q===0)return this.feasible=!1,z;if(h){v.push([this.varIndexByRow[k],this.varIndexByCol[q]]);var cn=this.checkForCycles(v);if(cn.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+cn[0]),this.model.messages.push("Length :"+cn[1]),this.feasible=!1,z}this.pivot(k,q),z+=1}},$n.prototype.phase2=function(){for(var h=this.model.checkForCycles,v=[],m=this.matrix,M=this.rhsColumn,_=this.width-1,T=this.height-1,C=this.precision,z=this.optionalObjectives.length,k=null,R=0,P,D;;){var q=m[this.costRowIndex];z>0&&(k=[]);for(var G=0,en=C,H=!1,tn=1;tn<=_;tn++){if(P=q[tn],D=this.unrestrictedVars[this.varIndexByCol[tn]]===!0,z>0&&-C<P&&P<C){k.push(tn);continue}if(D&&P<0){-P>en&&(en=-P,G=tn,H=!0);continue}P>en&&(en=P,G=tn,H=!1)}if(z>0)for(var J=0;G===0&&k.length>0&&J<z;){var nn=[],cn=this.optionalObjectives[J].reducedCosts;en=C;for(var fn=0;fn<k.length;fn++){if(tn=k[fn],P=cn[tn],D=this.unrestrictedVars[this.varIndexByCol[tn]]===!0,-C<P&&P<C){nn.push(tn);continue}if(D&&P<0){-P>en&&(en=-P,G=tn,H=!0);continue}P>en&&(en=P,G=tn,H=!1)}k=nn,J+=1}if(G===0)return this.setEvaluation(),this.simplexIters+=1,R;for(var on=0,dn=1/0,Rn=this.varIndexByRow,Nn=1;Nn<=T;Nn++){var bn=m[Nn],Mn=bn[M],ne=bn[G];if(!(-C<ne&&ne<C)){if(ne>0&&C>Mn&&Mn>-C){dn=0,on=Nn;break}var Be=H?-Mn/ne:Mn/ne;Be>C&&dn>Be&&(dn=Be,on=Nn)}}if(dn===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[G],R;if(h){v.push([this.varIndexByRow[on],this.varIndexByCol[G]]);var qe=this.checkForCycles(v);if(qe.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+qe[0]),this.model.messages.push("Length :"+qe[1]),this.feasible=!1,R}this.pivot(on,G,!0),R+=1}};var zi=[];$n.prototype.pivot=function(h,v){var m=this.matrix,M=m[h][v],_=this.height-1,T=this.width-1,C=this.varIndexByRow[h],z=this.varIndexByCol[v];this.varIndexByRow[h]=z,this.varIndexByCol[v]=C,this.rowByVarIndex[z]=h,this.rowByVarIndex[C]=-1,this.colByVarIndex[z]=-1,this.colByVarIndex[C]=v;for(var k=m[h],R=0,P=0;P<=T;P++)k[P]>=-1e-16&&k[P]<=1e-16?k[P]=0:(k[P]/=M,zi[R]=P,R+=1);k[v]=1/M;for(var D,q,G,en=this.precision,H=0;H<=_;H++)if(H!==h){var tn=m[H];if(D=tn[v],D>=-1e-16&&D<=1e-16)D!==0&&(tn[v]=0);else{for(q=0;q<R;q++)P=zi[q],G=k[P],G>=-1e-16&&G<=1e-16?G!==0&&(k[P]=0):tn[P]=tn[P]-D*G;tn[v]=-D/M}}var J=this.optionalObjectives.length;if(J>0)for(var nn=0;nn<J;nn+=1){var cn=this.optionalObjectives[nn].reducedCosts;if(D=cn[v],D!==0){for(q=0;q<R;q++)P=zi[q],G=k[P],G!==0&&(cn[P]=cn[P]-D*G);cn[v]=-D/M}}},$n.prototype.checkForCycles=function(h){for(var v=0;v<h.length-1;v++)for(var m=v+1;m<h.length;m++){var M=h[v],_=h[m];if(M[0]===_[0]&&M[1]===_[1]){if(m-v>h.length-m)break;for(var T=!0,C=1;C<m-v;C++){var z=h[v+C],k=h[m+C];if(z[0]!==k[0]||z[1]!==k[1]){T=!1;break}}if(T)return[v,m-v]}}return[]};function $i(h,v,m,M){this.id=h,this.cost=v,this.index=m,this.value=0,this.priority=M}function ro(h,v,m,M){$i.call(this,h,v,m,M)}ro.prototype.isInteger=!0;function Ht(h,v){$i.call(this,h,0,v,0)}Ht.prototype.isSlack=!0;function io(h,v){this.variable=h,this.coefficient=v}function ut(h,v,m){return m===0||m==="required"?null:(v=v||1,m=m||1,h.isMinimization===!1&&(v=-v),h.addVariable(v,"r"+h.relaxationIndex++,!1,!1,m))}function je(h,v,m,M){this.slack=new Ht("s"+m,m),this.index=m,this.model=M,this.rhs=h,this.isUpperBound=v,this.terms=[],this.termsByVarIndex={},this.relaxation=null}je.prototype.addTerm=function(h,v){var m=v.index,M=this.termsByVarIndex[m];if(M===void 0)M=new io(v,h),this.termsByVarIndex[m]=M,this.terms.push(M),this.isUpperBound===!0&&(h=-h),this.model.updateConstraintCoefficient(this,v,h);else{var _=M.coefficient+h;this.setVariableCoefficient(_,v)}return this},je.prototype.removeTerm=function(h){return this},je.prototype.setRightHandSide=function(h){if(h!==this.rhs){var v=h-this.rhs;this.isUpperBound===!0&&(v=-v),this.rhs=h,this.model.updateRightHandSide(this,v)}return this},je.prototype.setVariableCoefficient=function(h,v){var m=v.index;if(m===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var M=this.termsByVarIndex[m];if(M===void 0)this.addTerm(h,v);else if(h!==M.coefficient){var _=h-M.coefficient;this.isUpperBound===!0&&(_=-_),M.coefficient=h,this.model.updateConstraintCoefficient(this,v,_)}return this},je.prototype.relax=function(h,v){this.relaxation=ut(this.model,h,v),this._relax(this.relaxation)},je.prototype._relax=function(h){h!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,h):this.setVariableCoefficient(1,h))};function Gt(h,v){this.upperBound=h,this.lowerBound=v,this.model=h.model,this.rhs=h.rhs,this.relaxation=null}Gt.prototype.isEquality=!0,Gt.prototype.addTerm=function(h,v){return this.upperBound.addTerm(h,v),this.lowerBound.addTerm(h,v),this},Gt.prototype.removeTerm=function(h){return this.upperBound.removeTerm(h),this.lowerBound.removeTerm(h),this},Gt.prototype.setRightHandSide=function(h){this.upperBound.setRightHandSide(h),this.lowerBound.setRightHandSide(h),this.rhs=h},Gt.prototype.relax=function(h,v){this.relaxation=ut(this.model,h,v),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)};var Le={Constraint:je,Variable:$i,IntegerVariable:ro,SlackVariable:Ht,Equality:Gt,Term:io},gr=Le.SlackVariable;$n.prototype.addCutConstraints=function(h){for(var v=h.length,m=this.height,M=m+v,_=m;_<M;_+=1)this.matrix[_]===void 0&&(this.matrix[_]=this.matrix[_-1].slice());this.height=M,this.nVars=this.width+this.height-2;for(var T,C=this.width-1,z=0;z<v;z+=1){var k=h[z],R=m+z,P=k.type==="min"?-1:1,D=k.varIndex,q=this.rowByVarIndex[D],G=this.matrix[R];if(q===-1){for(G[this.rhsColumn]=P*k.value,T=1;T<=C;T+=1)G[T]=0;G[this.colByVarIndex[D]]=P}else{var en=this.matrix[q],H=en[this.rhsColumn];for(G[this.rhsColumn]=P*(k.value-H),T=1;T<=C;T+=1)G[T]=-P*en[T]}var tn=this.getNewElementIndex();this.varIndexByRow[R]=tn,this.rowByVarIndex[tn]=R,this.colByVarIndex[tn]=-1,this.variablesPerIndex[tn]=new gr("s"+tn,tn),this.nVars+=1}},$n.prototype._addLowerBoundMIRCut=function(h){if(h===this.costRowIndex)return!1;var v=this.model,m=this.matrix,M=this.variablesPerIndex[this.varIndexByRow[h]];if(!M.isInteger)return!1;var _=m[h][this.rhsColumn],T=_-Math.floor(_);if(T<this.precision||1-this.precision<T)return!1;var C=this.height;m[C]=m[C-1].slice(),this.height+=1,this.nVars+=1;var z=this.getNewElementIndex();this.varIndexByRow[C]=z,this.rowByVarIndex[z]=C,this.colByVarIndex[z]=-1,this.variablesPerIndex[z]=new gr("s"+z,z),m[C][this.rhsColumn]=Math.floor(_);for(var k=1;k<this.varIndexByCol.length;k+=1){var R=this.variablesPerIndex[this.varIndexByCol[k]];if(!R.isInteger)m[C][k]=Math.min(0,m[h][k]/(1-T));else{var P=m[h][k],D=Math.floor(P)+Math.max(0,P-Math.floor(P)-T)/(1-T);m[C][k]=D}}for(var q=0;q<this.width;q+=1)m[C][q]-=m[h][q];return!0},$n.prototype._addUpperBoundMIRCut=function(h){if(h===this.costRowIndex)return!1;var v=this.model,m=this.matrix,M=this.variablesPerIndex[this.varIndexByRow[h]];if(!M.isInteger)return!1;var _=m[h][this.rhsColumn],T=_-Math.floor(_);if(T<this.precision||1-this.precision<T)return!1;var C=this.height;m[C]=m[C-1].slice(),this.height+=1,this.nVars+=1;var z=this.getNewElementIndex();this.varIndexByRow[C]=z,this.rowByVarIndex[z]=C,this.colByVarIndex[z]=-1,this.variablesPerIndex[z]=new gr("s"+z,z),m[C][this.rhsColumn]=-T;for(var k=1;k<this.varIndexByCol.length;k+=1){var R=this.variablesPerIndex[this.varIndexByCol[k]],P=m[h][k],D=P-Math.floor(P);R.isInteger?D<=T?m[C][k]=-D:m[C][k]=-(1-D)*T/D:P>=0?m[C][k]=-P:m[C][k]=P*T/(1-T)}return!0},$n.prototype.applyMIRCuts=function(){},$n.prototype._putInBase=function(h){var v=this.rowByVarIndex[h];if(v===-1){for(var m=this.colByVarIndex[h],M=1;M<this.height;M+=1){var _=this.matrix[M][m];if(_<-this.precision||this.precision<_){v=M;break}}this.pivot(v,m)}return v},$n.prototype._takeOutOfBase=function(h){var v=this.colByVarIndex[h];if(v===-1){for(var m=this.rowByVarIndex[h],M=this.matrix[m],_=1;_<this.height;_+=1){var T=M[_];if(T<-this.precision||this.precision<T){v=_;break}}this.pivot(m,v)}return v},$n.prototype.updateVariableValues=function(){for(var h=this.variables.length,v=Math.round(1/this.precision),m=0;m<h;m+=1){var M=this.variables[m],_=M.index,T=this.rowByVarIndex[_];if(T===-1)M.value=0;else{var C=this.matrix[T][this.rhsColumn];M.value=Math.round((C+Number.EPSILON)*v)/v}}},$n.prototype.updateRightHandSide=function(h,v){var m=this.height-1,M=this.rowByVarIndex[h.index];if(M===-1){for(var _=this.colByVarIndex[h.index],T=0;T<=m;T+=1){var C=this.matrix[T];C[this.rhsColumn]-=v*C[_]}var z=this.optionalObjectives.length;if(z>0)for(var k=0;k<z;k+=1){var R=this.optionalObjectives[k].reducedCosts;R[this.rhsColumn]-=v*R[_]}}else this.matrix[M][this.rhsColumn]-=v},$n.prototype.updateConstraintCoefficient=function(h,v,m){if(h.index===v.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var M=this._putInBase(h.index),_=this.colByVarIndex[v.index];if(_===-1)for(var T=this.rowByVarIndex[v.index],C=0;C<this.width;C+=1)this.matrix[M][C]+=m*this.matrix[T][C];else this.matrix[M][_]-=m},$n.prototype.updateCost=function(h,v){var m=h.index,M=this.width-1,_=this.colByVarIndex[m];if(_===-1){var T=this.matrix[this.rowByVarIndex[m]],C;if(h.priority===0){var z=this.matrix[0];for(C=0;C<=M;C+=1)z[C]+=v*T[C]}else{var k=this.objectivesByPriority[h.priority].reducedCosts;for(C=0;C<=M;C+=1)k[C]+=v*T[C]}}else this.matrix[0][_]-=v},$n.prototype.addConstraint=function(h){var v=h.isUpperBound?1:-1,m=this.height,M=this.matrix[m];M===void 0&&(M=this.matrix[0].slice(),this.matrix[m]=M);for(var _=this.width-1,T=0;T<=_;T+=1)M[T]=0;M[this.rhsColumn]=v*h.rhs;for(var C=h.terms,z=C.length,k=0;k<z;k+=1){var R=C[k],P=R.coefficient,D=R.variable.index,q=this.rowByVarIndex[D];if(q===-1)M[this.colByVarIndex[D]]+=v*P;else{var G=this.matrix[q],en=G[this.rhsColumn];for(T=0;T<=_;T+=1)M[T]-=v*P*G[T]}}var H=h.index;this.varIndexByRow[m]=H,this.rowByVarIndex[H]=m,this.colByVarIndex[H]=-1,this.height+=1},$n.prototype.removeConstraint=function(h){var v=h.index,m=this.height-1,M=this._putInBase(v),_=this.matrix[m];this.matrix[m]=this.matrix[M],this.matrix[M]=_,this.varIndexByRow[M]=this.varIndexByRow[m],this.varIndexByRow[m]=-1,this.rowByVarIndex[v]=-1,this.availableIndexes[this.availableIndexes.length]=v,h.slack.index=-1,this.height-=1},$n.prototype.addVariable=function(h){var v=this.height-1,m=this.width,M=this.model.isMinimization===!0?-h.cost:h.cost,_=h.priority,T=this.optionalObjectives.length;if(T>0)for(var C=0;C<T;C+=1)this.optionalObjectives[C].reducedCosts[m]=0;_===0?this.matrix[0][m]=M:(this.setOptionalObjective(_,m,M),this.matrix[0][m]=0);for(var z=1;z<=v;z+=1)this.matrix[z][m]=0;var k=h.index;this.varIndexByCol[m]=k,this.rowByVarIndex[k]=-1,this.colByVarIndex[k]=m,this.width+=1},$n.prototype.removeVariable=function(h){var v=h.index,m=this._takeOutOfBase(v),M=this.width-1;if(m!==M){for(var _=this.height-1,T=0;T<=_;T+=1){var C=this.matrix[T];C[m]=C[M]}var z=this.optionalObjectives.length;if(z>0)for(var k=0;k<z;k+=1){var R=this.optionalObjectives[k].reducedCosts;R[m]=R[M]}var P=this.varIndexByCol[M];this.varIndexByCol[m]=P,this.colByVarIndex[P]=m}this.varIndexByCol[M]=-1,this.colByVarIndex[v]=-1,this.availableIndexes[this.availableIndexes.length]=v,h.index=-1,this.width-=1},$n.prototype.log=function(h,v){console.log("****",h,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var m=5,M="",_=[" "],T,C,z,k,R,P,D,q,G,en,H;for(C=1;C<this.width;C+=1)R=this.varIndexByCol[C],k=this.variablesPerIndex[R],k===void 0?P="c"+R:P=k.id,D=P.length,q=" ",G="	",D>5?q+=" ":G+="	",_[C]=q,M+=G+P;console.log(M);var tn,J=this.matrix[this.costRowIndex],nn="	";for(T=1;T<this.width;T+=1)tn="	",nn+=tn,nn+=_[T],nn+=J[T].toFixed(m);for(tn="	",nn+=tn+_[0]+J[0].toFixed(m),console.log(nn+"	Z"),z=1;z<this.height;z+=1){for(en=this.matrix[z],H="	",C=1;C<this.width;C+=1)tn="	",H+=tn+_[C]+en[C].toFixed(m);tn="	",H+=tn+_[0]+en[0].toFixed(m),R=this.varIndexByRow[z],k=this.variablesPerIndex[R],k===void 0?P="c"+R:P=k.id,console.log(H+"	"+P)}console.log("");var cn=this.optionalObjectives.length;if(cn>0){console.log("    Optional objectives:");for(var fn=0;fn<cn;fn+=1){var on=this.optionalObjectives[fn].reducedCosts,dn="";for(T=1;T<this.width;T+=1)tn=on[T]<0?"":" ",dn+=tn,dn+=_[T],dn+=on[T].toFixed(m);tn=on[0]<0?"":" ",dn+=tn+_[0]+on[0].toFixed(m),console.log(dn+" z"+fn)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this},$n.prototype.copy=function(){var h=new $n(this.precision);h.width=this.width,h.height=this.height,h.nVars=this.nVars,h.model=this.model,h.variables=this.variables,h.variablesPerIndex=this.variablesPerIndex,h.unrestrictedVars=this.unrestrictedVars,h.lastElementIndex=this.lastElementIndex,h.varIndexByRow=this.varIndexByRow.slice(),h.varIndexByCol=this.varIndexByCol.slice(),h.rowByVarIndex=this.rowByVarIndex.slice(),h.colByVarIndex=this.colByVarIndex.slice(),h.availableIndexes=this.availableIndexes.slice();for(var v=[],m=0;m<this.optionalObjectives.length;m++)v[m]=this.optionalObjectives[m].copy();h.optionalObjectives=v;for(var M=this.matrix,_=new Array(this.height),T=0;T<this.height;T++)_[T]=M[T].slice();return h.matrix=_,h},$n.prototype.save=function(){this.savedState=this.copy()},$n.prototype.restore=function(){if(this.savedState!==null){var h=this.savedState,v=h.matrix;this.nVars=h.nVars,this.model=h.model,this.variables=h.variables,this.variablesPerIndex=h.variablesPerIndex,this.unrestrictedVars=h.unrestrictedVars,this.lastElementIndex=h.lastElementIndex,this.width=h.width,this.height=h.height;var m,M;for(m=0;m<this.height;m+=1){var _=v[m],T=this.matrix[m];for(M=0;M<this.width;M+=1)T[M]=_[M]}var C=h.varIndexByRow;for(M=0;M<this.height;M+=1)this.varIndexByRow[M]=C[M];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var z=h.varIndexByCol;for(m=0;m<this.width;m+=1)this.varIndexByCol[m]=z[m];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var k=h.rowByVarIndex,R=h.colByVarIndex,P=0;P<this.nVars;P+=1)this.rowByVarIndex[P]=k[P],this.colByVarIndex[P]=R[P];if(h.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var D=0;D<h.optionalObjectives.length;D++){var q=h.optionalObjectives[D].copy();this.optionalObjectives[D]=q,this.optionalObjectivePerPriority[q.priority]=q}}}};function Fr(h,v){this.index=h,this.value=v}$n.prototype.getMostFractionalVar=function(){for(var h=0,v=null,m=null,M=this.model.integerVariables,_=M.length,T=0;T<_;T++){var C=M[T].index,z=this.rowByVarIndex[C];if(z!==-1){var k=this.matrix[z][this.rhsColumn],R=Math.abs(k-Math.round(k));h<R&&(h=R,v=C,m=k)}}return new Fr(v,m)},$n.prototype.getFractionalVarWithLowestCost=function(){for(var h=1/0,v=null,m=null,M=this.model.integerVariables,_=M.length,T=0;T<_;T++){var C=M[T],z=C.index,k=this.rowByVarIndex[z];if(k!==-1){var R=this.matrix[k][this.rhsColumn];if(Math.abs(R-Math.round(R))>this.precision){var P=C.cost;h>P&&(h=P,v=z,m=R)}}}return new Fr(v,m)},$n.prototype.countIntegerValues=function(){for(var h=0,v=1;v<this.height;v+=1)if(this.variablesPerIndex[this.varIndexByRow[v]].isInteger){var m=this.matrix[v][this.rhsColumn];m=m-Math.floor(m),m<this.precision&&-m<this.precision&&(h+=1)}return h},$n.prototype.isIntegral=function(){for(var h=this.model.integerVariables,v=h.length,m=0;m<v;m++){var M=this.rowByVarIndex[h[m].index];if(M!==-1){var _=this.matrix[M][this.rhsColumn];if(Math.abs(_-Math.round(_))>this.precision)return!1}}return!0},$n.prototype.computeFractionalVolume=function(h){for(var v=-1,m=1;m<this.height;m+=1)if(this.variablesPerIndex[this.varIndexByRow[m]].isInteger){var M=this.matrix[m][this.rhsColumn];M=Math.abs(M);var _=Math.min(M-Math.floor(M),Math.floor(M+1));if(_<this.precision){if(!h)return 0}else v===-1?v=M:v*=M}return v===-1?0:v};var vr=$n;function ao(h,v,m){this.type=h,this.varIndex=v,this.value=m}function Pi(h,v){this.relaxedEvaluation=h,this.cuts=v}function Ur(h,v){return v.relaxedEvaluation-h.relaxedEvaluation}$n.prototype.applyCuts=function(h){if(this.restore(),this.addCutConstraints(h),this.simplex(),this.model.useMIRCuts)for(var v=!0;v;){var m=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var M=this.computeFractionalVolume(!0);M>=.9*m&&(v=!1)}},$n.prototype.branchAndCut=function(){var h=[],v=0,m=this.model.tolerance,M=!0,_=1e99;this.model.timeout&&(_=Date.now()+this.model.timeout);for(var T=1/0,C=null,z=[],k=0;k<this.optionalObjectives.length;k+=1)z.push(1/0);var R=new Pi(-1/0,[]),P;for(h.push(R);h.length>0&&M===!0&&Date.now()<_;)if(this.model.isMinimization?P=this.bestPossibleEval*(1+m):P=this.bestPossibleEval*(1-m),m>0&&T<P&&(M=!1),R=h.pop(),!(R.relaxedEvaluation>T)){var D=R.cuts;if(this.applyCuts(D),v++,this.feasible!==!1){var q=this.evaluation;if(!(q>T)){if(q===T){for(var G=!0,en=0;en<this.optionalObjectives.length&&!(this.optionalObjectives[en].reducedCosts[0]>z[en]);en+=1)if(this.optionalObjectives[en].reducedCosts[0]<z[en]){G=!1;break}if(G)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,v===1){this.branchAndCutIterations=v;return}C=R,T=q;for(var H=0;H<this.optionalObjectives.length;H+=1)z[H]=this.optionalObjectives[H].reducedCosts[0]}else{v===1&&this.save();for(var tn=this.getMostFractionalVar(),J=tn.index,nn=[],cn=[],fn=D.length,on=0;on<fn;on+=1){var dn=D[on];dn.varIndex===J?dn.type==="min"?cn.push(dn):nn.push(dn):(nn.push(dn),cn.push(dn))}var Rn=Math.ceil(tn.value),Nn=Math.floor(tn.value),bn=new ao("min",J,Rn);nn.push(bn);var Mn=new ao("max",J,Nn);cn.push(Mn),h.push(new Pi(q,nn)),h.push(new Pi(q,cn)),h.sort(Ur)}}}}C!==null&&this.applyCuts(C.cuts),this.branchAndCutIterations=v};var bu={},kt=Le.Constraint,Oi=Le.Equality,xu=Le.Variable,Vi=Le.IntegerVariable;function jn(h,v){this.tableau=new $n(h),this.name=v,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}var Yr=jn;jn.prototype.minimize=function(){return this.isMinimization=!0,this},jn.prototype.maximize=function(){return this.isMinimization=!1,this},jn.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var h=this.lastElementIndex;return this.lastElementIndex+=1,h},jn.prototype._addConstraint=function(h){var v=h.slack;this.tableau.variablesPerIndex[v.index]=v,this.constraints.push(h),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(h)},jn.prototype.smallerThan=function(h){var v=new kt(h,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(v),v},jn.prototype.greaterThan=function(h){var v=new kt(h,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(v),v},jn.prototype.equal=function(h){var v=new kt(h,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(v);var m=new kt(h,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(m),new Oi(v,m)},jn.prototype.addVariable=function(h,v,m,M,_){if(typeof _=="string")switch(_){case"required":_=0;break;case"strong":_=1;break;case"medium":_=2;break;case"weak":_=3;break;default:_=0;break}var T=this.tableau.getNewElementIndex();v==null&&(v="v"+T),h==null&&(h=0),_==null&&(_=0);var C;return m?(C=new Vi(v,h,T,_),this.integerVariables.push(C)):C=new xu(v,h,T,_),this.variables.push(C),this.tableau.variablesPerIndex[T]=C,M&&(this.unrestrictedVariables[T]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(C),C},jn.prototype._removeConstraint=function(h){var v=this.constraints.indexOf(h);if(v===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(v,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(h),h.relaxation&&this.removeVariable(h.relaxation)},jn.prototype.removeConstraint=function(h){return h.isEquality?(this._removeConstraint(h.upperBound),this._removeConstraint(h.lowerBound)):this._removeConstraint(h),this},jn.prototype.removeVariable=function(h){var v=this.variables.indexOf(h);if(v===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(v,1),this.tableauInitialized===!0&&this.tableau.removeVariable(h),this},jn.prototype.updateRightHandSide=function(h,v){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(h,v),this},jn.prototype.updateConstraintCoefficient=function(h,v,m){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(h,v,m),this},jn.prototype.setCost=function(h,v){var m=h-v.cost;return this.isMinimization===!1&&(m=-m),v.cost=h,this.tableau.updateCost(v,m),this},jn.prototype.loadJson=function(h){this.isMinimization=h.opType!=="max";for(var v=h.variables,m=h.constraints,M={},_={},T=Object.keys(m),C=T.length,z=0;z<C;z+=1){var k=T[z],R=m[k],P=R.equal,D=R.weight,q=R.priority,G=D!==void 0||q!==void 0,en,H;if(P===void 0){var tn=R.min;tn!==void 0&&(en=this.greaterThan(tn),M[k]=en,G&&en.relax(D,q));var J=R.max;J!==void 0&&(H=this.smallerThan(J),_[k]=H,G&&H.relax(D,q))}else{en=this.greaterThan(P),M[k]=en,H=this.smallerThan(P),_[k]=H;var nn=new Oi(en,H);G&&nn.relax(D,q)}}var cn=Object.keys(v),fn=cn.length;this.tolerance=h.tolerance||0,h.timeout&&(this.timeout=h.timeout),h.options&&(h.options.timeout&&(this.timeout=h.options.timeout),this.tolerance===0&&(this.tolerance=h.options.tolerance||0),h.options.useMIRCuts&&(this.useMIRCuts=h.options.useMIRCuts),typeof h.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=h.options.exitOnCycles);for(var on=h.ints||{},dn=h.binaries||{},Rn=h.unrestricted||{},Nn=h.optimize,bn=0;bn<fn;bn+=1){var Mn=cn[bn],ne=v[Mn],Be=ne[Nn]||0,qe=!!dn[Mn],re=!!on[Mn]||qe,Se=!!Rn[Mn],On=this.addVariable(Be,Mn,re,Se);qe&&this.smallerThan(1).addTerm(1,On);var ze=Object.keys(ne);for(z=0;z<ze.length;z+=1){var ie=ze[z];if(ie!==Nn){var ae=ne[ie],qn=M[ie];qn!==void 0&&qn.addTerm(ae,On);var oe=_[ie];oe!==void 0&&oe.addTerm(ae,On)}}}return this},jn.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},jn.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},jn.prototype.isFeasible=function(){return this.tableau.feasible},jn.prototype.save=function(){return this.tableau.save()},jn.prototype.restore=function(){return this.tableau.restore()},jn.prototype.activateMIRCuts=function(h){this.useMIRCuts=h},jn.prototype.debug=function(h){this.checkForCycles=h},jn.prototype.log=function(h){return this.tableau.log(h)};var wu=function(h){var v,m,M;if(typeof h.optimize=="string")if(h.constraints[h.optimize]){v=Math.random();for(m in h.variables)h.variables[m][h.optimize]&&(h.variables[m][v]=h.variables[m][h.optimize]);return h.constraints[v]=h.constraints[h.optimize],delete h.constraints[h.optimize],h}else return h;else{for(M in h.optimize)if(h.constraints[M])if(h.constraints[M]==="equal")delete h.optimize[M];else{v=Math.random();for(m in h.variables)h.variables[m][M]&&(h.variables[m][v]=h.variables[m][M]);h.constraints[v]=h.constraints[M],delete h.constraints[M]}return h}},oo={CleanObjectiveAttributes:wu};function Mu(h){var v={is_blank:/^\W{0,}$/,is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},m={opType:"",optimize:"_obj",constraints:{},variables:{}},M={">=":"min","<=":"max","=":"equal"},_="",T=null,C="",z="",k="",R=0;typeof h=="string"&&(h=h.split(`
`));for(var P=0;P<h.length;P++)if(k="__"+P,_=h[P],T=null,v.is_objective.test(_))m.opType=_.match(/(max|min)/gi)[0],T=_.match(v.parse_lhs).map(function(G){return G.replace(/\s+/,"")}).slice(1),T.forEach(function(G){C=G.match(v.get_num),C===null?G.substr(0,1)==="-"?C=-1:C=1:C=C[0],C=parseFloat(C),z=G.match(v.get_word)[0].replace(/\;$/,""),m.variables[z]=m.variables[z]||{},m.variables[z]._obj=C});else if(v.is_int.test(_))T=_.match(v.parse_int).slice(1),m.ints=m.ints||{},T.forEach(function(G){G=G.replace(";",""),m.ints[G]=1});else if(v.is_bin.test(_))T=_.match(v.parse_bin).slice(1),m.binaries=m.binaries||{},T.forEach(function(G){G=G.replace(";",""),m.binaries[G]=1});else if(v.is_constraint.test(_)){var D=_.indexOf(":"),q=D===-1?_:_.slice(D+1);T=q.match(v.parse_lhs).map(function(G){return G.replace(/\s+/,"")}),T.forEach(function(G){C=G.match(v.get_num),C===null?G.substr(0,1)==="-"?C=-1:C=1:C=C[0],C=parseFloat(C),z=G.match(v.get_word)[0],m.variables[z]=m.variables[z]||{},m.variables[z][k]=C}),R=parseFloat(_.match(v.parse_rhs)[0]),_=M[_.match(v.parse_dir)[0]],m.constraints[k]=m.constraints[k]||{},m.constraints[k][_]=R}else v.is_unrestricted.test(_)&&(T=_.match(v.parse_int).slice(1),m.unrestricted=m.unrestricted||{},T.forEach(function(G){G=G.replace(";",""),m.unrestricted[G]=1}));return m}function Eu(h){if(!h)throw new Error("Solver requires a model to operate on");var v="",m={max:"<=",min:">=",equal:"="},M=new RegExp("[^A-Za-z0-9]+","gi");v+=h.opType+":";for(var _ in h.variables)h.variables[_][_]=h.variables[_][_]?h.variables[_][_]:1,h.variables[_][h.optimize]&&(v+=" "+h.variables[_][h.optimize]+" "+_.replace(M,"_"));v+=`;
`;for(_ in h.constraints)for(var T in h.constraints[_]){for(var C in h.variables)h.variables[C][_]&&(v+=" "+h.variables[C][_]+" "+C.replace(M,"_"));v+=" "+m[T]+" "+h.constraints[_][T],v+=`;
`}if(h.ints){v+=`

`;for(_ in h.ints)v+="int "+_.replace(M,"_")+`;
`}if(h.unrestricted){v+=`

`;for(_ in h.unrestricted)v+="unrestricted "+_.replace(M,"_")+`;
`}return v}var so=function(h){return h.length?Mu(h):Eu(h)},Hr=function(h,v){var m=v.optimize,M=JSON.parse(JSON.stringify(v.optimize)),_=Object.keys(v.optimize),T,C=0,z={},k="",R={},P=[],D,q,G,en;for(delete v.optimize,D=0;D<_.length;D++)M[_[D]]=0;for(D=0;D<_.length;D++){v.optimize=_[D],v.opType=m[_[D]],T=h.Solve(v,void 0,void 0,!0);for(en in _)if(!v.variables[_[en]]){T[_[en]]=T[_[en]]?T[_[en]]:0;for(G in v.variables)v.variables[G][_[en]]&&T[G]&&(T[_[en]]+=T[G]*v.variables[G][_[en]])}for(k="base",q=0;q<_.length;q++)T[_[q]]?k+="-"+(T[_[q]]*1e3|0)/1e3:k+="-0";if(!z[k]){for(z[k]=1,C++,q=0;q<_.length;q++)T[_[q]]&&(M[_[q]]+=T[_[q]]);delete T.feasible,delete T.result,P.push(T)}}for(D=0;D<_.length;D++)v.constraints[_[D]]={equal:M[_[D]]/C};v.optimize="cheater-"+Math.random(),v.opType="max";for(D in v.variables)v.variables[D].cheater=1;for(D in P)for(G in P[D])R[G]=R[G]||{min:1e99,max:-1e99};for(D in R)for(G in P)P[G][D]?(P[G][D]>R[D].max&&(R[D].max=P[G][D]),P[G][D]<R[D].min&&(R[D].min=P[G][D])):(P[G][D]=0,R[D].min=0);return T=h.Solve(v,void 0,void 0,!0),{midpoint:T,vertices:P,ranges:R}},Tu=Le.Constraint,Au=Le.Variable,Su=Le.Numeral,Cu=Le.Term,uo=function(){this.Model=Yr,this.branchAndCut=bu,this.Constraint=Tu,this.Variable=Au,this.Numeral=Su,this.Term=Cu,this.Tableau=vr,this.lastSolvedModel=null,this.Solve=function(h,v,m,M){if(M)for(var _ in oo)h=oo[_](h);if(!h)throw new Error("Solver requires a model to operate on");h instanceof Yr||(h=new Yr(v).loadJson(h));var T=h.solve();if(this.lastSolvedModel=h,T.solutionSet=T.generateSolutionSet(),m)return T;var C={};return C.feasible=T.feasible,C.result=T.evaluation,C.bounded=T.bounded,T._tableau.__isIntegral&&(C.isIntegral=!0),Object.keys(T.solutionSet).forEach(function(z){T.solutionSet[z]!==0&&(C[z]=T.solutionSet[z])}),C},this.ReformatLP=so,this.MultiObjective=function(h){return Hr(this,h)}};typeof window=="object"&&(window.solver=new uo);var Ri=new uo;const co="crossings";function ku(){let h=!1;function v(...T){return T.map(C=>C.id).sort().join(h?" => ":"\0\0")}function m(T,C){C.sort((z,k)=>z.id>k.id||-1),C.slice(0,C.length-1).forEach((z,k)=>C.slice(k+1).forEach(R=>{const P=v(z,R);T.ints[P]=1,T.constraints[P]={max:1},T.variables[P]={[P]:1}})),C.slice(0,C.length-1).forEach((z,k)=>C.slice(k+1).forEach((R,P)=>{const D=v(z,R);C.slice(k+P+2).forEach(q=>{const G=v(z,q),en=v(R,q),H=v(z,R,q),tn=H+"+";T.constraints[tn]={max:1},T.variables[D][tn]=1,T.variables[G][tn]=-1,T.variables[en][tn]=1;const J=H+"-";T.constraints[J]={min:0},T.variables[D][J]=1,T.variables[G][J]=-1,T.variables[en][J]=1})}))}function M(T,C){C.slice(0,C.length-1).forEach((z,k)=>C.slice(k+1).forEach(R=>{const P=v(z,R);z.children.forEach(D=>R.children.filter(q=>q!==D).forEach(q=>{const G=v(D,q),en=h?`slack (${P}) (${G})`:`${P}\0\0\0${G}`,H=`${en}${h?" ":"\0\0\0"}+`,tn=`${en}${h?" ":"\0\0\0"}-`;T.variables[en]={[H]:1,[tn]:1,[co]:1};const J=+(D.id>q.id),nn=J||-1;T.constraints[H]={min:J},T.variables[P][H]=1,T.variables[G][H]=nn,T.constraints[tn]={min:-J},T.variables[P][tn]=-1,T.variables[G][tn]=-nn}))}))}function _(T){const C={optimize:co,optType:"min",constraints:{},variables:{},ints:{}};T.forEach(k=>m(C,k)),T.slice(0,T.length-1).forEach(k=>M(C,k));const z=Ri.Solve(C);return T.forEach(k=>k.sort((R,P)=>(R.id>P.id||-1)*(z[v(R,P)]||-1))),T}return _.debug=function(T){return arguments.length?(h=T,_):h},_}function Di(h,v){return h<v?-1:h>v?1:h>=v?0:NaN}function Iu(h){return h.length===1&&(h=Nu(h)),{left:function(v,m,M,_){for(M==null&&(M=0),_==null&&(_=v.length);M<_;){var T=M+_>>>1;h(v[T],m)<0?M=T+1:_=T}return M},right:function(v,m,M,_){for(M==null&&(M=0),_==null&&(_=v.length);M<_;){var T=M+_>>>1;h(v[T],m)>0?_=T:M=T+1}return M}}}function Nu(h){return function(v,m){return Di(h(v),m)}}var fo=Iu(Di);function ji(h){return h===null?NaN:+h}function Bu(h,v,m){if(m==null&&(m=ji),!!(M=h.length)){if((v=+v)<=0||M<2)return+m(h[0],0,h);if(v>=1)return+m(h[M-1],M-1,h);var M,_=(M-1)*v,T=Math.floor(_),C=+m(h[T],T,h),z=+m(h[T+1],T+1,h);return C+(z-C)*(_-T)}}function zu(h,v){var m=h.length,M=-1,_,T=[];if(v==null)for(;++M<m;)isNaN(_=ji(h[M]))||T.push(_);else for(;++M<m;)isNaN(_=ji(v(h[M],M,h)))||T.push(_);return Bu(T.sort(Di),.5)}function ct(){function h(v,m){m.forEach(M=>M._median=[]),v.forEach((M,_)=>M.children.forEach(T=>T._median.push(_))),m.forEach(M=>M._median=zu(M._median)||0),m.sort((M,_)=>M._median-_._median),m.forEach(M=>delete M._median)}return h}function Li(){let h=ct();function v(m){return m.slice(0,m.length-1).forEach((M,_)=>h(M,m[_+1])),m}return v.order=function(m){return arguments.length?(h=m,v):h},v}function $u(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function Pu(h,v){return v={exports:{}},h(v,v.exports),v.exports}var lo=Pu(function(h){var v=function(_,T){return _<T};function m(_){if(!(this instanceof m))return new m(_);this.array=[],this.size=0,this.compare=_||v}m.prototype.clone=function(){var _=new m(this.compare);_.size=this.size;for(var T=0;T<this.size;T++)_.array.push(this.array[T]);return _},m.prototype.add=function(_){var T=this.size;this.array[this.size]=_,this.size+=1;for(var C,z;T>0&&(C=T-1>>1,z=this.array[C],!!this.compare(_,z));)this.array[T]=z,T=C;this.array[T]=_},m.prototype.heapify=function(_){this.array=_,this.size=_.length;var T;for(T=this.size>>1;T>=0;T--)this._percolateDown(T)},m.prototype._percolateUp=function(_,T){for(var C=this.array[_],z,k;_>0&&(z=_-1>>1,k=this.array[z],!(!T&&!this.compare(C,k)));)this.array[_]=k,_=z;this.array[_]=C},m.prototype._percolateDown=function(_){for(var T=this.size,C=this.size>>>1,z=this.array[_],k,R,P;_<C&&(k=(_<<1)+1,R=k+1,P=this.array[k],R<T&&this.compare(this.array[R],P)&&(k=R,P=this.array[R]),!!this.compare(P,z));)this.array[_]=P,_=k;this.array[_]=z},m.prototype._removeAt=function(_){return this.isEmpty()||_>this.size-1||_<0?!1:(this._percolateUp(_,!0),this.poll(),!0)},m.prototype.remove=function(_,T){if(T||(T=this.compare),this.isEmpty())return!1;for(var C=0;C<this.size;C++)if(!(T(this.array[C],_)||T(_,this.array[C])))return this._removeAt(C);return!1},m.prototype.peek=function(){if(this.size!=0)return this.array[0]},m.prototype.poll=function(){if(this.size!=0){var _=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,_}},m.prototype.replaceTop=function(_){if(this.size!=0){var T=this.array[0];return this.array[0]=_,this._percolateDown(0),T}},m.prototype.trim=function(){this.array=this.array.slice(0,this.size)},m.prototype.isEmpty=function(){return this.size===0},m.prototype.forEach=function(_){if(!(this.isEmpty()||typeof _!="function"))for(var T=0,C=this.clone();!C.isEmpty();)_(C.poll(),T++)},m.prototype.kSmallest=function(_){if(this.size==0)return[];var T=this.compare,C=this.array,z=new m(function(G,en){return T(C[G],C[en])});_=Math.min(this.size,_);var k=new Array(_),R=0;for(z.add(0);R<_;){var P=z.poll();k[R++]=this.array[P];var D=(P<<1)+1,q=D+1;D<this.size&&z.add(D),q<this.size&&z.add(q)}return k};var M=function(){var _=new m(function(T,C){return T<C});for(_.add(1),_.add(0),_.add(5),_.add(4),_.add(3);!_.isEmpty();)console.log(_.poll())};$u.main===h&&M(),h.exports=m});function qi(){let h=0;function v(m){h=h||Math.floor(Math.sqrt(m.reduce(k=>k+1,0))+.5),m.each(k=>{k._before=[],k._parents=[]}).each(k=>k.children.forEach(R=>R._parents.push(k)));const M=lo((k,R)=>{for(let P=0;P<k._before.length;++P){if(P>=R._before.length)return!1;if(k._before[P]<R._before[P])return!0;if(R._before[P]<k._before[P])return!1}return!0});m.roots().forEach(k=>M.add(k));let _=0,T=0,C=0,z;for(;z=M.poll();)C<h&&z._parents.every(k=>k.layer<T)?(z.layer=T,C++):(z.layer=++T,C=1),z.children.forEach(k=>{k._before.push(_),k._before.length===k._parents.length&&(k._before.sort((R,P)=>P-R),M.add(k))}),_++;return m.each(k=>{delete k._before,delete k._parents}),m}return v.width=function(m){return arguments.length?(h=m,v):h},v}function Fi(){let h=!0;function v(m){if(h){const M=Math.max(...m.height().roots().map(_=>_.value));m.each(_=>{_.layer=M-_.value})}else m.depth(),m.each(M=>{M.layer=M.value});return m}return v.topDown=function(m){return arguments.length?(h=m,v):h},v}function Ui(){let h=!1;function v(m){const M=h?"":"\0",_=h?" -> ":"\0",T={},C={},z={};m.each(R=>{const P=`${M}${R.id}`;C[P]=1;const D=T[P]={opt:R.children.length};R.children.forEach(q=>{const G=`${R.id}${_}${q.id}`;z[G]={min:1},D[G]=-1})}),m.each(R=>{R.children.forEach(P=>{const D=T[`${M}${P.id}`];D.opt--,D[`${R.id}${_}${P.id}`]=1})});const k=Ri.Solve({optimize:"opt",opType:"max",constraints:z,variables:T,ints:C});return m.each(R=>R.layer=k[`${M}${R.id}`]||0),m}return v.debug=function(m){return arguments.length?(h=m,v):h},v}function ho(){function h(v){let m=0;return v.eachBefore(M=>M.layer=m++),v}return h}function Ou(){let h=!1,v=!1,m=1,M=1,_=Ui(),T=Li(),C=un(),z=Vu;function k(D){const q=[];return D.descendants().forEach(G=>{(q[G.layer]||(q[G.layer]=[])).push(G),G.children=G.children.map(H=>{if(H.layer>G.layer+1){let tn=H;for(let J=H.layer-1;J>G.layer;J--){const nn=new te(`${G.id}${h?"->":"\0"}${H.id}${h?" (":"\0"}${J}${h?")":""}`,void 0);nn.children=[tn],(q[J]||(q[J]=[])).push(nn),tn=nn}return tn}else return H})}),q}function R(D){D.each(q=>{q.data&&(q.children=q.children.map((G,en)=>{const H=[{x:q.x,y:q.y}];for(;!G.data;)H.push({x:G.x,y:G.y}),[G]=G.children;return H.push({x:G.x,y:G.y}),q._childLinkData[en].points=H,G}))})}function P(D){if(_(D),!D.every(G=>G.children.every(en=>en.layer>G.layer)))throw new Error("layering wasn't proper");const q=k(D);if(q.length===1){const[G]=q;G.forEach(en=>en.y=M/2)}else{const G=v?M:M/(q.length-1);q.forEach((en,H)=>en.forEach(tn=>tn.y=G*H))}if(q.every(G=>G.length===1))q.forEach(([G])=>G.x=m/2);else{T(q),C(q,z);const G=Math.min(...q.filter(H=>H.length>1).map(H=>Math.min(...H.slice(1).map((tn,J)=>tn.x-H[J].x)))),en=v?G:1;q.forEach(H=>H.forEach(tn=>tn.x*=m/en))}return R(D),D}return P.debug=function(D){return arguments.length?(h=D,P):h},P.size=function(D){return arguments.length?(v=!1,[m,M]=D,P):v?null:[m,M]},P.nodeSize=function(D){return arguments.length?(v=!0,[m,M]=D,P):v?[m,M]:null},P.layering=function(D){return arguments.length?(_=D,P):_},P.decross=function(D){return arguments.length?(T=D,P):T},P.coord=function(D){return arguments.length?(C=D,P):C},P.separation=function(D){return arguments.length?(z=D,P):z},P}function Vu(){return 1}function Ru(){function h(v,m){m.forEach(M=>{M._mean=0,M._count=0}),v.forEach((M,_)=>M.children.forEach(T=>T._mean+=(_-T._mean)/++T._count)),m.sort((M,_)=>M._mean-_._mean),m.forEach(M=>{delete M._mean,delete M._count})}return h}const po="crossings";function Du(){let h=!1;function v(...T){return T.map(C=>C.id).sort().join(h?" => ":"\0\0")}function m(T,C){C.sort((z,k)=>z.id>k.id||-1),C.slice(0,C.length-1).forEach((z,k)=>C.slice(k+1).forEach(R=>{const P=v(z,R);T.ints[P]=1,T.constraints[P]={max:1},T.variables[P]={[P]:1}})),C.slice(0,C.length-1).forEach((z,k)=>C.slice(k+1).forEach((R,P)=>{const D=v(z,R);C.slice(k+P+2).forEach(q=>{const G=v(z,q),en=v(R,q),H=v(z,R,q),tn=H+"+";T.constraints[tn]={max:1},T.variables[D][tn]=1,T.variables[G][tn]=-1,T.variables[en][tn]=1;const J=H+"-";T.constraints[J]={min:0},T.variables[D][J]=1,T.variables[G][J]=-1,T.variables[en][J]=1})}))}function M(T,C){C.slice(0,C.length-1).forEach((z,k)=>C.slice(k+1).forEach(R=>{z.children.forEach(P=>R.children.filter(D=>D!==P).forEach(D=>{const q=v(P,D);T.variables[q][po]=+(P.id>D.id)||-1}))}))}function _(T,C){const z={optimize:po,optType:"min",constraints:{},variables:{},ints:{}};m(z,C),M(z,T);const k=Ri.Solve(z);C.sort((R,P)=>(R.id>P.id||-1)*(k[v(R,P)]||-1))}return _.debug=function(T){return arguments.length?(h=T,_):h},_}function ju(){function h(v){const m=[],M=[];v.forEach((_,T)=>{_.childLinks().sort(({target:C},{target:z})=>C.layer-z.layer).forEach(({target:C,data:z})=>{if(C.layer===T+1)z.index=0;else{const k=(M.findIndex(P=>P<=T)+1||M.length+1)-1,R=(m.findIndex(P=>P<=T)+1||m.length+1)-1;k<R?(z.index=-k-1,M[k]=C.layer-1):(z.index=R+1,m[R]=C.layer-1)}})})}return h}function Lu(){let h=1,v=1,m=ju();function M(_){const T=[];_.eachBefore((z,k)=>{z.layer=k,T.push(z)});const C=T.length-1;if(C===0){const[z]=T;z.x=h/2,z.y=v/2}else{m(T);let z=0,k=0;_.eachLinks(({data:R})=>{z=Math.min(z,R.index),k=Math.max(k,R.index)}),z===k&&(z=-1,k=1),_.each(R=>{R.x=-z/(k-z)*h,R.y=R.layer/C*v}),_.eachLinks(({source:R,target:P,data:D})=>{const q=[{x:R.x,y:R.y}],G=(D.index-z)/(k-z)*h,en=(R.layer+1)/C*v,H=(P.layer-1)/C*v;P.layer-R.layer===2?q.push({x:G,y:en}):P.layer-R.layer>2&&q.push({x:G,y:en},{x:G,y:H}),q.push({x:P.x,y:P.y}),D.points=q})}return _}return M.size=function(_){return arguments.length?([h,v]=_,M):[h,v]},M}function qu(){let h=1,v=1,m=Fi().topDown(!1),M=Li(),_=Ei(),T=At(),C=Fu,z=Uu,k=Yu;function R(nn){const cn=[],fn=Math.max(0,...nn.descendants().map(on=>on.layer));return nn.descendants().forEach(on=>{if((cn[on.layer]||(cn[on.layer]=[])).push(on),on.children=on.children.map(Rn=>{if(Rn.layer>on.layer+1){let Nn=Rn;for(let bn=Rn.layer-1;bn>on.layer;bn--){const Mn=new te(`${on.id}\0${Rn.id}\0${bn}`,void 0);Mn.heightRatio=0,Mn.children=[Nn],(cn[bn]||(cn[bn]=[])).push(Mn),Nn=Mn}return Nn}else return Rn}),on.children.length===0&&on.layer<fn){let Rn=new te(`${on.id}\0\0${fn}`,void 0);(cn[fn]||(cn[fn]=[])).push(Rn);let Nn=Rn;for(let bn=fn-1;bn>on.layer;bn--){const Mn=new te(`${on.id}\0${Rn.id}\0${bn}`,void 0);Mn.heightRatio=0,Mn.children=[Nn],(cn[bn]||(cn[bn]=[])).push(Mn),Nn=Mn}on.children=[Nn]}}),cn}function P(nn){nn.each(cn=>{if(cn.data){let fn=0;cn.children=cn.children.map(on=>{const dn=[q(cn)];for(;on&&!on.data;)dn.push(D(on)),[on]=on.children===[]?[null]:on.children;return on!=null&&(dn.push(D(on)),cn._childLinkData[fn].points=dn,fn++),on}).filter(on=>on!=null)}})}function D(nn){return{x:nn.x0+(nn.x1-nn.x0)/2,y:nn.y0}}function q(nn){return{x:nn.x0+(nn.x1-nn.x0)/2,y:nn.y1}}function G(nn){nn.each(cn=>cn.children.forEach(fn=>(fn.parents||(fn.parents=[])).push(cn)))}function en(nn){let cn=nn.roots().map(H);return Math.max(0,...cn)}function H(nn){let cn=nn.children.map(H);return(nn.heightRatio||0)+Math.max(0,...cn)}function tn(nn){let cn=nn.parents?nn.parents.map(tn):[];return(nn.heightRatio||0)+Math.max(0,...cn)}function J(nn){let cn=en(nn);if(m(nn),!nn.every(on=>on.children.every(dn=>dn.layer>on.layer)))throw new Error("layering wasn't proper");const fn=R(nn);if(fn.length===1){const[on]=fn;on.forEach(dn=>{dn.y0=0,dn.y1=1})}else{G(nn);let on=fn.reduce((Nn,bn,Mn)=>Nn+(Mn==0?0:C(bn,Mn)),0),dn=cn+on,Rn=0;fn.forEach((Nn,bn)=>{Rn+=bn==0?0:C(Nn,bn),Nn.forEach(Mn=>{let ne=tn(Mn);Mn.y1=(Rn+ne)/dn,Mn.y0=Mn.y1-Mn.heightRatio/dn})})}return M(fn),_(fn),T(fn,z,k),fn.forEach(on=>on.forEach(dn=>{dn.x0*=h,dn.x1*=h,dn.y0*=v,dn.y1*=v})),P(nn),nn}return J.size=function(nn){return arguments.length?([h,v]=nn,J):[h,v]},J.layering=function(nn){return arguments.length?(m=nn,J):m},J.decross=function(nn){return arguments.length?(M=nn,J):M},J.columnAssignment=function(nn){return arguments.length?(_=nn,J):_},J.column2Coord=function(nn){return arguments.length?(T=nn,J):T},J.interLayerSeparation=function(nn){return arguments.length?(C=nn,J):C},J.columnWidth=function(nn){return arguments.length?(z=nn,J):z},J.columnSeparation=function(nn){return arguments.length?(k=nn,J):k},J}function Fu(){return 1}function Uu(){return 10}function Yu(){return 1}p.coordCenter=$,p.coordGreedy=un,p.coordMinCurve=La,p.coordTopological=qa,p.coordVert=Fa,p.column2CoordRect=At,p.columnSimpleLeft=Ua,p.columnSimpleCenter=Ya,p.columnAdjacent=Ha,p.columnComplex=Ei,p.dagConnect=vu,p.dagHierarchy=yu,p.dagStratify=qr,p.decrossOpt=ku,p.decrossTwoLayer=Li,p.layeringCoffmanGraham=qi,p.layeringLongestPath=Fi,p.layeringSimplex=Ui,p.layeringTopological=ho,p.sugiyama=Ou,p.twolayerMean=Ru,p.twolayerMedian=ct,p.twolayerOpt=Du,p.zherebko=Lu,p.arquint=qu,p.dagNode=te,Object.defineProperty(p,"__esModule",{value:!0})}),Array.prototype.remove=function(){for(var p,$=arguments,un=$.length,ln;un&&this.length;)for(p=$[--un];(ln=this.indexOf(p))!==-1;)this.splice(ln,1);return this};function d3_append_multiline_text(p,$,un="_",ln=void 0,pn=14,kn=void 0,Pn=13,Ve="central"){if(!$)return;const Mt=p.append("text").attr("class",ln).attr("dominant-baseline",Ve),We=$.split(un);if(kn||(kn=-pn*(We.length-1)/2),We!=null)for(let Re=0;Re<We.length;Re++)Mt.append("tspan").text(We[Re]).attr("dy",Re==0?kn:pn).attr("x",Pn)}function d3_append_oneline_text(p,$,un="_",ln=void 0,pn=14,kn=void 0,Pn=13,Ve="central"){$&&p.append("text").text($).attr("class",ln).attr("dominant-baseline",Ve).attr("x",Pn)}class FTDataHandler{constructor($,un=$.start){if($.links.length>0)this.dag=d3.dagConnect()($.links),this.dag.id!=null&&(this.root=this.dag.copy(),this.root.id=void 0,this.root.children=[this.dag],this.dag=this.root),this.nodes=this.dag.descendants().map(ln=>{if(ln.id in $.unions)return new Union(ln,this,$.unions[ln.id]);if(ln.id in $.persons)return new Person(ln,this,$.persons[ln.id])}),this.nodes.forEach(ln=>ln._children=ln._children.map(pn=>pn.ftnode)),this.number_nodes=0,this.nodes.forEach(ln=>{ln.id=ln.id||this.number_nodes,this.number_nodes++}),this.root=this.find_node_by_id(un),this.root.visible=!0,this.dag.children=[this.root];else if(Object.values($.persons).length>0){const ln=$.persons[un];this.root=new d3.dagNode(un,ln),this.root=new Person(this.root,this,ln),this.root.visible=!0,this.number_nodes=1,this.nodes=[this.root],this.dag=new d3.dagNode(void 0,{}),this.dag.children=this.root}}update_roots(){this.dag.children=[this.root];const $=this;function un(ln){ln.get_visible_inserted_neighbors().forEach(pn=>{pn.is_root()&&$.dag.children.push(pn),un(pn)})}un(this.root)}find_node_by_id($){return this.nodes.find(un=>un.id==$)}}class FTNode extends d3.dagNode{is_extendable(){return this.get_neighbors().filter($=>!$.visible).length>0}get_visible_neighbors(){return this.get_neighbors().filter($=>$.visible)}get_visible_inserted_neighbors(){return this.get_visible_neighbors().filter($=>this.inserted_nodes.includes($))}}class Union extends FTNode{constructor($,un,ln){super($.id,ln),$.ftnode=this,this.ft_datahandler=un,this._children=$.children,this.children=[],this._childLinkData=$._childLinkData,this.inserted_nodes=[],this.inserted_links=[],this.visible=!1}get_neighbors(){return this.get_parents().concat(this.get_children())}get_parents(){var $=this.data.partner.map(un=>this.ft_datahandler.find_node_by_id(un)).filter(un=>un!=null);return $||[]}get_hidden_parents(){return this.get_parents().filter($=>!$.visible)}get_visible_parents(){return this.get_parents().filter($=>$.visible)}get_children(){var $=[];return $=this.children.concat(this._children),$=$.filter(un=>un!=null),$}get_hidden_children(){return this.get_children().filter($=>!$.visible)}get_visible_children(){return this.get_children().filter($=>$.visible)}show_child($){this._children.includes($)||console.warn("Child node not in this' _children array."),this.children.push($),this._children.remove($),$.visible?this.inserted_links.push([this,$]):($.visible=!0,this.inserted_nodes.push($))}show_parent($){$._children.includes(this)||console.warn("This node not in parent's _children array."),$.children.push(this),$._children.remove(this),$.visible?this.inserted_links.push([$,this]):($.visible=!0,this.inserted_nodes.push($))}show(){this.visible=!0,this.get_children().forEach($=>{this.show_child($)}),this.get_parents().forEach($=>{this.show_parent($)})}get_visible_inserted_children(){return this.children.filter($=>this.inserted_nodes.includes($))}get_visible_inserted_parents(){return this.get_visible_parents().filter($=>this.inserted_nodes.includes($))}is_root(){return!1}hide_child($){this.children.includes($)||console.warn("Child node not in this's children array."),$.visible=!1,this._children.push($),this.children.remove($),this.inserted_nodes.remove($)}hide_parent($){$.children.includes(this)||console.warn("This node not in parent's children array."),$.visible=!1,$._children.push(this),$.children.remove(this),this.inserted_nodes.remove($)}hide(){this.visible=!1,this.get_visible_inserted_children().forEach($=>{this.hide_child($)}),this.get_visible_inserted_parents().forEach($=>{this.hide_parent($)}),this.inserted_links.forEach($=>{const un=$[0],ln=$[1];this==un?(this._children.push(ln),this.children.remove(ln)):this==ln&&(un._children.push(this),un.children.remove(this))}),this.inserted_links=[]}get_own_unions(){return[]}get_parent_unions(){return[]}get_tooltip_content(){}get_name(){}get_label_style(){}get_birth_year(){}get_birth_place(){}get_death_year(){}get_death_place(){}is_union(){return!0}add_parent($){const un=$.id||"p"+ ++this.ft_datahandler.number_nodes,ln=new d3.dagNode(un,$),pn=new Person(ln,this.ft_datahandler,$);return"parent_union"in $||($.parent_union=void 0),"own_unions"in $||($.own_unions=[this.id],pn._childLinkData=[[pn.id,this.id]],pn._children.push(this)),pn.data=$,this.ft_datahandler.nodes.push(pn),$.own_unions.includes(this.id)||$.own_unions.push(this.id),this.data.partner.includes(pn.id)||this.data.partner.push(pn.id),this.show_parent(pn),this.ft_datahandler.update_roots(),pn}add_child($){const un=$.id||"p"+ ++this.ft_datahandler.number_nodes,ln=new d3.dagNode(un,$),pn=new Person(ln,this.ft_datahandler,$);return"parent_union"in $||($.parent_union=this.id),"own_unions"in $||($.own_unions=[]),pn.data=$,this.ft_datahandler.nodes.push(pn),!$.parent_union==this.id&&$.parent_union==this.id,this.data.children.includes(pn.id)||this.data.children.push(pn.id),this._childLinkData.includes([this.id,pn.id])||this._childLinkData.push([this.id,pn.id]),this.show_child(pn),pn}}class Person extends FTNode{constructor($,un,ln){super($.id,ln),$.ftnode=this,this.ft_datahandler=un,this._children=$.children,this.children=[],this._childLinkData=$._childLinkData,this.inserted_nodes=[],this.inserted_links=[],this.visible=!1}get_name(){return this.data.name}get_label_style(){switch(this.data.company){case"H":return"node-label-h";case"B":return"node-label-b";case"S":return"node-label-s";case"T":return"node-label-t";case"L":return"node-label-l"}}get_birth_year(){return this.data.birthyear}get_birth_place(){return this.data.birthplace}get_death_year(){return this.data.deathyear}get_death_place(){return this.data.deathplace}get_neighbors(){return this.get_own_unions().concat(this.get_parent_unions())}get_parent_unions(){var $=[this.data.parent_union].map(ln=>this.ft_datahandler.find_node_by_id(ln)).filter(ln=>ln!=null),un=this.data.parent_union;return $||[]}get_hidden_parent_unions(){return this.get_parent_unions().filter($=>!$.visible)}get_visible_parent_unions(){return this.get_parent_unions().filter($=>$.visible)}get_visible_inserted_parent_unions(){return this.get_visible_parent_unions().filter($=>this.inserted_nodes.includes($))}is_root(){return this.get_visible_parent_unions().length==0}is_union(){return!1}get_own_unions(){var $=(this.data.own_unions??[]).map(un=>this.ft_datahandler.find_node_by_id(un)).filter(un=>un!=null);return $||[]}get_hidden_own_unions(){return this.get_own_unions().filter($=>!$.visible)}get_visible_own_unions(){return this.get_own_unions().filter($=>$.visible)}get_visible_inserted_own_unions(){return this.get_visible_own_unions().filter($=>this.inserted_nodes.includes($))}get_parents(){var $=[];this.get_parent_unions().forEach(un=>$=$.concat(un.get_parents()))}get_other_partner($){var un=$.partner.find(ln=>ln!=this.id&ln!=null);return all_nodes.find(ln=>ln.id==un)}get_partners(){var $=[];return this.get_own_unions().forEach(un=>{$.push(this.get_other_partner(un.data))}),$.filter(un=>un!=null)}get_children(){var $=[];return this.get_own_unions().forEach(un=>$=$.concat(getChildren(un))),$=$.filter(un=>un!=null),$}show_union($){$.show(),this.inserted_nodes.push($)}hide_own_union($){$.hide(),this.inserted_nodes.remove($)}hide_parent_union($){$.hide()}show(){this.get_hidden_own_unions().forEach($=>this.show_union($)),this.get_hidden_parent_unions().forEach($=>this.show_union($))}hide(){this.get_visible_inserted_own_unions().forEach($=>this.hide_own_union($)),this.get_visible_inserted_parent_unions().forEach($=>this.hide_parent_union($))}click(){this.is_extendable()?this.show():this.hide(),this.ft_datahandler.update_roots()}add_own_union($){const un=$.id||"u"+ ++this.ft_datahandler.number_nodes,ln=new d3.dagNode(un,$),pn=new Union(ln,this.ft_datahandler,$);return"partner"in $||($.partner=[this.id]),"children"in $||($.children=[],pn._childLinkData=[]),pn.data=$,this.ft_datahandler.nodes.push(pn),$.partner.includes(this.id)||$.partner.push(this.id),this.data.own_unions.includes(pn.id)||this.data.own_unions.push(pn.id),this._childLinkData.includes([this.id,pn.id])||this._childLinkData.push([this.id,pn.id]),this.show_union(pn),pn}add_parent_union($){const un=$.id||"u"+ ++this.ft_datahandler.number_nodes,ln=new d3.dagNode(un,$),pn=new Union(ln,this.ft_datahandler,$);return"partner"in $||($.partner=[]),"children"in $||($.children=[this.id],pn._childLinkData=[[pn.id,this.id]],pn._children.push(this)),pn.data=$,this.ft_datahandler.nodes.push(pn),$.children.includes(this.id)||$.children.push(this.id),this.data.parent_union=pn.id,this.show_union(pn),this.ft_datahandler.update_roots(),pn}}class FTDrawer{static label_delimiter="_";constructor($,un,ln,pn){this.ft_datahandler=$,this.svg=un,this._orientation=null,this.link_css_class="link",this.g=this.svg.append("g"),this.zoom=d3.zoom().on("zoom",Pn=>this.g.attr("transform",Pn.transform)),this.svg.call(this.zoom),this.svg.on("dblclick.zoom",null),this._tooltip_div=d3.select("body").append("div").attr("class","svg-tooltip").style("opacity",0),this.tooltip(FTDrawer.default_tooltip_func),this.layout=d3.sugiyama().nodeSize([120,120]).layering(d3.layeringSimplex()).decross(d3.decrossOpt).coord(d3.coordVert()),this.orientation("horizontal"),this.transition_duration(750),this.link_path(FTDrawer.default_link_path_func),this.node_label(FTDrawer.default_node_label_func),this.node_size(FTDrawer.default_node_size_func),this.node_class(FTDrawer.default_node_class_func);const kn=this.default_root_position();this.ft_datahandler.root.x0=ln||kn[0],this.ft_datahandler.root.y0=pn||kn[1]}default_root_position(){return[this.svg.attr("width")/2,this.svg.attr("height")/2]}orientation($){return $?(this._orientation=$,this):this.orientation}node_separation($){return $?(this.layout.nodeSize($),this):this.layout.nodeSize()}layering($){return $?(this.layout.layering($),this):this.layout.layering()}decross($){return $?(this.layout.decross($),this):this.layout.decross()}coord($){return $?(this.layout.coord($),this):this.layout.coord()}transition_duration($){return $!=0&!$?this._transition_duration:(this._transition_duration=$,this)}static default_tooltip_func($){if(!$.is_union()){var un=`
            <span style='margin-left: 2.5px;'><b>`+$.get_name()+`</b></span><br>
            <table style="margin-top: 2.5px;">
                    <tr><td>born</td><td>`+($.get_birth_year()||"?")+" in "+($.data.birthplace||"?")+`</td></tr>
                    <tr><td>died</td><td>`+($.get_death_year()||"?")+" in "+($.data.deathplace||"?")+`</td></tr>
            </table>
            `;return un.replace(new RegExp("null","g"),"?")}}tooltip($){return $?(this.show_tooltips=!0,this._tooltip_func=$):this.show_tooltips=!1,this}static default_node_label_func($){if(!$.is_union())return $.get_name()}node_label($){return $&&(this.node_label_func=$),this}static default_node_class_func($){if(!$.is_union())return $.is_extendable()?"person extendable":"person non-extendable"}node_class($){return $&&(this.node_class_func=$),this}static default_node_size_func($){return $.is_union()?0:10}node_size($){return $&&(this.node_size_func=$),this}static default_link_path_func($,un){function ln(kn,Pn){return`M ${kn.x} ${kn.y} 
            C ${kn.x} ${(kn.y+Pn.y)/2},
            ${Pn.x} ${(kn.y+Pn.y)/2},
            ${Pn.x} ${Pn.y}`}function pn(kn,Pn){return`M ${kn.x} ${kn.y}
            C ${(kn.x+Pn.x)/2} ${kn.y},
              ${(kn.x+Pn.x)/2} ${Pn.y},
              ${Pn.x} ${Pn.y}`}return this._orientation=="vertical"?ln($,un):pn($,un)}link_path($){return $&&(this.link_path_func=$),this}static make_unique_link_id($){return $.id||$.source.id+"_"+$.target.id}draw($=this.ft_datahandler.root){const un=this.ft_datahandler.dag.descendants(),ln=this.ft_datahandler.dag.links();if(this.layout(this.ft_datahandler.dag),this._orientation=="horizontal"){var pn=null;un.forEach(function(Bn){pn=Bn.x,Bn.x=Bn.y,Bn.y=pn})}var kn=this.g.selectAll("g.node").data(un,Bn=>Bn.id),Pn=kn.enter().append("g").attr("class","node").attr("transform",Bn=>"translate("+$.x0+","+$.y0+")").on("click",(Bn,Qn)=>{Qn.click(),this.draw(Qn)}).attr("visible",!0);if(this.show_tooltips){const Bn=this._tooltip_div,Qn=this._tooltip_func;Pn.on("mouseover",function(De,sr){Bn.transition().duration(200).style("opacity",void 0),Bn.html(Qn(sr));let Lt=Bn.node().getBoundingClientRect().height;Bn.style("left",De.pageX+10+"px").style("top",De.pageY-Lt/2+"px")}).on("mouseout",function(De){Bn.transition().duration(500).style("opacity",0)})}Pn.append("circle").attr("class",this.node_class_func).attr("r",1e-6);const Ve=this;Pn.each(function(Bn){d3_append_oneline_text(d3.select(this),Ve.node_label_func(Bn),FTDrawer.label_delimiter,Bn.get_label_style())});var Mt=Pn.merge(kn);Mt.transition().duration(this.transition_duration()).attr("transform",Bn=>"translate("+Bn.x+","+Bn.y+")"),Mt.select(".node circle").attr("r",this.node_size_func).attr("class",this.node_class_func).attr("cursor","pointer");var We=kn.exit().transition().duration(this.transition_duration()).attr("transform",Bn=>"translate("+$.x+","+$.y+")").attr("visible",!1).remove();We.select("circle").attr("r",1e-6),We.select("text").style("fill-opacity",1e-6);var Re=this.g.selectAll("path."+this.link_css_class).data(ln,FTDrawer.make_unique_link_id),Ze=Re.enter().insert("path","g").attr("class",this.link_css_class).attr("d",Bn=>{var Qn={x:$.x0,y:$.y0};return this.link_path_func(Qn,Qn)}),Vr=Ze.merge(Re);Vr.transition().duration(this.transition_duration()).attr("d",Bn=>this.link_path_func(Bn.source,Bn.target));var ja=Re.exit().transition().duration(this.transition_duration()).attr("d",Bn=>{var Qn={x:$.x,y:$.y};return this.link_path_func(Qn,Qn)}).remove();this.svg.transition().duration(this.transition_duration()).call(this.zoom.transform,d3.zoomTransform(this.g.node()).translate(-($.x-$.x0),-($.y-$.y0))),un.forEach(function(Bn){Bn.x0=Bn.x,Bn.y0=Bn.y})}clear(){this.g.selectAll("*").remove()}}class FamilyTree extends FTDrawer{constructor($,un){const ln=new FTDataHandler($);super(ln,un)}get root(){return this.ft_datahandler.root}wait_until_data_loaded($,un,ln,pn){if(ln!=pn){const kn=window.data;if($==kn)setTimeout(Pn=>this.wait_until_data_loaded($,un,++ln,pn),un);else{this.draw_data(kn);return}}}draw_data($){var un=null,ln=null;this.root!==null?[un,ln]=[this.root.x0,this.root.y0]:[un,ln]=this.default_root_position(),this.ft_datahandler=new FTDataHandler($),this.root.x0=un,this.root.y0=ln,this.clear(),this.draw()}load_data($){const un=data,ln=5,pn=1e3,kn=document.createElement("script");var Pn=0;kn.onreadystatechange=function(){this.readyState=="complete"&&this.wait_until_data_loaded(un,pn,Pn,ln)},kn.onload=this.wait_until_data_loaded(un,pn,Pn,ln),kn.type="text/javascript",kn.src=$,document.getElementsByTagName("head")[0].appendChild(kn)}}
